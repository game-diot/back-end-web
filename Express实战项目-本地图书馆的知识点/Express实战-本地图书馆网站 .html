<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Expresså®æˆ˜-æœ¬åœ°å›¾ä¹¦é¦†ç½‘ç«™</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.highlight-default_background {
	color: rgba(50, 48, 44, 1);
}
.highlight-gray_background {
	background: rgba(248, 248, 247, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(248, 243, 252, 1);
}
.highlight-pink_background {
	background: rgba(252, 241, 246, 1);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(115, 114, 110, 1);
	fill: rgba(115, 114, 110, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(205, 60, 58, 1);
	fill: rgba(205, 60, 58, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(248, 248, 247, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(248, 243, 252, 1);
}
.block-color-pink_background {
	background: rgba(252, 241, 246, 1);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-uiBlue { background-color: undefined; }
.select-value-color-pink { background-color: rgba(225, 136, 179, 0.27); }
.select-value-color-purple { background-color: rgba(168, 129, 197, 0.27); }
.select-value-color-green { background-color: rgba(123, 183, 129, 0.27); }
.select-value-color-gray { background-color: rgba(84, 72, 49, 0.15); }
.select-value-color-translucentGray { background-color: undefined; }
.select-value-color-orange { background-color: rgba(224, 124, 57, 0.27); }
.select-value-color-brown { background-color: rgba(210, 162, 141, 0.35); }
.select-value-color-red { background-color: rgba(244, 171, 159, 0.4); }
.select-value-color-yellow { background-color: rgba(236, 191, 66, 0.39); }
.select-value-color-blue { background-color: rgba(93, 165, 206, 0.27); }
.select-value-color-pageGlass { background-color: undefined; }
.select-value-color-washGlass { background-color: undefined; }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="1f3694d5-ea46-8032-9f80-e0d4438be999" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">ğŸ¥´</span></div><h1 class="page-title">Expresså®æˆ˜-æœ¬åœ°å›¾ä¹¦é¦†ç½‘ç«™</h1><p class="page-description"></p></header><div class="page-body"><p id="1f4694d5-ea46-80dc-90d3-f12b645dad50" class="">// å¯¼å…¥ mongoose æ¨¡å—<br/>const mongoose = require(&quot;mongoose&quot;);<br/></p><p id="1f4694d5-ea46-8082-aa6c-dfa204f403a3" class="">// è®¾ç½®é»˜è®¤ mongoose è¿æ¥<br/>const mongoDB = &quot;mongodb://127.0.0.1/my_database&quot;;<br/>mongoose.connect(mongoDB);<br/>// è®© mongoose ä½¿ç”¨å…¨å±€ Promise åº“<br/>mongoose.Promise = global.Promise;<br/>// å–å¾—é»˜è®¤è¿æ¥<br/>const db = mongoose.connection;<br/></p><p id="1f4694d5-ea46-80db-ab68-e7e50030c6d7" class="">// å°†è¿æ¥ä¸é”™è¯¯äº‹ä»¶ç»‘å®šï¼ˆä»¥è·å¾—è¿æ¥é”™è¯¯çš„æç¤ºï¼‰<br/>db.on(&quot;error&quot;, console.error.bind(console, &quot;MongoDB è¿æ¥é”™è¯¯ï¼š&quot;));<br/></p><p id="1f3694d5-ea46-80dd-ae1d-fa4dd57e6738" class="">app.use(logger(&quot;dev&quot;));<br/>app.use(express.json());<br/>app.use(express.urlencoded({ extended: false }));<br/>app.use(cookieParser());<br/>app.use(express.static(path.join(__dirname, &quot;public&quot;)));<br/></p><p id="1f3694d5-ea46-80a1-a098-f0454cf5818a" class=""><strong><span style="border-bottom:0.05em solid">æ¦‚è§ˆï¼š</span></strong></p><ul id="1f3694d5-ea46-8006-92a1-e3892361f497" class="bulleted-list"><li style="list-style-type:disc">æœ¬æ•™ç¨‹æ•™ä¼š<ul id="1f3694d5-ea46-802b-a916-c944ade373ec" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨Expressåº”ç”¨ç”Ÿæˆå™¨åˆ›å»ºä¸€ä¸ªåº”ç”¨éª¨æ¶</li></ul><ul id="1f3694d5-ea46-803e-a487-f7db4f3f0bc2" class="bulleted-list"><li style="list-style-type:circle">å¯åŠ¨å’Œåœæ­¢Node webæœåŠ¡å™¨</li></ul><ul id="1f3694d5-ea46-8092-b0fc-cbba5f8b6ecb" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨æ•°æ®åº“å­˜æ”¾åº”ç”¨æ•°æ®</li></ul><ul id="1f3694d5-ea46-80fc-aa00-f96d334221fd" class="bulleted-list"><li style="list-style-type:circle">åˆ›å»ºè·¯ç”±æ¥å¤„ç†ä¸åŒä¿¡æ¯çš„è¯·æ±‚ï¼Œåˆ›å»ºæ¨¡æ¿ï¼ˆâ€œè§†å›¾â€ï¼‰æ¥æ¸²æŸ“HTMLæ•°æ®ï¼Œåœ¨æµè§ˆå™¨ä¸­æ˜¾ç¤º</li></ul><ul id="1f3694d5-ea46-80ef-b4e9-d6636a5d08dc" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨è¡¨å•</li></ul><ul id="1f3694d5-ea46-8071-bcbb-ef70f04bd24f" class="bulleted-list"><li style="list-style-type:circle">éƒ¨ç½²åº”ç”¨åˆ°ç”Ÿäº§ç¯å¢ƒ</li></ul></li></ul><p id="1f3694d5-ea46-802a-a6cb-cded77975d4d" class="">
</p><p id="1f3694d5-ea46-800c-a20f-cdfbdd0cb073" class=""><mark class="highlight-red"><strong><span style="border-bottom:0.05em solid">æœ¬åœ°å›¾ä¹¦é¦†ï¼ˆLocalLibraryï¼‰</span></strong></mark></p><p id="1f3694d5-ea46-8078-950e-d04e55039942" class="">
</p><p id="1f3694d5-ea46-803e-bdd4-de001f89c3d1" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬ä¸€æ­¥åˆ›å»ºç«™ç‚¹æ¡†æ¶ã€‘ï¼š</span></strong></p><p id="1f3694d5-ea46-80f1-91ea-c1ffdd4bbf7e" class="">
</p><p id="1f3694d5-ea46-80da-8b92-e14021651fc2" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f3694d5-ea46-806d-8999-e75ccc6f5b43" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨Expressåº”ç”¨ç”Ÿæˆå™¨åˆ›å»ºä¸€ä¸ªå¯ä»¥æ·»åŠ è·¯ç”±ã€æ¨¡æ¿/è§†å›¾ã€æ•°æ®åº“è°ƒç”¨çš„æ¡†æ¶ç½‘ç«™ã€‚ä½¿ç”¨å‘½ä»¤è¡Œè¿è¡Œï¼ˆç”Ÿæˆå™¨ + é¡¹ç›®åï¼‰å³å¯</li></ul><ul id="1f3694d5-ea46-807b-9f5f-d0d6b0a3eddd" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä¸‹ä»‹ç»äº†åº”ç”¨ç”Ÿæˆå™¨çš„ç”¨æ³•ï¼Œä»¥åŠè§†å›¾/CSSçš„ä¸åŒé€‰é¡¹ï¼Œæ¡†æ¶ç½‘ç«™çš„ç»„ç»‡ç»“æ„ï¼Œç«™ç‚¹çš„è¿è¡Œæ–¹æ³•ç­‰</li></ul><p id="1f3694d5-ea46-80ea-a5a4-e4bf6a48fad9" class=""><strong>ä½¿ç”¨åº”ç”¨ç”Ÿæˆå™¨ï¼š</strong></p><ul id="1f3694d5-ea46-80c5-b7f0-d19317e00a29" class="bulleted-list"><li style="list-style-type:disc">å®‰è£…å…¨å±€ç”Ÿæˆå™¨<ul id="1f3694d5-ea46-80aa-b579-e104f36b633c" class="bulleted-list"><li style="list-style-type:circle">npm install express-generator -g</li></ul></li></ul><ul id="1f3694d5-ea46-808d-b9e8-ce7ee9f13725" class="bulleted-list"><li style="list-style-type:disc">ç”Ÿæˆå™¨é€‰é¡¹ <ul id="1f3694d5-ea46-8006-abb3-f8bf13dda04f" class="bulleted-list"><li style="list-style-type:circle">express â€”helpæˆ–-h</li></ul></li></ul><figure id="1f3694d5-ea46-8041-8c7c-e81cae91418b" class="image"><a href="image.png"><img style="width:561.1875px" src="image.png"/></a></figure><figure id="1f3694d5-ea46-801f-b37b-cac9185588a3" class="image"><a href="image%201.png"><img style="width:561.1875px" src="image%201.png"/></a></figure><ul id="1f3694d5-ea46-80a2-bd55-f3dec5ee423f" class="bulleted-list"><li style="list-style-type:disc">è¿è¡Œexpresså‘½ä»¤ï¼Œå°†ä½¿ç”¨Jadeè§†å›¾å¼•æ“å’ŒCSSåœ¨å½“å‰ç›®å½•åˆ›å»ºé¡¹ç›®<ul id="1f3694d5-ea46-8090-9bb0-d6b9e75630f8" class="bulleted-list"><li style="list-style-type:circle">express</li></ul></li></ul><ul id="1f3694d5-ea46-80bb-b5a5-cec207d0df22" class="bulleted-list"><li style="list-style-type:disc">ä¹Ÿå¯ä»¥ä½¿ç”¨ â€”viewé€‰æ‹©è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰å¼•æ“ï¼Œä½¿ç”¨â€”cssé€‰æ‹©CSSç”Ÿæˆå¼•æ“</li></ul><p id="1f3694d5-ea46-8038-8a7e-e985c02a3bd5" class=""><strong>å¦‚ä½•é€‰æ‹©åˆé€‚çš„è§†å›¾å¼•æ“ï¼šæœ¬é¡¹ç›®ä½¿ç”¨Pugæ¨¡æ¿</strong></p><ul id="1f3694d5-ea46-80f8-87b2-dd483f11d37b" class="bulleted-list"><li style="list-style-type:disc">é€‰æ‹©æ¨¡æ¿å¼•æ“è€ƒè™‘ä»¥ä¸‹å› ç´ <ul id="1f3694d5-ea46-8068-9e7a-ff7e9185759d" class="bulleted-list"><li style="list-style-type:circle">è¿›å…¥ç”Ÿäº§çŠ¶æ€çš„æ—¶é—´â€”â€”å¦‚æœä½ çš„å›¢é˜Ÿå·²ç»æœ‰æŸä¸ªæ¨¡æ¿è¯­è¨€çš„ç»éªŒï¼Œé‚£ä¹ˆç”¨å®ƒå¯èƒ½æ›´å¿«è¿›å…¥ç”Ÿäº§çŠ¶æ€ã€‚å¦åˆ™ä½ åº”è¯¥è€ƒè™‘æ‰€é€‰æ¨¡æ¿å¼•æ“çš„å­¦ä¹ æ›²çº¿ã€‚</li></ul><ul id="1f3694d5-ea46-80b7-a321-c199cc3709f8" class="bulleted-list"><li style="list-style-type:circle">æµè¡Œåº¦å’Œæ´»è·ƒåº¦â€”â€”è¦è¯„ä¼°æ‰€é€‰å¼•æ“çš„æµè¡Œç¨‹åº¦ï¼Œä»¥åŠå®ƒæ˜¯å¦æ‹¥æœ‰æ´»è·ƒçš„ç¤¾åŒºã€‚åœ¨ç½‘ç«™çš„ç”Ÿå‘½å‘¨æœŸä¸­é‡åˆ°é—®é¢˜æ—¶ï¼Œæ˜¯å¦èƒ½å¤Ÿè·å¾—ç›¸å…³æ”¯æŒéå¸¸é‡è¦ã€‚</li></ul><ul id="1f3694d5-ea46-80b3-b9b3-d152ef4e5fba" class="bulleted-list"><li style="list-style-type:circle">é£æ ¼â€”â€”æŸäº›æ¨¡æ¿å¼•æ“ä½¿ç”¨ç‰¹å®šæ ‡è®°ï¼Œæ¥æ ‡è¯†æ’å…¥â€œæ™®é€šâ€HTML ä¸­çš„å†…å®¹ï¼Œè€Œå¦ä¸€äº›æ¨¡æ¿å¼•æ“ä½¿ç”¨ä¸åŒçš„è¯­æ³•ï¼ˆä¾‹å¦‚ä½¿ç”¨ç¼©è¿›å’Œå—åç§°ï¼‰æ„é€  HTMLã€‚</li></ul><ul id="1f3694d5-ea46-80dd-a385-c28c14d87da3" class="bulleted-list"><li style="list-style-type:circle">æ€§èƒ½/æ¸²æŸ“æ—¶é—´ã€‚</li></ul><ul id="1f3694d5-ea46-8033-853e-efc92bc6457a" class="bulleted-list"><li style="list-style-type:circle">åŠŸèƒ½â€”â€”ä½ åº”è¯¥è€ƒè™‘æ‰€é€‰å¼•æ“æ˜¯å¦å…·æœ‰ä»¥ä¸‹åŠŸèƒ½ï¼š<ul id="1f3694d5-ea46-80ff-a287-e24f450b7487" class="bulleted-list"><li style="list-style-type:square">å¸ƒå±€ç»§æ‰¿ï¼šå¯ä»¥å®šä¹‰åŸºæœ¬æ¨¡æ¿ï¼Œç„¶åâ€œç»§æ‰¿â€å®ƒçš„ä¸€éƒ¨åˆ†ï¼Œä½¿ä¸åŒé¡µé¢å¯ä»¥æœ‰ä¸åŒçš„å‘ˆç°ã€‚è¿™é€šå¸¸æ¯”åŒ…å«å¤§é‡æ‰€éœ€ç»„ä»¶ï¼Œæˆ–æ¯æ¬¡ä»å¤´å¼€å§‹æ„å»ºæ¨¡æ¿æ›´å¥½ã€‚</li></ul><ul id="1f3694d5-ea46-80f8-aff0-db489c24cc0a" class="bulleted-list"><li style="list-style-type:square">â€œåŒ…å«â€æ”¯æŒï¼šå¯ä»¥é€šè¿‡åŒ…å«å…¶ä»–æ¨¡æ¿æ¥æ„å»ºæ–°æ¨¡æ¿ã€‚</li></ul><ul id="1f3694d5-ea46-807d-bda9-f903f3eeede3" class="bulleted-list"><li style="list-style-type:square">ç®€æ˜çš„å˜é‡å’Œå¾ªç¯æ§åˆ¶è¯­æ³•ã€‚</li></ul><ul id="1f3694d5-ea46-80d1-96b9-d111027de728" class="bulleted-list"><li style="list-style-type:square">èƒ½å¤Ÿåœ¨æ¨¡æ¿çº§åˆ«è¿‡æ»¤å˜é‡å€¼ï¼ˆä¾‹å¦‚ï¼Œå°†å˜é‡è®¾ç½®ä¸ºå¤§å†™ï¼Œæˆ–æ ¼å¼åŒ–æ—¥æœŸå€¼ï¼‰ã€‚</li></ul><ul id="1f3694d5-ea46-807b-8fcc-c432eea4369b" class="bulleted-list"><li style="list-style-type:square">èƒ½å¤Ÿç”Ÿæˆ HTML ä»¥å¤–çš„è¾“å‡ºæ ¼å¼ï¼ˆä¾‹å¦‚ JSON æˆ– XMLï¼‰ã€‚</li></ul><ul id="1f3694d5-ea46-8029-b69a-da5dc72281c2" class="bulleted-list"><li style="list-style-type:square">æ”¯æŒå¼‚æ­¥æ“ä½œå’Œæµã€‚</li></ul><ul id="1f3694d5-ea46-809c-b902-cd3752a180ed" class="bulleted-list"><li style="list-style-type:square">å¯ä»¥åœ¨åŒæ—¶åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ä¸Šä½¿ç”¨ã€‚å¦‚æœä¸€æ¬¾æ¨¡æ¿å¼•æ“å¯ä»¥åœ¨å®¢æˆ·ç«¯ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±ä½¿åœ¨å®¢æˆ·ç«¯æ‰˜ç®¡æ•°æ®å¹¶å®Œæˆæ‰€æœ‰ï¼ˆæˆ–å¤§å¤šæ•°ï¼‰æ¸²æŸ“æˆä¸ºå¯èƒ½ã€‚</li></ul></li></ul></li></ul><p id="1f3694d5-ea46-80f2-989c-deef3c1feb9c" class=""><strong>å¦‚ä½•é€‰æ‹©åˆé€‚çš„CSSå¼•æ“ï¼šæœ¬é¡¹ç›®ä½¿ç”¨é»˜è®¤CSS</strong></p><ul id="1f3694d5-ea46-8055-8167-d7e4c20ec097" class="bulleted-list"><li style="list-style-type:disc">å¸¸è§çš„CSSå¼•æ“æœ‰LESSã€SASSã€Compassã€Stylus</li></ul><ul id="1f3694d5-ea46-80ed-b0de-c03975a59043" class="bulleted-list"><li style="list-style-type:disc">ä¸æ¨¡æ¿å¼•æ“ä¸€æ ·ï¼Œæ¨èä½¿ç”¨æ ·å¼è¡¨å¼•æ“ï¼Œè¿™æ ·å¯ä»¥æœ€å¤§åŒ–å›¢é˜Ÿç”Ÿäº§åŠ›</li></ul><p id="1f3694d5-ea46-8046-8989-d6775d249b63" class=""><strong>å¦‚ä½•é€‰æ‹©åˆé€‚çš„æ•°æ®åº“ï¼šæœ¬é¡¹ç›®æš‚ä¸ä½¿ç”¨æ•°æ®åº“</strong></p><ul id="1f3694d5-ea46-80b9-9f91-f7108a4c0064" class="bulleted-list"><li style="list-style-type:disc">ç”Ÿæˆå™¨ç”Ÿæˆçš„ä»£ç ä¸ä½¿ç”¨ã€ä¹Ÿä¸åŒ…å«ä»»ä½•æ•°æ®åº“ï¼Œ</li></ul><ul id="1f3694d5-ea46-80bc-a452-ecff14761855" class="bulleted-list"><li style="list-style-type:disc">Expressåº”ç”¨å¯ä»¥ä½¿ç”¨Nodeæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“</li></ul><p id="1f3694d5-ea46-80ab-a287-c6ba47fb7e86" class="">
</p><p id="1f3694d5-ea46-80d5-8c21-cc988d357129" class=""><strong>åˆ›å»ºé¡¹ç›®ï¼š</strong></p><ul id="1f3694d5-ea46-80fe-af84-f06ea1a295db" class="bulleted-list"><li style="list-style-type:disc">æœ¬åœ°å›¾ä¹¦é¦†åº”ç”¨åˆ›å»ºä¸€ä¸ªexpress-locallibrary-tutorialçš„é¡¹ç›®ï¼Œä½¿ç”¨Pugæ¨¡æ¿ï¼Œä¸ä½¿ç”¨CSSå¼•æ“</li></ul><ul id="1f3694d5-ea46-8087-b1cf-f5d636c2ba09" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆï¼Œè¿›å…¥ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡ŒExpressåº”ç”¨ç”Ÿæˆå™¨ï¼Œåˆ›å»ºé¡¹ç›®æ–‡ä»¶</li></ul><p id="1f3694d5-ea46-806f-8be6-de78a8f187ad" class="">
</p><p id="1f3694d5-ea46-8033-8450-e7194495df53" class=""><strong>è¿è¡Œæ¡†æ¶ç½‘ç«™ï¼š</strong></p><ul id="1f3694d5-ea46-8014-abe0-dd6f52caf90b" class="bulleted-list"><li style="list-style-type:disc">ç°åœ¨æœ‰äº†å®Œæ•´çš„é¡¹ç›®æ¡†æ¶ï¼Œå±•ç¤ºä¸€ä¸‹å·¥ä½œåŸç†</li></ul><ul id="1f3694d5-ea46-80fe-9f5d-cc073d2dfdd8" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆï¼Œå®‰è£…ä¾èµ–é¡¹ï¼ˆinstallå‘½ä»¤å°†è·å–é¡¹ç›®çš„package.jsonæ–‡ä»¶ä¸­åˆ—å‡ºçš„æ‰€æœ‰ä¾èµ–é¡¹åŒ…ï¼‰<ul id="1f3694d5-ea46-8058-adde-e4de68f41f6d" class="bulleted-list"><li style="list-style-type:circle">npm install</li></ul></li></ul><ul id="1f3694d5-ea46-805e-ba59-df34b0ceb56a" class="bulleted-list"><li style="list-style-type:disc">è¿è¡Œè¯¥åº”ç”¨<ul id="1f3694d5-ea46-8091-8248-eb042f1a8ac2" class="bulleted-list"><li style="list-style-type:circle">å…ˆèµ‹äºˆDEBUGå˜é‡<ul id="1f3694d5-ea46-80c3-91b8-eb1444179f20" class="bulleted-list"><li style="list-style-type:square">$env:DEBUG = &quot;express:*â€</li></ul></li></ul><ul id="1f3694d5-ea46-80a5-869e-dcb3f0fd7f02" class="bulleted-list"><li style="list-style-type:circle">åœ¨å¯åŠ¨Expressåº”ç”¨<ul id="1f3694d5-ea46-80f5-b92c-d89951a80422" class="bulleted-list"><li style="list-style-type:square">npm start</li></ul></li></ul></li></ul><ul id="1f3694d5-ea46-80e1-9117-e4c1546e4539" class="bulleted-list"><li style="list-style-type:disc">æµè§ˆå™¨ä¸­å¯¼èˆªè‡³URLï¼Œè®¿é—®è¯¥åº”ç”¨<ul id="1f3694d5-ea46-803e-ab11-e06a8f877210" class="bulleted-list"><li style="list-style-type:circle">Â <a href="http://localhost:3000/">http://localhost:3000/</a>Â </li></ul></li></ul><ul id="1f3694d5-ea46-8076-8302-e2d9ee6a31ff" class="bulleted-list"><li style="list-style-type:disc">è¯¥Expressåº”ç”¨æ‰˜å…³äºlocalhostï¼š3000</li></ul><p id="1f3694d5-ea46-80e0-afc5-e64258d89703" class="">
</p><p id="1f3694d5-ea46-8098-b5d7-c2417b53d3c0" class=""><strong>æ–‡ä»¶æ”¹åŠ¨æ—¶é‡å¯æœåŠ¡å™¨ï¼š</strong></p><ul id="1f3694d5-ea46-80b1-b002-e9c4d5ff83a0" class="bulleted-list"><li style="list-style-type:disc">åªæœ‰é‡å¯æœåŠ¡å™¨æ‰èƒ½çœ‹åˆ°Expressç½‘ç«™æ‰€ä½œçš„æ”¹åŠ¨ï¼Œæ¯æ¬¡æ”¹åŠ¨åéœ€è¦æ‰‹åŠ¨å¯åŠ¨/åœæ­¢æœåŠ¡å™¨ï¼Œå¾ˆéº»çƒ¦</li></ul><ul id="1f3694d5-ea46-80ff-a1b2-c35677321d22" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨è‡ªåŠ¨åŒ–å·¥å…·-nodemonï¼Œå…¨å±€å®‰è£…<ul id="1f3694d5-ea46-80f4-bbc6-eacdb85ef587" class="bulleted-list"><li style="list-style-type:circle">npm install -g nodemon</li></ul></li></ul><ul id="1f3694d5-ea46-8005-9ade-ca692cb32f83" class="bulleted-list"><li style="list-style-type:disc">ä¹Ÿå¯ä»¥å°†å…¶ä½œä¸ºå¼€å‘ä¾èµ–å®‰è£…åœ¨æœ¬åœ°ï¼Œäºæ˜¯ä½¿ç”¨è¿™ä¸ªé¡¹ç›®çš„å¼€å‘äººå‘˜åªè¦å®‰è£…è¿™ä¸ªåº”ç”¨å°±èƒ½è‡ªåŠ¨è·å¾—ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤å°†å…¶å®‰è£…åœ¨æ¡†æ¶é¡¹ç›®çš„æ ¹ç›®å½•<ul id="1f3694d5-ea46-800c-8646-db39c5e72241" class="bulleted-list"><li style="list-style-type:circle">npm install â€”save-dev nodemon</li></ul></li></ul><ul id="1f3694d5-ea46-8046-bd9c-c4b708dbf02b" class="bulleted-list"><li style="list-style-type:disc">é¡¹ç›®çš„package.jsonæ–‡ä»¶è‡ªåŠ¨æ·»åŠ æ–°å±æ€§<ul id="1f3694d5-ea46-8029-97eb-c58f0943a2b1" class="bulleted-list"><li style="list-style-type:circle">devDependencies</li></ul></li></ul><ul id="1f3694d5-ea46-8081-a9a7-d491de42ab02" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ²¡æœ‰å…¨å±€å®‰è£…è¯¥å·¥å…·ï¼Œå°±æ— æ³•åœ¨å‘½ä»¤è¡Œå¯åŠ¨ï¼Œåˆ°é‚£æ—¶å¯ä»¥åœ¨NPMè„šæœ¬ä¸­è°ƒç”¨å®ƒï¼Œå› ä¸ºNPMè„šæœ¬æŒæ¡æ‰€æœ‰å·²å®‰è£…çš„åŒ…ä¿¡æ¯ï¼Œ<ul id="1f3694d5-ea46-80c0-b835-e31abc7a848b" class="bulleted-list"><li style="list-style-type:circle">åœ¨package.jsonä¸­çš„scriptséƒ¨åˆ†ï¼Œåœ¨startä¸€è¡Œæœ«å°¾æ·»åŠ éƒ½å¥½ï¼Œå¹¶åœ¨æ–°çš„ä¸€è¡Œä¸­æ·»åŠ devstartã€‚<ul id="1f3694d5-ea46-80bc-bd49-c40dff354c95" class="bulleted-list"><li style="list-style-type:square">&quot;scripts&quot;: {<br/>&quot;start&quot;: &quot;node ./bin/www&quot;,<br/>&quot;devstart&quot;: &quot;nodemon ./bin/www&quot;<br/>},<br/></li></ul></li></ul></li></ul><ul id="1f3694d5-ea46-809c-8f26-e23751452b91" class="bulleted-list"><li style="list-style-type:disc">ç°åœ¨å°±å¯ä»¥ä½¿ç”¨æ–°å»ºçš„devstartå‘½ä»¤å¯åŠ¨æœåŠ¡å™¨<ul id="1f3694d5-ea46-8061-9747-f619d67c6730" class="bulleted-list"><li style="list-style-type:circle">npm run devstart</li></ul></li></ul><ul id="1f3694d5-ea46-8074-8f90-fed583b241ae" class="bulleted-list"><li style="list-style-type:disc">ç°åœ¨ç¼–è¾‘é¡¹ç›®ä¸­çš„ä»»ä½•æ–‡ä»¶ï¼ŒæœåŠ¡å™¨éƒ½ä¼šè‡ªåŠ¨é‡å¯ï¼ˆæˆ–è€…å¯ä»¥éšæ—¶ä½¿ç”¨rså‘½ä»¤æ¥é‡å¯ï¼‰ï¼ŒæŸ¥çœ‹æ›´æ–°åçš„é¡µé¢éœ€è¦ç‚¹å‡»æµè§ˆå™¨çš„åˆ·æ–°æŒ‰é’®</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f3694d5-ea46-80c4-ae91-f2424c7c1ccd"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f3694d5-ea46-8074-bc95-ca5c5ffba532" class=""><strong>è¿™é‡Œå¿…é¡»ä½¿ç”¨ npm run &lt;script name&gt;å‘½ä»¤æ¥è¿è¡Œï¼Œè€Œä¸æ˜¯npm startã€‚</strong></p><p id="1f3694d5-ea46-80f4-80bb-f85e7b8b6478" class="">å› ä¸ºstartæœ¬è´¨æ˜¯æ˜ å°„åˆ°è„šæœ¬çš„ä¸€æ¡NPMå‘½ä»¤ï¼Œå¯ä»¥åœ¨startè„šæœ¬ä¸­æ›¿æ¢ä»–ï¼Œä½†æˆ‘ä»¬åªæƒ³åœ¨å¼€å‘æœŸé—´ä½¿ç”¨nodemonï¼Œå› æ­¤æœ‰å¿…è¦åˆ›å»ºä¸€æ¡æ–°çš„è„šæœ¬å‘½ä»¤</p></div></figure><p id="1f3694d5-ea46-807b-b2b5-d19295840959" class="">
</p><p id="1f3694d5-ea46-80e0-a34f-fbe6152c1ff1" class=""><strong>ç”Ÿæˆçš„é¡¹ç›®ï¼šæŸ¥çœ‹é¡¹ç›®å†…å®¹</strong></p><p id="1f3694d5-ea46-80dc-8423-e98e14c443e8" class="">ã€ç›®å½•ç»“æ„ã€‘ï¼š</p><ul id="1f3694d5-ea46-80f2-88d9-f1a13d0ff047" class="bulleted-list"><li style="list-style-type:disc">å®‰è£…å¥½ä¾èµ–é¡¹çš„ç”Ÿæˆé¡¹ç›®å…·æœ‰å¦‚ä¸‹æ–‡ä»¶ç»“æ„ï¼ˆä¸å¸¦â€œ/â€å‰ç¼€çš„æ˜¯æ–‡ä»¶ï¼‰<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-80c7-abe5-d72831d18abd" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">/express-locallibrary-tutorial
    app.js
    /bin
        www
    package.json
    /node_modules
        [çº¦ 4,500 ä¸ªå­æ–‡ä»¶å¤¹å’Œæ–‡ä»¶]
    /public
        /images
        /javascripts
        /stylesheets
            style.css
    /routes
        index.js
        users.js
    /views
        error.pug
        index.pug
        layout.pug</code></pre><ul id="1f3694d5-ea46-805d-8751-c1bb6855badb" class="bulleted-list"><li style="list-style-type:circle">package.jsonæ–‡ä»¶å®šä¹‰ä¾èµ–é¡¹å’Œå…¶ä»–ä¿¡æ¯ï¼Œä»¥åŠä¸€ä¸ªè°ƒç”¨åº”ç”¨å…¥å£ï¼ˆ/bin/wwwï¼Œä¸€ä¸ªJSæ–‡ä»¶ï¼‰çš„å¯åŠ¨è„šæœ¬ï¼Œè„šæœ¬ä¸­è®¾ç½®äº†ä¸€äº›åº”ç”¨çš„é”™è¯¯å¤„ç†ï¼ŒåŠ è½½app.jsæ¥å®Œæˆå…¶ä½™å·¥ä½œã€‚/routesç›®å½•ä¸­ç”¨ä¸åŒæ¨¡å—ä¿å­˜åº”ç”¨è·¯ç”±ã€‚/viewsç›®å½•ä¿å­˜æ¨¡æ¿</li></ul></li></ul><p id="1f3694d5-ea46-80a1-87c6-d8ebe121b5d8" class="">ã€package.jsonã€‘ï¼š</p><ul id="1f3694d5-ea46-8077-b3a5-ec56f1d7dfe5" class="bulleted-list"><li style="list-style-type:disc">package.jsonæ–‡ä»¶ä¸­å®šä¹‰äº†åº”ç”¨ä¾èµ–å’Œå…¶ä»–ä¿¡æ¯<ul id="1f3694d5-ea46-80cb-8c9f-ef342c6b55bb" class="bulleted-list"><li style="list-style-type:circle">{<br/>&quot;name&quot;: &quot;express-locallibrary-tutorial&quot;,<br/>&quot;version&quot;: &quot;0.0.0&quot;,<br/>&quot;private&quot;: true,<br/><br/><strong><span style="border-bottom:0.05em solid">&quot;scripts&quot;: {<br/>&quot;start&quot;: &quot;node ./bin/www&quot;<br/>&quot;devstart&quot;: &quot;nodemon ./bin/www&quot;<br/>},<br/></span></strong><br/>&quot;dependencies&quot;: {<br/>&quot;cookie-parser&quot;: &quot;~1.4.3&quot;,<br/>&quot;debug&quot;: &quot;~2.6.9&quot;,<br/>&quot;express&quot;: &quot;~4.16.0&quot;,<br/>&quot;http-errors&quot;: &quot;~1.6.2&quot;,<br/>&quot;morgan&quot;: &quot;~1.9.0&quot;,<br/>&quot;pug&quot;: &quot;2.0.0-beta11&quot;<br/>},<br/>&quot;devDependencies&quot;: {<br/>&quot;nodemon&quot;: &quot;^1.18.9&quot;<br/>}<br/>}<br/></li></ul><ul id="1f3694d5-ea46-8029-84e4-e50d244a9a5f" class="bulleted-list"><li style="list-style-type:circle">è¿™äº›åŒ…æ‹¬expressåŒ…ï¼Œé€‰ç”¨çš„è§†å›¾å¼•æ“åŒ…ï¼ˆpugï¼‰è¿˜æœ‰ä»¥ä¸‹åŒ…<ul id="1f3694d5-ea46-806e-99e1-c90b98620dfb" class="bulleted-list"><li style="list-style-type:square">cookie-parserï¼šè§£æcookieå¤´æ¥å¡«å……req.cookiesï¼ˆæä¾›è®¿é—®cookieä¿¡æ¯çš„ä¾¿æ·æ–¹æ³•ï¼‰</li></ul><ul id="1f3694d5-ea46-8075-99cc-cc2218131b21" class="bulleted-list"><li style="list-style-type:square">debugï¼šå°å‹nodeè°ƒè¯•ç¨‹åºï¼Œä»¿ç…§nodeæ ¸å¿ƒçš„è°ƒè¯•æŠ€æœ¯å»ºç«‹</li></ul><ul id="1f3694d5-ea46-802a-9cf8-ebd3fcddcdc9" class="bulleted-list"><li style="list-style-type:square">http-errorsï¼šå¤„ç†é”™è¯¯ä¸­é—´ä»¶</li></ul><ul id="1f3694d5-ea46-806c-890f-d1d0bb8adcb9" class="bulleted-list"><li style="list-style-type:square">morganï¼šnodeä¸“ç”¨HTTPè¯·æ±‚è®°å½•å™¨ä¸­é—´ä»¶</li></ul></li></ul><ul id="1f3694d5-ea46-805c-ad76-c09310f9ebc3" class="bulleted-list"><li style="list-style-type:circle">â€œscriptsâ€éƒ¨åˆ†ï¼Œå®šä¹‰äº†ä¸€ä¸ªâ€œstartâ€è„šæœ¬ï¼Œå½“è¿è¡Œnpm startæ—¶ä¼šè°ƒç”¨å®ƒæ¥å¯åŠ¨æœåŠ¡å™¨ã€‚åœ¨è„šæœ¬å®šä¹‰ä¸­çœ‹åˆ°startå®é™…è¿è¡Œäº†node ./bin/wwwã€‚è¿˜æœ‰ä¸€ä¸ªdevstartè„šæœ¬ï¼Œé€šè¿‡è¿è¡Œnpm run dev startæ¥è¿è¡Œnodemon ./bin/www</li></ul></li></ul><p id="1f3694d5-ea46-8032-95a7-f898fb838cab" class="">ã€wwwæ–‡ä»¶ã€‘ï¼š</p><ul id="1f3694d5-ea46-80a1-9473-deb1ded2caea" class="bulleted-list"><li style="list-style-type:disc">/bin/wwwæ–‡ä»¶ä¸ºåº”ç”¨å…¥å£ï¼Œåšçš„äº‹æ˜¯requireï¼ˆï¼‰çœŸå®çš„åº”ç”¨å…¥å£ï¼ˆå³é¡¹ç›®æ ¹ç›®å½•ä¸­çš„app.jsï¼‰ï¼Œapp.jsä¼šè®¾ç½®å¹¶è¿”å›expressï¼ˆï¼‰åº”ç”¨å¯¹è±¡<ul id="1f3694d5-ea46-806c-a454-f29f1bd3582f" class="bulleted-list"><li style="list-style-type:circle">var app = requireï¼ˆâ€œ../app.jsâ€ï¼‰<figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f3694d5-ea46-80cf-91e1-e682144036ab"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f3694d5-ea46-8056-bc1b-d3f5013c6ab9" class="">requireï¼ˆï¼‰ä½¿ç”¨è¯¥å…¨å±€çš„nodeå‡½æ•°ï¼Œå¯ä»¥iå°†æ¨¡å—å¯¼å…¥å½“å‰æ–‡ä»¶ï¼Œè¿™é‡Œä½¿ç”¨ç›¸å¯¹è·¯å¾„æŒ‡å®šapp.jsæ¨¡å—ï¼Œå¯ä»¥çœç•¥æ–‡ä»¶æ‰©å±•å</p></div></figure></li></ul></li></ul><ul id="1f3694d5-ea46-804a-8e87-da539f7b7cd5" class="bulleted-list"><li style="list-style-type:disc">æ–‡ä»¶çš„åŒºåŸŸéƒ¨åˆ†ä¸ºappè®¾ç½®ç«¯å£ï¼ˆç¯å¢ƒå˜é‡ä¸­é¢„å®šä¹‰å€¼æˆ–é»˜è®¤å€¼3000ï¼‰ï¼Œå†åˆ›å»ºä¸€ä¸ªHTTPæœåŠ¡å™¨ï¼Œç„¶åå¼€å§‹ç›‘å¬è¯·æ±‚ï¼ŒæŠ¥å‘ŠæœåŠ¡å™¨é”™è¯¯å’Œè¿æ¥ä¿¡æ¯</li></ul><p id="1f3694d5-ea46-806f-ad77-c7cdf65f5997" class="">ã€app.jsã€‘ï¼š</p><ul id="1f3694d5-ea46-8014-9b7b-fc90c86a03f8" class="bulleted-list"><li style="list-style-type:disc">æ­¤æ–‡ä»¶åˆ›å»ºä¸€ä¸ªexpressåº”ç”¨å¯¹è±¡ï¼Œé€šè¿‡å„ç§è®¾ç½®é€‰é¡¹å’Œä¸­é—´ä»¶æ¥è®¾ç½®è¿™ä¸ªåº”ç”¨ï¼Œç„¶åä»è¯¥æ¨¡å—ä¸­å¯¼å‡º<ul id="1f3694d5-ea46-80fd-90d5-d43c6c49d737" class="bulleted-list"><li style="list-style-type:circle">var app = expressï¼ˆï¼‰</li></ul><ul id="1f3694d5-ea46-800a-abbe-cf8b709f9aaf" class="bulleted-list"><li style="list-style-type:circle">module.exports = app<ul id="1f3694d5-ea46-80a3-9089-f3714e20448d" class="bulleted-list"><li style="list-style-type:square">wwwå…¥å£æ–‡ä»¶ä¸­çš„requireï¼ˆï¼‰çš„appå°±æ˜¯è¿™é‡Œå¯¼å‡ºçš„</li></ul></li></ul></li></ul><ul id="1f3694d5-ea46-806e-aac9-ce9b71e51c24" class="bulleted-list"><li style="list-style-type:disc"><strong>äº†è§£ä¸€ä¸‹app.jsæ–‡ä»¶ã€‚</strong></li></ul><ul id="1f3694d5-ea46-80e0-a416-d5184ad8adf7" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆä½¿ç”¨requireï¼ˆï¼‰å¯¼å…¥äº†ä¸€äº›ä½¿ç”¨nodeåº“ï¼Œå…¶ä¸­åŒ…æ‹¬ä¹‹å‰ç”¨NPMä¸‹è½½çš„expressã€http-errorsã€morganã€cookie-parserï¼Œè¿˜æœ‰ä¸€ä¸ªpathåº“ï¼Œç”¨äºè§£ææ–‡ä»¶å’Œç›®å½•çš„æ ¸å¿ƒnodeåº“<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-80be-aa9b-d22d79023e92" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">var express = require(&quot;express&quot;);
var createError = require(&quot;http-errors&quot;);
var logger = require(&quot;morgan&quot;);
var cookieParser = require(&quot;cookie-parser&quot;);
var path = require(&quot;path&quot;);</code></pre></li></ul><ul id="1f3694d5-ea46-809e-a6fb-ed79c0ed95e7" class="bulleted-list"><li style="list-style-type:disc">ç„¶årequireï¼ˆï¼‰çš„æ˜¯ç”¨æˆ·è·¯ç”±ä¸­çš„æ¨¡å—ï¼Œè¿™äº›æ¨¡å—/æ–‡ä»¶ç”¨äºå¤„ç†ç‰¹å®šçš„è·¯ç”±ï¼ˆURLè·¯å¾„ï¼‰ã€‚å¯ä»¥é€šè¿‡æ·»åŠ æ–°æ–‡ä»¶æ¥æ‰©å±•æ¡†æ¶åº”ç”¨ï¼Œæ¯”å¦‚æ·»åŠ å›¾ä¹¦ç›¸å…³çš„è·¯ç”±æ¥åˆ—å‡ºæ‰€æœ‰ä¹¦ç›®<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-8039-ac82-f2538a1be806" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">var indexRouter = require(&quot;./routes/index&quot;);
var usersRouter = require(&quot;./routes/users&quot;);</code></pre></li></ul><ul id="1f3694d5-ea46-8027-bf76-f0f9611c0597" class="bulleted-list"><li style="list-style-type:disc">ä¹‹åç”¨å¯¼å…¥çš„expressæ¨¡å—æ¥åˆ›å»ºappå¯¹è±¡ï¼Œç„¶åä½¿ç”¨å®ƒæ¥è®¾ç½®è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰å¼•æ“ï¼Œè®¾ç½®å¼•æ“åˆ†ä¸ºä¸¤æ­¥<ul id="1f3694d5-ea46-80ab-a7d0-ee6d2ad92949" class="bulleted-list"><li style="list-style-type:circle">é¦–å…ˆæŒ‰è®¾ç½®viewsæ¥æŒ‡å®šæ¨¡æ¿çš„å­˜å‚¨æ–‡ä»¶å¤¹ï¼ˆæ­¤å¤„è®¾ä¸ºå­æ–‡ä»¶å¤¹/viewsï¼‰</li></ul><ul id="1f3694d5-ea46-80c8-b143-fadb9c3caaa5" class="bulleted-list"><li style="list-style-type:circle">ç„¶åè®¾ç½®view engineæ¥æŒ‡å®šæ¨¡æ¿åº“ï¼ˆæœ¬ä¾‹è®¾ä¸ºpugï¼‰<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-8043-b1c7-ea130dcc9e29" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">var app = express();

// view engine setup
// è§†å›¾å¼•æ“è®¾å®š
app.set(&quot;views&quot;, path.join(__dirname, &quot;views&quot;));
app.set(&quot;view engine&quot;, &quot;pug&quot;);</code></pre></li></ul></li></ul><ul id="1f3694d5-ea46-807d-aa16-e0a7dd4e569b" class="bulleted-list"><li style="list-style-type:disc">app.useï¼ˆï¼‰è°ƒç”¨å°†ä¸­é—´ä»¶åº“æ·»åŠ è¿›è¯·æ±‚å¤„ç†é“¾ï¼Œå¤„ç†ä¹‹å‰å¯¼å…¥çš„ç¬¬ä¸‰æ–¹åº“ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜æ˜¯ç”¨express.staticä¸­é—´ä»¶å°†é¡¹ç›® /publicç›®å½•ä¸‹æ‰€æœ‰é™æ€æ–‡ä»¶æ‰˜ç®¡è‡³æ ¹ç›®å½•ã€‚<p id="1f3694d5-ea46-8088-be5d-da10b733bcf2" class="">app.use(logger(&quot;dev&quot;));<br/>app.use(express.json());<br/>app.use(express.urlencoded({ extended: false }));<br/>app.use(cookieParser());<br/>app.use(express.static(path.join(__dirname, &quot;public&quot;)));<br/></p></li></ul><ul id="1f3694d5-ea46-80f6-bf41-ec3686e607fc" class="bulleted-list"><li style="list-style-type:disc">ä¸­é—´ä»¶éƒ½è®¾ç½®å®Œæ¯•ï¼Œç°åœ¨æŠŠä¹‹å‰å¯¼å…¥çš„è·¯ç”±å¤„ç†å™¨æ·»åŠ åˆ°è¯·æ±‚å¤„ç†é“¾ä¸­ï¼Œä»è€Œä¸ºç½‘ç«™çš„ä¸åŒéƒ¨åˆ†å®šä¹‰å…·ä½“çš„è·¯ç”±<p id="1f3694d5-ea46-807e-8172-d688833539ed" class="">app.use(&quot;/&quot;, indexRouter);<br/>app.use(&quot;/users&quot;, usersRouter);<br/></p></li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f3694d5-ea46-80f3-90b1-f0255cccfdf6"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f3694d5-ea46-8004-9fa7-d5cefb66b5df" class="">è¿™äº›è·¯å¾„ï¼ˆâ€˜/â€™å’Œâ€˜/userâ€™ï¼‰å°†ä½œä¸ºå¯¼å…¥è·¯ç”±çš„å‰ç¼€ï¼Œå¦‚æœå¯¼å…¥çš„æ¨¡å—useråœ¨/profileå®šä¹‰äº†è·¯ç”±ï¼Œåˆ™å¯ä»¥åœ¨/users/profileè®¿é—®è¯¥è·¯ç”±</p></div></figure><ul id="1f3694d5-ea46-806a-a7b5-c5bbf2ddd457" class="bulleted-list"><li style="list-style-type:disc">æœ€åä¸€ä¸ªä¸­é—´ä»¶ä¸ºé”™è¯¯å’ŒHTTP404å“åº”æ·»åŠ å¤„ç†æ–¹æ³•<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-8076-ba90-fb4089988ad8" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">// catch 404 and forward to error handler
// æ•è· 404 å¹¶æŠ›ç»™é”™è¯¯å¤„ç†å™¨
app.use(function (req, res, next) {
  next(createError(404));
});

// error handler
// é”™è¯¯å¤„ç†å™¨
app.use(function (err, req, res, next) {
  // set locals, only providing error in development
  // è®¾ç½® localsï¼Œåªåœ¨å¼€å‘ç¯å¢ƒæä¾›é”™è¯¯ä¿¡æ¯
  res.locals.message = err.message;
  res.locals.error = req.app.get(&quot;env&quot;) === &quot;development&quot; ? err : {};

  // render the error page
  // æ¸²æŸ“å‡ºé”™é¡µé¢
  res.status(err.status || 500);
  res.render(&quot;error&quot;);
});</code></pre></li></ul><p id="1f3694d5-ea46-8025-baaa-f8f0d1e9dae0" class="">Expressåº”ç”¨ç¨‹åºappç°åœ¨å·²å®Œæˆé…ç½®ï¼Œæœ€åä¸€æ­¥å°†å…¶æ·»åŠ åˆ°exportæ¨¡å—ï¼ˆä½¿å…¶å¯ä»¥é€šè¿‡ /bin/wwwå¯¼å…¥ï¼‰<div class="indented"><p id="1f3694d5-ea46-8026-9d5c-f456107980ef" class="">module.exports = app;</p></div></p><p id="1f3694d5-ea46-8057-b147-fd3f0f254051" class="">ã€è·¯ç”±ã€‘ï¼š</p><ul id="1f3694d5-ea46-8049-aaec-da695a9dce97" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±æ–‡æ¡£ /routes/users.jså¦‚ä¸‹æ‰€ç¤ºï¼ˆè·¯ç”±æ–‡ä»¶éƒ½æ˜¯ç”¨ç±»ä¼¼ç»“æ„ï¼Œæ‰€ä»¥index.jsè·³è¿‡ï¼‰ã€‚<ul id="1f3694d5-ea46-80d1-95ab-d0059cedcafb" class="bulleted-list"><li style="list-style-type:circle">é¦–å…ˆåŠ è½½expressæ¨¡å—ï¼Œå¹¶è·å–express.Routerå¯¹è±¡ï¼ˆå‘½åä¸ºrouterï¼‰ã€‚ç„¶åä¸ºrouteræŒ‡å®šè·¯ç”±ï¼Œæœ€åå¯¼å‡ºrouterï¼ˆå°±å¯ä»¥å¯¼å…¥app.jsï¼‰<p id="1f3694d5-ea46-80c9-ab91-cd4c890adcb5" class="">var express = require(&quot;express&quot;);<br/>var router = express.Router();<br/></p><p id="1f3694d5-ea46-8018-8358-fb0b86eb64cc" class="">/* GET users listing. */<br/>router.get(&quot;/&quot;, function (req, res, next) {<br/>res.send(&quot;respond with a resource&quot;);<br/>});<br/></p><p id="1f3694d5-ea46-802d-920d-e7200525b0f6" class="">module.exports = router;<div class="indented"><ul id="1f3694d5-ea46-8052-8d32-f8ea8428f391" class="bulleted-list"><li style="list-style-type:disc">è¯¥è·¯ç”±å®šä¹‰äº†ä¸€ä¸ªå›è°ƒï¼Œåœ¨æ£€æµ‹æ­£ç¡®æè¿°çš„HTTP GETè¯·æ±‚æ—¶è°ƒç”¨è¯¥å›è°ƒï¼Œæ­£ç¡®æè¿°å³å¯¼å…¥è¯¥æ¨¡å—æ—¶æŒ‡å®šçš„è·¯ç”±â€˜/usersâ€™åŠ è½½æ¨¡å—â€˜/â€™ä¸­å®šä¹‰çš„ä»»ä½•å†…å®¹ã€‚å°±æ˜¯åœ¨æ”¶åˆ°/users/URLè¯·æ±‚æ—¶ä½¿ç”¨è¯¥è·¯ç”±</li></ul><ul id="1f3694d5-ea46-805f-916c-ea26968cab18" class="bulleted-list"><li style="list-style-type:disc">å›è°ƒå‡½æ•°ä¸­æœ‰ç¬¬ä¸‰ä¸ªå‚æ•°nextï¼Œå› æ­¤ä»–ä¸ºä¸­é—´ä»¶å‡½æ•°ï¼Œè€Œä¸æ˜¯ç®€å•çš„è·¯ç”±å›è°ƒï¼Œåœ¨â€˜/â€™è·¯å¾„ä¸­æ·»åŠ å¤šä¸ªè·¯ç”±å¤„ç†å™¨æ—¶æ‰ä¼šæ¶‰åŠåˆ°next</li></ul></div></p></li></ul></li></ul><p id="1f3694d5-ea46-8001-9604-ce396d2bcacd" class="">ã€è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰ã€‘ï¼š</p><ul id="1f3694d5-ea46-8056-bb5c-d14a38e721e3" class="bulleted-list"><li style="list-style-type:disc">è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰ä¿å­˜åœ¨/viewsç›®å½•ä¸­ï¼ˆapp.jsæŒ‡å®šï¼‰ï¼Œä½¿ç”¨.pugä½œä¸ºæ‹“å±•å</li></ul><ul id="1f3694d5-ea46-80d5-852e-dffd373400b8" class="bulleted-list"><li style="list-style-type:disc">Response.renderï¼ˆï¼‰Fangfaç”¨æŸå¯¹è±¡çš„æŸä¸ªå˜é‡å€¼æ¥æ¸²æŸ“ç‰¹å®šæ¨¡æ¿ï¼Œç„¶åå°†å…¶ä½œä¸ºå“åº”å‘é€<ul id="1f3694d5-ea46-8040-a3f8-fd4f15442397" class="bulleted-list"><li style="list-style-type:circle">åœ¨/routes/index.jså¯ä»¥çœ‹åˆ°ï¼Œè¯¥è·¯ç”±ä½¿ç”¨indexæ¨¡æ¿å’Œä¸€ä¸ªæ¨¡æ¿å˜é‡titleæ¥æ¸²æŸ“å“åº”<ul id="1f3694d5-ea46-801d-ab5b-f702ee0e57f3" class="bulleted-list"><li style="list-style-type:square">/* GET home page. */<br/>router.get(&quot;/&quot;, function (req, res) {<br/>res.render(&quot;index&quot;, { title: &quot;Express&quot; });<br/>});<br/></li></ul></li></ul><ul id="1f3694d5-ea46-8037-a320-ced34b6b3019" class="bulleted-list"><li style="list-style-type:circle">ä»¥ä¸‹æ˜¯ä¸Šæ–‡ä»£ç ä¸­æ¶‰åŠåˆ°çš„æ¨¡æ¿index.pugã€‚titleå˜é‡å°†ä»¥expressä½œä¸ºå€¼æ’å…¥æ¨¡æ¿æŒ‡å®šä½ç½®<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f3694d5-ea46-807b-9135-d7253fd9423d" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">extends layout

block content
  h1= title
  p Welcome to #{title}</code></pre></li></ul></li></ul><p id="1f4694d5-ea46-8010-87e2-cd5edd713dcb" class="">
</p><p id="1f4694d5-ea46-805a-8505-d557fb34e1a0" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬äºŒæ­¥ä½¿ç”¨æ•°æ®åº“ï¼ˆMongooseï¼‰ã€‘ï¼š</span></strong></p><ul id="1f4694d5-ea46-8027-bd7b-daea8fb6c5f8" class="bulleted-list"><li style="list-style-type:disc">ä»‹ç»æ•°æ®åº“ä»¥åŠNode/Expressåº”ç”¨çš„æ•°æ®åº“ç»§æ‰¿ï¼Œæ¼”ç¤ºMongooseä¸ºLocalLibraryæä¾›æ•°æ®åº“è®¿é—®çš„æ–¹å¼ï¼Œ</li></ul><ul id="1f4694d5-ea46-8048-8b9c-f9fc30c01685" class="bulleted-list"><li style="list-style-type:disc">è®²è§£å¯¹é¡¹ç›®æ˜¯ï¼ˆSchemaï¼‰å’Œæ¨¡å‹ï¼ˆModelï¼‰çš„å£°æ˜æ–¹å¼ã€ä¸»è¦åŸŸçš„ç±»å‹ã€åŸºç¡€éªŒè¯æœºåˆ¶ã€‚</li></ul><ul id="1f4694d5-ea46-804b-b1ea-c3395c3a9e7d" class="bulleted-list"><li style="list-style-type:disc">è®¿é—®æ¨¡å‹æ•°æ®çš„æ–¹æ³•</li></ul><p id="1f4694d5-ea46-80b5-bc33-e8a17b2c0a0b" class="">
</p><p id="1f4694d5-ea46-80cc-8042-c554e96f6333" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f4694d5-ea46-80f0-9c83-ea880b8398aa" class="bulleted-list"><li style="list-style-type:disc">å‘˜å·¥ä½¿ç”¨LocalLibraryç½‘ç«™æ¥ä¿å­˜è—ä¹¦å’Œå€Ÿé˜…è€…çš„ä¿¡æ¯ï¼Œç”¨æˆ·ä¼šæµè§ˆå’ŒæŸ¥æ‰¾æ‰€éœ€è—ä¹¦ï¼Œæ‰¾åˆ°åé¢„çº¦æˆ–å€Ÿé˜…ã€‚</li></ul><ul id="1f4694d5-ea46-8047-aedd-c674bd72997d" class="bulleted-list"><li style="list-style-type:disc">Expressåº”ç”¨æ”¯æŒå¤šæ¬¾æ•°æ®åº“ï¼Œæ‰§è¡Œæ–°å»ºï¼ˆCreateï¼‰ã€è¯»å–ï¼ˆReadï¼‰ã€æ›´æ–°ï¼ˆUpdateï¼‰ã€åˆ é™¤ï¼ˆDeleteï¼‰æ“ä½œï¼ˆCRUDï¼‰æ“ä½œæœ‰å¾ˆå¤šæ–¹å¼</li></ul><p id="1f4694d5-ea46-8067-b62a-e88df3f41345" class="">
</p><p id="1f4694d5-ea46-8049-9d90-e88908dc23e1" class=""><strong>ä½¿ç”¨ä»€ä¹ˆæ•°æ®åº“ï¼š</strong></p><p id="1f4694d5-ea46-809a-a0a5-c51697edee14" class="">Expressåº”ç”¨å¯ä»¥ä½¿ç”¨Nodeæ”¯æŒçš„æ‰€æœ‰æ•°æ®åº“ï¼ŒåŒ…æ‹¬PostgreSQLã€MySQLã€Redisã€SQLiteå’ŒMongoDBã€‚</p><ul id="1f4694d5-ea46-8044-acd1-d29e8132977b" class="bulleted-list"><li style="list-style-type:disc">é€‰å–æ•°æ®çœ‹åº”è€ƒè™‘ä»¥ä¸‹å› ç´ <ul id="1f4694d5-ea46-8059-a1ad-e5b4d1e798c1" class="bulleted-list"><li style="list-style-type:circle">è¿›å…¥ç”Ÿäº§çŠ¶æ€ç”¨æ—¶/å­¦ä¹ æ›²çº¿ã€æ€§èƒ½ã€å¤åˆ¶/å¤‡ä»½çš„æ˜“ç”¨åº¦ã€æˆæœ¬ã€ç¤¾åŒºæ”¯æŒç­‰ç­‰ã€‚</li></ul></li></ul><p id="1f4694d5-ea46-80b5-ab4f-c83f8a8eee55" class="">
</p><p id="1f4694d5-ea46-80b7-b57f-de464a9641ee" class=""><strong>ä¸æ•°æ®åº“äº¤äº’çš„æœ€ä½³æ–¹å¼æ˜¯ä»€ä¹ˆï¼š</strong></p><ul id="1f4694d5-ea46-80f4-8eed-f13f7fd2f0dd" class="bulleted-list"><li style="list-style-type:disc">ä¸æ•°æ®åº“äº¤äº’æœ‰ä¸¤ç§æ–¹æ³•ï¼š<ul id="1f4694d5-ea46-8075-bd5c-e95876933558" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨æ•°æ®åº“çš„åŸç”ŸæŸ¥è¯¢è¯­è¨€ï¼ˆSQLï¼‰</li></ul><ul id="1f4694d5-ea46-80ab-8155-d6062114dc46" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨å¯¹è±¡æ•°æ®æ¨¡å‹ï¼ˆObject Data Modelï¼‰æˆ–å¯¹è±¡å…³ç³»æ¨¡å‹ï¼ˆObject Relational Modelï¼‰ã€‚ODM/ORMèƒ½å°†ç½‘ç«™çš„æ•°æ®è¡¨ç¤ºä¸ºJSå¯¹è±¡ï¼Œç„¶åå°†ä»–ä»¬æ˜ å°„åˆ°åº•å±‚æ•°æ®åº“ã€‚ä¸€äº›ORMåªé€‚ç”¨äºæŸäº›ç‰¹å®šæ•°æ®åº“ï¼Œè¿˜æœ‰ä¸€äº›æ˜¯æ™®éé€‚ç”¨çš„</li></ul></li></ul><ul id="1f4694d5-ea46-8018-8d97-d3bb848b814a" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨SQLæˆ–å…¶ä»–æ”¶åˆ°æ”¯æŒçš„æŸ¥è¯¢è¯­è¨€èƒ½å®ç°æœ€ä½³æ€§èƒ½ã€‚ODMé€šå¸¸æ…¢ä¸€äº›ï¼Œå› ä¸ºåœ¨å¯¹è±¡å’Œæ•°æ®åº“æ ¼å¼ä¹‹é—´å­˜åœ¨ä¸€å±‚ç”¨äºæ˜ å°„çš„ç¿»è¯‘ä»£ç ï¼Œä½¿ç”¨å®ƒä¸ä¸€å®šä¼šé€‰ç”¨æœ€é«˜æ€§èƒ½çš„æ•°æ®åº“æŸ¥è¯¢ï¼ˆå°¤å…¶æ˜¯æ™®éé€‚ç”¨çš„ODMï¼Œä»–å¿…é¡»åœ¨å„ç±»æ•°æ®åº“åŠŸèƒ½æ–¹é¢åšå‡ºæ›´å¤§çš„æŠ˜æŸï¼‰</li></ul><ul id="1f4694d5-ea46-80cd-9307-daa25f054bb8" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨ORMçš„å¥½å¤„æ˜¯ï¼Œç¨‹åºå‘˜å¯ä»¥ç»§ç»­ç”¨JSå¯¹è±¡çš„æ€ç»´è€Œä¸ç”¨è½¬å‘æ•°æ®åº“è¯­ä¹‰çš„æ€ç»´ã€‚åœ¨ï¼ˆåŒä¸€ä¸ªæˆ–ä¸åŒç½‘ç«™ï¼‰ä½¿ç”¨ä¸åŒæ•°æ®åº“æ—¶æ›´ä¸ºæ˜æ˜¾ã€‚ä½¿ç”¨ORMå¯ä»¥æ›´æ–¹ä¾¿çš„å¯¹æ•°æ®è¿›è¡ŒéªŒè¯å’Œæ£€æŸ¥</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-8089-a329-e4ebab6e4c3e"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-80e4-a091-e5ca0bfaa4d4" class="">ä½¿ç”¨ODM/ORMé€šå¸¸å¯ä»¥é™ä½å¼€å‘å’Œç»´æŠ¤æˆæœ¬ã€‚é™¤ééå¸¸ç†Ÿæ‚‰æœ¬åœ°æŸ¥è¯¢è¯­è¨€ï¼Œæˆ–è€…é¡¹ç›®å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜ï¼Œå¦åˆ™ä½¿ç”¨ODM</p></div></figure><p id="1f4694d5-ea46-806b-88e7-e98a9e2486fc" class="">
</p><p id="1f4694d5-ea46-801e-b530-fbe1d61b3b52" class=""><strong>é€‰æ‹©å“ªç§ORM/ODMï¼š</strong></p><ul id="1f4694d5-ea46-80b1-bca4-f128800ffadc" class="bulleted-list"><li style="list-style-type:disc">NPMç«™ç‚¹ä¸Šæœ‰è®¸å¤šORM/ODMè§£å†³æ–¹æ¡ˆã€‚ä¸‹é¢æ˜¯æµè¡Œçš„è§£å†³æ–¹æ¡ˆ<ul id="1f4694d5-ea46-807a-9ce7-ce5d62f43cb7" class="bulleted-list"><li style="list-style-type:circle"><a href="https://www.npmjs.com/package/mongoose">Mongoose</a>ï¼šä¸€æ¬¾ä¸ºå¼‚æ­¥å·¥ä½œç¯å¢ƒè®¾è®¡çš„Â <a href="https://www.mongodb.org/">MongoDB</a>Â å¯¹è±¡å»ºæ¨¡å·¥å…·ã€‚</li></ul><ul id="1f4694d5-ea46-8024-885b-dc7624c02220" class="bulleted-list"><li style="list-style-type:circle"><a href="https://www.npmjs.com/package/waterline">Waterline</a>ï¼šä»åŸºäº Express çš„Â <a href="http://sailsjs.com/">Sails</a>Â æ¡†æ¶ä¸­æå–çš„ ORMã€‚å®ƒæä¾›äº†ä¸€å¥—ç»Ÿä¸€çš„ API æ¥è®¿é—®ä¼—å¤šä¸åŒçš„æ•°æ®åº“ï¼Œå…¶ä¸­åŒ…æ‹¬ Redisï¼ŒmySQLï¼ŒLDAPï¼ŒMongoDB å’Œ Postgresã€‚</li></ul><ul id="1f4694d5-ea46-80c2-b731-c092d1da87e9" class="bulleted-list"><li style="list-style-type:circle"><a href="https://www.npmjs.com/package/bookshelf">Bookshelf</a>ï¼šåŒæ—¶æä¾›åŸºäº promise å’Œä¼ ç»Ÿå›è°ƒä¸¤å¥—æ¥å£ï¼Œæ”¯æŒäº‹åŠ¡å¤„ç†ã€æ¸´æ±‚å¼/åµŒå¥—æ¸´æ±‚å¼å…³ç³»åŠ è½½ã€å¤šæ€å…³è”ï¼Œä»¥åŠå¯¹ä¸€å¯¹ä¸€ï¼Œä¸€å¯¹å¤šå’Œå¤šå¯¹å¤šå…³ç³»ã€‚æ”¯æŒ PostgreSQLã€MySQL å’Œ SQLite3ã€‚</li></ul><ul id="1f4694d5-ea46-80b6-8175-c9065c672149" class="bulleted-list"><li style="list-style-type:circle"><a href="https://www.npmjs.com/package/objection">Objection</a>ï¼šä»¥å°½å¯èƒ½ç®€å•çš„æ–¹å¼ä½¿ç”¨ SQL å’Œåº•å±‚æ•°æ®åº“å¼•æ“çš„å…¨éƒ¨åŠŸèƒ½ï¼ˆæ”¯æŒ SQLite3ã€Postgres å’Œ MySQLï¼‰ã€‚</li></ul><ul id="1f4694d5-ea46-80e4-882a-c5f6f4ce4b56" class="bulleted-list"><li style="list-style-type:circle"><a href="https://www.npmjs.com/package/sequelize">Sequelize</a>ï¼šåŸºäº promise çš„ Node.js ç‰ˆ ORMï¼Œå®ƒæ”¯æŒ PostgreSQLã€MySQLã€MariaDBã€SQLite å’Œ MSSQLï¼Œå¹¶æä¾›å¯é çš„äº‹åŠ¡æ”¯æŒã€å…³ç³»ã€å¤æœ¬è¯»å–ç­‰åŠŸèƒ½ã€‚</li></ul><ul id="1f4694d5-ea46-80aa-b553-e018f79c3524" class="bulleted-list"><li style="list-style-type:circle"><a href="https://node-orm.readthedocs.io/en/latest/">Node ORM2</a>ï¼šä¸€æ¬¾ Node.js å¯¹è±¡å…³ç³»ç®¡ç†ç³»ç»Ÿã€‚æ”¯æŒ MySQLã€SQLite ä»¥åŠ Progressï¼Œå¯ä»¥å¸®åŠ©ä½ ç”¨é¢å‘å¯¹è±¡çš„æ–¹æ³•æ“ä½œæ•°æ®åº“ã€‚</li></ul><ul id="1f4694d5-ea46-80a9-a9c2-c85b45fa872b" class="bulleted-list"><li style="list-style-type:circle"><a href="http://1602.github.io/jugglingdb/">JugglingDB</a>ï¼šä¸€æ¬¾ Node.js ç‰ˆè·¨æ•°æ®åº“çš„ ORMã€‚å®ƒä¸ºå¤šæ•°æµè¡Œæ•°æ®åº“æä¾›äº†ç»Ÿä¸€æ¥å£ï¼Œå½“å‰æ”¯æŒ MySQLã€SQLite3ã€Postgresã€MongoDBã€Redis å’Œ js-memory-storageï¼ˆè‡ªå†™å¼•æ“ï¼Œä»…ä¾›æµ‹è¯•ç”¨ï¼‰ã€‚</li></ul></li></ul><ul id="1f4694d5-ea46-802a-958d-c536d6688edd" class="bulleted-list"><li style="list-style-type:disc">é€‰æ‹©è§£å†³æ–¹æ¡ˆè€ƒè™‘åŠŸèƒ½å’Œç¤¾åŒºæ´»è·ƒåº¦ã€‚</li></ul><p id="1f4694d5-ea46-80db-b236-ca8e7ede70e2" class="">
</p><p id="1f4694d5-ea46-80d0-891a-c4ab97589936" class=""><strong>åœ¨LocalLibraryä¸­ä½¿ç”¨Mongooseå’ŒMongoDBï¼š</strong></p><p id="1f4694d5-ea46-80af-a7a1-e14a54a08e5f" class="">
</p><p id="1f4694d5-ea46-800b-acd7-d4744d48bc03" class=""><strong>è®¾è®¡LocalLibraryæ¨¡å‹ï¼š</strong></p><ul id="1f4694d5-ea46-80e2-a028-f07f3f41f915" class="bulleted-list"><li style="list-style-type:disc">ç¼–å†™æ¨¡å‹ä¹‹å‰ï¼Œè¦æ€è€ƒï¼šæœ¬ç½‘ç«™éœ€è¦å­˜å‚¨ä»€ä¹ˆæ•°æ®ï¼Ÿä¸åŒå¯¹è±¡ä¹‹é—´çš„å…³ç³»æ˜¯æ€æ ·çš„ï¼Ÿ<ul id="1f4694d5-ea46-806d-beba-ead96c296ca9" class="bulleted-list"><li style="list-style-type:circle">å›¾ä¹¦é¦†éœ€è¦å­˜å‚¨è—ä¹¦ä¿¡æ¯ï¼ˆä¹¦ç›®ã€æ‘˜è¦ã€ä½œè€…ã€ç§ç±»ã€ISBNï¼‰ï¼Œè—ä¹¦å‰¯æœ¬ä¿¡æ¯ï¼ˆå…¨ç«™å”¯ä¸€IDã€å€Ÿå‡ºçŠ¶æ€ç­‰ï¼‰ã€‚è¿˜å¯èƒ½éœ€è¦å­˜å‚¨ä½œè€…å§“åä¹‹å¤–çš„æ›´å¤šä¿¡æ¯ï¼Œä»¥åŠå¤šä¸ªä½œè€…çš„ä¿¡æ¯ã€‚è¿˜å¸Œæœ›æ•°æ®åº“å†…å®¹èƒ½å¤Ÿæ ¹æ®ä¹¦ç›®ã€ä½œè€…ç½²åã€ç§ç±»ã€ç¼–ç›®è¿›è¡Œæ’åº</li></ul><ul id="1f4694d5-ea46-8070-ae22-cc4d6441dc31" class="bulleted-list"><li style="list-style-type:circle">ä¸ºæ¯ä¸ªå¯¹è±¡ï¼ˆä¸€ç»„ç›¸å…³ä¿¡æ¯ï¼‰è®¾è®¡ç‹¬ç«‹çš„æ¨¡å‹ã€‚æœ¬å®ä¾‹çš„å…³é”®å¯¹è±¡ä¸ºä¹¦ç±ã€ä¹¦ç±å‰¯æœ¬å’Œä½œè€…</li></ul><ul id="1f4694d5-ea46-8073-bce7-d61879c192fa" class="bulleted-list"><li style="list-style-type:circle">å¸Œæœ›ä½¿ç”¨æ¨¡å‹è€Œä¸æ˜¯ç«™ç‚¹ä»£ç æ¥è¡¨ç¤ºé€‰é¡¹è¡¨ï¼ˆæ¯”å¦‚ä¸‹æ‹‰åˆ—è¡¨ï¼‰ï¼Œåœ¨é€‰é¡¹æ— æ³•é¢„çŸ¥æˆ–å¯èƒ½æ›´æ”¹æ—¶æ›´æ¨èæ¨¡å‹æ–¹å¼ã€‚è—ä¹¦ç±»å‹ï¼ˆç§‘å¹»ã€è¯—æ­Œç­‰ï¼‰è¿™ç§æƒ…å†µ</li></ul><ul id="1f4694d5-ea46-808e-a6ee-e69f69206483" class="bulleted-list"><li style="list-style-type:circle">ç¡®å®šæ¨¡å‹å’Œå­—æ®µåè¿˜è¦è€ƒè™‘å®ƒä»¬ä¹‹é—´çš„å…³ç³»ï¼Œä»¥ä¸‹ UML å›¾æ˜¾ç¤ºäº†æœ¬ç¤ºä¾‹å³å°†å®šä¹‰çš„æ¨¡å‹ï¼ˆæ¡†å›¾ï¼‰ã€‚å¦‚ä¸Šæ‰€è¿°ï¼Œæˆ‘ä»¬ä¸ºè—ä¹¦ï¼ˆä¸€èˆ¬ç»†èŠ‚ï¼‰ã€è—ä¹¦å‰¯æœ¬ï¼ˆç³»ç»Ÿï¼‰å’Œä½œè€…åˆ›å»ºäº†æ¨¡å‹ã€‚è¿˜æœ‰ä¸€ä¸ªå¯ä»¥åŠ¨æ€é€‰æ‹©çš„ä¹¦ç±ç§ç±»æ¨¡å‹ã€‚å¯¹äºÂ <code>BookInstance:status</code>ï¼Œæˆ‘ä»¬ä¸ä¼šä¸ºå®ƒå»ºç«‹æ¨¡å‹ï¼Œè€Œæ˜¯å°†å¯èƒ½çš„å€¼ç›´æ¥ç¼–å…¥ç«™ç‚¹ä»£ç ä¸­ï¼Œå› ä¸ºæˆ‘ä»¬ä¸å¸Œæœ›è¿™äº›å€¼å‘ç”Ÿå˜åŒ–ã€‚ä¸‹å›¾æ¯ä¸ªæ¡†éƒ½åŒ…æ‹¬æ¨¡å‹åã€å­—æ®µåå’Œç±»å‹ï¼Œè¿˜æœ‰æ–¹æ³•åŠå…¶è¿”å›ç±»å‹ã€‚</li></ul><ul id="1f4694d5-ea46-806c-9fc0-d0e203669c8c" class="bulleted-list"><li style="list-style-type:circle">ä¸‹å›¾è¿˜å±•ç¤ºäº†æ¨¡å‹ä¹‹é—´çš„å…³ç³»ä»¥åŠé‡å¤åº¦ï¼ˆMultiplicityï¼‰ã€‚é‡å¤åº¦å°±æ˜¯å›¾ä¸­ä¸¤æ¡†é—´è¿çº¿ä¸¤ç«¯çš„æ•°å­—ï¼Œè¡¨ç¤ºä¸¤ä¸ªæ¨¡å‹ä¹‹é—´å­˜åœ¨çš„å…³ç³»çš„æ•°é‡ï¼ˆæœ€å¤§å€¼å’Œæœ€å°å€¼ï¼‰ã€‚ä¾‹å¦‚ï¼Œ<code>Book</code>Â æ¡†å’ŒÂ <code>Genre</code>Â æ¡†ä¹‹é—´æœ‰è¿çº¿è¯´æ˜äºŒè€…ä¹‹é—´å­˜åœ¨å…³ç³»ï¼Œ<code>Book</code>Â æ¨¡å‹ç«¯çš„æ•°å­—ï¼ˆ0..*ï¼‰è¡¨ç¤ºä¸€ä¸ªç§ç±»å¿…åŒ…æ‹¬é›¶ç§æˆ–å¤šç§è—ä¹¦ï¼ˆå¤šå°‘éƒ½å¯ä»¥ï¼‰ï¼Œè€ŒÂ <code>Genre</code>Â ç«¯çš„æ•°å­—è¡¨ç¤ºä¸€ç§è—ä¹¦å¯ä»¥æœ‰é›¶ä¸ªæˆ–å¤šä¸ªç§ç±»</li></ul><figure id="1f4694d5-ea46-80a7-8388-ceeed484a265" class="image"><a href="image%202.png"><img style="width:531.1625366210938px" src="image%202.png"/></a></figure></li></ul><p id="1f4694d5-ea46-8053-a0d4-e927044df5ab" class="">
</p><p id="1f4694d5-ea46-80ee-afe5-f025799915e6" class=""><strong>Mongooseå…¥é—¨ï¼š</strong></p><ul id="1f4694d5-ea46-8067-8f9f-e83c913fddc3" class="bulleted-list"><li style="list-style-type:disc">ç®€è¦ä»‹ç»å¦‚ä½•å°†Mongooseè¿æ¥åˆ°MongoDBæ•°æ®åº“ï¼Œå¦‚ä½•å®šä¹‰æ¨¡å¼å’Œæ¨¡å‹ï¼Œä»¥åŠå¦‚ä½•è¿›è¡ŒåŸºæœ¬æŸ¥è¯¢</li></ul><p id="1f4694d5-ea46-80dd-9d50-d44724c9f5bd" class="">
</p><p id="1f4694d5-ea46-80e5-b578-cf9b426225e8" class="">ã€å®‰è£…Mongooseå’ŒMongoDBã€‘ï¼š</p><ul id="1f4694d5-ea46-807c-bdfc-e4cf8d12e4cb" class="bulleted-list"><li style="list-style-type:disc">Mongooseåƒå…¶ä»–ä¾èµ–ä¸€æ ·ï¼Œä½¿ç”¨NPMå®‰è£…åˆ°é¡¹ç›®ï¼ˆpackage.jsonï¼‰ä¸­ï¼Œåœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤<ul id="1f4694d5-ea46-80c9-af05-e0b5b00a4ae3" class="bulleted-list"><li style="list-style-type:circle">npm install mongoose</li></ul></li></ul><ul id="1f4694d5-ea46-80e8-af79-dd0a75160402" class="bulleted-list"><li style="list-style-type:disc">å®‰è£…Mongooseä¼šæ·»åŠ æ‰€æœ‰ä¾èµ–é¡¹ï¼ŒåŒ…æ‹¬Må“¦èƒ½å¤ŸDBæ•°æ®åº“é©±åŠ¨ç¨‹åºï¼Œä½†ä¸ä¼šå®‰è£…MongoDBæœ¬èº«ã€‚å®‰è£…MongoDBæœåŠ¡å™¨ï¼Œå¯ä»¥å°†ä¸åŒç³»ç»Ÿçš„å®‰è£…ç¨‹åºåœ¨æœ¬åœ°å®‰è£…ã€‚ä¹Ÿå¯ä»¥åœ¨äº‘ç«¯MongoDBå®ä¾‹</li></ul><p id="1f4694d5-ea46-8043-8a84-db5cf90b69c5" class="">
</p><p id="1f4694d5-ea46-8060-81f5-c566a751c83a" class="">ã€è¿æ¥åˆ°MongoDBã€‘ï¼š</p><ul id="1f4694d5-ea46-80f5-b073-dd0899fea9a0" class="bulleted-list"><li style="list-style-type:disc">Mongooseéœ€è¦è¿æ¥åˆ°MongoDBæ•°æ®åº“ã€‚å¯ä»¥requireï¼ˆï¼‰å¼•å…¥ï¼Œå¹¶é€šè¿‡mongoose.connectï¼ˆï¼‰è¿æ¥åˆ°æœ¬åœ°æ•°æ®åº“ï¼Œå¦‚ä¸‹<ul id="1f4694d5-ea46-8041-934a-dbc4575efa8a" class="bulleted-list"><li style="list-style-type:circle">// å¯¼å…¥ mongoose æ¨¡å—<br/>const mongoose = require(&quot;mongoose&quot;);<br/><p id="1f4694d5-ea46-80fa-b0bb-d5a584bb8db2" class="">// è®¾ç½®é»˜è®¤ mongoose è¿æ¥<br/>const mongoDB = &quot;mongodb://127.0.0.1/my_database&quot;;<br/>mongoose.connect(mongoDB);<br/>// è®© mongoose ä½¿ç”¨å…¨å±€ Promise åº“<br/>mongoose.Promise = global.Promise;<br/>// å–å¾—é»˜è®¤è¿æ¥<br/>const db = mongoose.connection;<br/></p><p id="1f4694d5-ea46-80e5-b9c5-ead8de79ec9d" class="">// å°†è¿æ¥ä¸é”™è¯¯äº‹ä»¶ç»‘å®šï¼ˆä»¥è·å¾—è¿æ¥é”™è¯¯çš„æç¤ºï¼‰<br/>db.on(&quot;error&quot;, console.error.bind(console, &quot;MongoDB è¿æ¥é”™è¯¯ï¼š&quot;));<br/></p></li></ul><ul id="1f4694d5-ea46-80b8-bd92-fbe9122d601d" class="bulleted-list"><li style="list-style-type:circle">å¯ä»¥ä½¿ç”¨mongoose.connectionå–å¾—é»˜è®¤çš„Connectionå¯¹è±¡ï¼Œä¸€æ—¦é“¾æ¥ï¼ŒConnectionå®ä¾‹å°†è§¦å‘æ‰“å¼€äº‹ä»¶<figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-8056-9a37-d457389ab39f"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-802e-ba2b-db23fda74437" class="">å¯ä»¥ä½¿ç”¨mongoose.createConnectionï¼ˆï¼‰åˆ›å»ºå…¶ä»–é“¾æ¥ã€‚è¯¥å‡½æ•°ä¸connectï¼ˆï¼‰çš„å‚æ•°ï¼ˆæ•°æ®åº“URLã€åŒ…æ‹¬ä¸»æœºåœ°å€ã€æ•°æ®åº“åã€ç«¯å£ã€é€‰é¡¹ç­‰ï¼‰ä¸€è‡´ï¼Œå¹¶è¿”å›ä¸€ä¸ªConnectionå¯¹è±¡</p></div></figure></li></ul></li></ul><p id="1f4694d5-ea46-8097-83cc-c35373797669" class="">
</p><p id="1f4694d5-ea46-8026-9efb-c99c2129e46a" class="">ã€å®šä¹‰å’Œæ·»åŠ æ¨¡å‹ã€‘ï¼š</p><ul id="1f4694d5-ea46-808b-b95b-d3a462c8cbbd" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å‹ä½¿ç”¨Schemaæ¥å£è¿›è¡Œå®šä¹‰ã€‚Schemaå¯ä»¥å®šä¹‰æ¯ä¸ªæ–‡æ¡£ä¸­å­˜å‚¨çš„å­—æ®µï¼Œä»¥åŠå­—æ®µçš„éªŒè¯è¦æ±‚å’Œé»˜è®¤å€¼ã€‚è¿˜å¯ä»¥é€šè¿‡å®šä¹‰é™æ€å’Œå®ä¾‹è¾…åŠ©æ–¹å¼æ¥æ›´è½»æ¾åœ°å¤„ç†å„ç§ç±»å‹çš„æ•°æ®ï¼Œè¿˜å¯ä»¥åƒä½¿ç”¨æ™®é€šå­—æ®µä¸€æ ·ä½¿ç”¨æ•°æ®åº“ä¸­å¹¶ä¸å­˜åœ¨çš„è™šæ‹Ÿå±æ€§</li></ul><ul id="1f4694d5-ea46-8086-9708-c635b01d0f48" class="bulleted-list"><li style="list-style-type:disc">mongoose.modelï¼ˆï¼‰æ–¹æ³•å°†æ¨¡å¼ç¼–è¯‘ä¸ºæ¨¡å‹ï¼Œæ¨¡å‹å¯ä»¥ç”¨æ¥æŸ¥æ‰¾ã€åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤ç‰¹å®šç±»å‹çš„å¯¹è±¡ã€‚</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-809b-acbc-dfd32f6201c4"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-8053-a3de-c9de15d3db68" class="">MongoDBæ•°æ®åº“ä¸­ï¼Œæ¯ä¸ªæ¨¡å‹éƒ½æ˜ å°„è‡³ä¸€ç»„æ–‡æ¡£ï¼Œè¿™äº›æ–‡æ¡£åŒ…å«Schemaæ¨¡å‹å®šä¹‰çš„å­—æ®µå/æ¨¡å¼ç±»å‹</p></div></figure><p id="1f4694d5-ea46-8006-a5c7-c0a48ef84c41" class=""><strong>â€”å®šä¹‰æ¨¡å¼ï¼š</strong></p><ul id="1f4694d5-ea46-803f-b47f-fb774749c1d5" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢ç‰‡æ®µå®šä¹‰äº†ä¸€ä¸ªç®€å•çš„æ¨¡å¼ã€‚é¦–å…ˆrequireï¼ˆï¼‰mongooseï¼Œç„¶åä½¿ç”¨Schemaæ„é€ å™¨åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å¼å®ä¾‹ï¼Œä½¿ç”¨æ„é€ å™¨çš„å¯¹è±¡å‚æ•°å®šä¹‰å„ä¸ªå­—æ®µ<p id="1f4694d5-ea46-8009-b88a-f13ff39b5813" class="">// è·å– Mongoose<br/>const mongoose = require(&quot;mongoose&quot;);<br/></p><p id="1f4694d5-ea46-80d4-b5fb-d47fe9de4296" class="">// å®šä¹‰ä¸€ä¸ªæ¨¡å¼<br/>var Schema = mongoose.Schema;<br/></p><p id="1f4694d5-ea46-80e8-82cf-ef5d72f36d58" class="">var SomeModelSchema = new Schema({<br/>a_string: String,<br/>a_date: Date,<br/>});<br/></p></li></ul><ul id="1f4694d5-ea46-8076-8441-fee38d567c49" class="bulleted-list"><li style="list-style-type:disc">åªå®šä¹‰äº†ä¸¤ä¸ªå­—æ®µï¼ˆä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªæ—¥æœŸï¼‰ï¼Œæ¥ä¸‹æ¥å±•ç¤ºå…¶ä»–å­—æ®µç±»å‹ã€éªŒè¯å’Œå…¶ä»–æ–¹æ³•</li></ul><p id="1f4694d5-ea46-8014-a9f5-d4816c5647c7" class="">
</p><p id="1f4694d5-ea46-804b-b2bb-e075305d1443" class=""><strong>â€”åˆ›å»ºæ¨¡å‹ï¼š</strong></p><ul id="1f4694d5-ea46-8053-9195-f5b9cb5a0ad9" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨mongoose.modelï¼ˆï¼‰æ–¹æ³•ä»æ¨¡å¼åˆ›å»ºæ¨¡å‹<p id="1f4694d5-ea46-8051-8931-ee30db2726ec" class="">// å®šä¹‰æ¨¡å¼<br/>const Schema = mongoose.Schema;<br/></p><p id="1f4694d5-ea46-8000-b876-f3d78a459fa3" class="">const SomeModelSchema = new Schema({<br/>a_string: String,<br/>a_date: Date,<br/>});<br/></p><p id="1f4694d5-ea46-80c9-a67d-f64be3aea46f" class="">// ä½¿ç”¨æ¨¡å¼â€œç¼–è¯‘â€æ¨¡å‹<br/>const SomeModel = mongoose.model(&quot;SomeModel&quot;, SomeModelSchema);<br/></p></li></ul><ul id="1f4694d5-ea46-8063-9a7a-f68f6a06f243" class="bulleted-list"><li style="list-style-type:disc">ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºæ¨¡å‹æ‰€åˆ›å»ºé›†åˆçš„åˆ«åï¼ˆMongooseæ•¬ç•SomeModelæ¨¡å‹åˆ›å»ºæ•°æ®åº“é›†åˆï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ—¶åˆ›å»ºæ¨¡å‹æ—¶ä½¿ç”¨çš„æ¨¡å‹</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-8077-99d6-de4c823090af"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-8028-aca2-d7f37fa16447" class="">å®šä¹‰æ¨¡å‹ç±»åï¼Œå¯ä»¥ä½¿ç”¨ä»–ä»¬æ¥åˆ›å»ºã€æ›´æ–°æˆ–åˆ é™¤è®°å½•ï¼Œä»¥åŠé€šè¿‡æŸ¥è¯¢æ¥è·å–æ‰€æœ‰è®°å½•æˆ–ç‰¹å®šå­é›†ã€‚</p></div></figure><p id="1f4694d5-ea46-80dd-b708-cdea80b2e0a3" class="">
</p><p id="1f4694d5-ea46-80ec-ad0c-e03f7b37c749" class=""><strong>â€”æ¨¡å¼ç±»å‹ï¼ˆå­—æ®µï¼‰ï¼š</strong></p><ul id="1f4694d5-ea46-80fa-9464-e74c9e4fa838" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å¼å¯ä»¥åŒ…å«ä»»æ„æ•°é‡çš„å­—æ®µï¼Œæ¯ä¸ªå­—æ®µä»£è¡¨MongoDBæ–‡æ¡£ä¸­çš„ä¸€æ®µå­˜å‚¨åŒºåŸŸï¼Œä¸‹é¢å®ä¾‹åŒ…å«å¸¸è§å­—æ®µç±»å‹å’Œå£°æ˜æ–¹å¼<p id="1f4694d5-ea46-80c9-8409-d5fa89af4997" class="">const schema = new Schema({<br/>name: String,<br/>binary: Buffer,<br/>living: Boolean,<br/>updated: { type: Date, default: Date.now },<br/>age: { type: Number, min: 18, max: 65, required: true },<br/>mixed: Schema.Types.Mixed,<br/>_someId: Schema.Types.ObjectId,<br/>array: [],<br/>ofString: [String], // å…¶ä»–ç±»å‹ä¹Ÿå¯ä½¿ç”¨æ•°ç»„<br/>nested: { stuff: { type: String, lowercase: true, trim: true } },<br/>});<br/></p></li></ul><ul id="1f4694d5-ea46-80f1-bca0-e596c889d9e4" class="bulleted-list"><li style="list-style-type:disc">å¤§å¤šæ•°æ¨¡å¼ç±»å‹æ˜¯è‡ªè§£é‡Šçš„ï¼Œé™¤äº†<ul id="1f4694d5-ea46-80b0-a80f-c7a451ff2e26" class="bulleted-list"><li style="list-style-type:circle">ObjectIDï¼šè¡¨ç¤ºæ•°æ®åº“ä¸­çš„æŸä¸€æ¨¡å‹çš„ç‰¹å®šå®ä¾‹ã€‚ä¾‹å¦‚ä¸€æœ¬ä¹¦å¯èƒ½ä¼šä½¿ç”¨å®ƒæ¥ä»£è¡¨å…¶ä½œè€…å¯¹è±¡ã€‚å®ƒå®é™…åªåŒ…å«æŒ‡å®šå¯¹è±¡çš„å”¯ä¸€IDï¼ˆ_idï¼‰ï¼Œå¯ä»¥ä½¿ç”¨populateï¼ˆï¼‰æ–¹æ³•åœ¨éœ€è¦æ—¶æå–ç›¸å…³ä¿¡æ¯</li></ul><ul id="1f4694d5-ea46-8033-a41f-ef0adf762942" class="bulleted-list"><li style="list-style-type:circle">Mixedï¼šä»»æ„æ¨¡å¼ç±»å‹</li></ul><ul id="1f4694d5-ea46-80d0-a609-dc1204eab1b8" class="bulleted-list"><li style="list-style-type:circle">ã€ã€‘ï¼šå¯¹è±¡æ•°ç»„ï¼Œä»¥åœ¨æ­¤ç±»æ¨¡å‹ä¸Šæ‰§è¡ŒJSæ•°ç»„æ“ä½œï¼ˆpushã€popã€unshiftç­‰ï¼‰ã€‚ä¸Šä¾‹ä¸­æœ‰ä¸€ä¸ªæ²¡æœ‰æŒ‡å®šç±»å‹çš„å¯¹è±¡æ•°ç»„å’Œä¸€ä¸ªStringå¯¹è±¡æ•°ç»„ï¼Œæ•°ç»„ä¸­çš„å¯¹è±¡å¯ä»¥æ˜¯ä»»æ„ç±»å‹</li></ul></li></ul><ul id="1f4694d5-ea46-80da-af05-c32d59b368a7" class="bulleted-list"><li style="list-style-type:disc">ä»£ç è¿˜å±•ç¤ºäº†å£°æ˜å­—æ®µçš„ä¸¤ç§æ–¹æ³•ï¼š<ul id="1f4694d5-ea46-805f-8a6c-c1a94e0ff6c1" class="bulleted-list"><li style="list-style-type:circle">å­—æ®µåå’Œç±»å‹åä½œä¸ºé”®å€¼å¯¹ï¼ˆnameã€binaryå’Œlivingï¼‰</li></ul><ul id="1f4694d5-ea46-8088-aabc-c20a160a8f29" class="bulleted-list"><li style="list-style-type:circle">å­—æ®µååŠ å¯¹è±¡ï¼Œåœ¨å¯¹è±¡ä¸­å®šä¹‰typeå’Œå­—æ®µçš„å…¶ä»–é€‰é¡¹ï¼Œå¯ä»¥æ˜¯<ul id="1f4694d5-ea46-808b-aa07-e475eb2abbaa" class="bulleted-list"><li style="list-style-type:square">é»˜è®¤å€¼</li></ul><ul id="1f4694d5-ea46-80c9-9c1d-cd8f199122ed" class="bulleted-list"><li style="list-style-type:square">å†…ç½®éªŒè¯å™¨ï¼ˆæœ€å¤§æœ€å°å€¼ç­‰ï¼‰å’Œè‡ªå®šä¹‰éªŒè¯å‡½æ•°</li></ul><ul id="1f4694d5-ea46-8000-ae09-df736d6b574d" class="bulleted-list"><li style="list-style-type:square">è¯¥å­—æ®µæ˜¯å¦å¿…é¡»</li></ul><ul id="1f4694d5-ea46-80d8-ba3c-c41c46c10623" class="bulleted-list"><li style="list-style-type:square">æ˜¯å¦å°†Stringå­—æ®µè‡ªåŠ¨è½¬æ¢ä¸ºå°å†™ã€å¤§å†™ã€æˆªæ–­ä¸¤ç«¯ç©ºæ ¼ï¼ˆ{type:Stringï¼Œlowercaseï¼štrueï¼Œtrimï¼štrue}ï¼‰</li></ul></li></ul></li></ul><p id="1f4694d5-ea46-8043-a15b-c62edfa3aee8" class="">
</p><p id="1f4694d5-ea46-802f-9600-f89607f29bd8" class=""><strong>â€”éªŒè¯ï¼š</strong></p><ul id="1f4694d5-ea46-8029-9b31-c1de0f9d6bb3" class="bulleted-list"><li style="list-style-type:disc">Mongooseæä¾›å†…ç½®çš„å’Œè‡ªå®šä¹‰çš„éªŒè¯å™¨ï¼Œä»¥åŠåŒæ­¥çš„å’Œå¼‚æ­¥çš„éªŒè¯å…¶ï¼Œå¯ä»¥åœ¨æ‰€æœ‰æƒ…å†µä¸‹æŒ‡å®šå¯æ¥å—çš„èŒƒå›´å’Œå€¼ï¼Œä»¥åŠéªŒè¯å¤±è´¥çš„é”™è¯¯æ¶ˆæ¯</li></ul><ul id="1f4694d5-ea46-8017-90c8-e846a33dd159" class="bulleted-list"><li style="list-style-type:disc">å†…ç½®çš„éªŒè¯å…¶åŒ…æ‹¬<ul id="1f4694d5-ea46-80ad-bfa0-e636fdbd8ecd" class="bulleted-list"><li style="list-style-type:circle">æ‰€æœ‰æ¨¡å¼ç±»å‹éƒ½å…·æœ‰å†…ç½®çš„requiredå’ŒéªŒè¯å…¶ï¼Œç”¨äºæŒ‡å®šå½“å‰å­—æ®µæ˜¯å¦ä¸ºä¿å­˜æ–‡æ¡£æ‰€å¿…éœ€çš„</li></ul><ul id="1f4694d5-ea46-80b3-b72a-f5cf0632431c" class="bulleted-list"><li style="list-style-type:circle">Numberæœ‰æ•°å€¼èŒƒå›´éªŒè¯å…¶minå’Œmax</li></ul><ul id="1f4694d5-ea46-80ab-827d-df628c15fc49" class="bulleted-list"><li style="list-style-type:circle">Stringæœ‰<ul id="1f4694d5-ea46-8019-92ee-dc1bb248c606" class="bulleted-list"><li style="list-style-type:square">enumï¼šæŒ‡å®šå½“å‰å­—æ®µå…è®¸å€¼çš„é›†åˆ</li></ul><ul id="1f4694d5-ea46-805e-9278-ce060f7b7e45" class="bulleted-list"><li style="list-style-type:square">matchï¼šæŒ‡å®šå­—ç¬¦ä¸²å¿…é¡»åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼</li></ul><ul id="1f4694d5-ea46-800f-94d5-c80f6427fb58" class="bulleted-list"><li style="list-style-type:square">å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦maxlengthå’Œæœ€å°é•¿åº¦minlength</li></ul></li></ul></li></ul><ul id="1f4694d5-ea46-802a-9892-c6d9eea25b21" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä¸‹æ˜¯ç±»å‹éªŒè¯å…¶å’Œé”™è¯¯æ¶ˆæ¯çš„è®¾å®šæ–¹æ³•ï¼ˆä»Mongooseæ–‡æ¡£ç¨ä½œä¿®æ”¹è€Œæ¥ï¼‰ï¼š<p id="1f4694d5-ea46-80f2-a692-c60be6f5d09d" class="">const breakfastSchema = new Schema({<br/>eggs: {<br/>type: Number,<br/>min: [6, &quot;é¸¡è›‹å¤ªå°‘&quot;],<br/>max: 12,<br/>},<br/>drink: {<br/>type: String,<br/>enum: [&quot;å’–å•¡&quot;, &quot;èŒ¶&quot;],<br/>},<br/>});<br/></p></li></ul><p id="1f4694d5-ea46-8027-92ba-ff40997ace0c" class="">
</p><p id="1f4694d5-ea46-80ee-aa86-cbe39afd5587" class=""><strong>â€”è™šæ‹Ÿå±æ€§ï¼š</strong></p><ul id="1f4694d5-ea46-8049-920d-e37ae8e19dd6" class="bulleted-list"><li style="list-style-type:disc">è™šæ‹Ÿå±æ€§æ˜¯å¯ä»¥è·å–å’Œè®¾ç½®ã€ä½†ä¸ä¼šä¿å­˜åˆ°MongoDBçš„æ–‡æ¡£å±æ€§ï¼Œgetterå¯ç”¨äºæ ¼å¼åŒ–æˆ–ç»„åˆå­—æ®µï¼Œè€Œsetterå¯ç”¨äºå°†å•ä¸ªå€¼åˆ†è§£ä¸ºå¤šä¸ªå€¼ä»è€Œä¾¿äºå­˜å‚¨ã€‚</li></ul><ul id="1f4694d5-ea46-8041-b0bc-e17cba18c26d" class="bulleted-list"><li style="list-style-type:disc">æ–‡æ¡£çš„å®ä¾‹ï¼Œä»åå­—å’Œå§“æ°å­—æ®µæ„é€ ï¼ˆå¹¶è§£æ„ï¼‰ä¸€ä¸ªå…¨åè™šæ‹Ÿå±æ€§ï¼Œè¿™ç¬”æ¯æ¬¡åœ¨æ¨¡æ¿åšä½¿ç”¨å…¨é¢æ›´ç®€å•</li></ul><ul id="1f4694d5-ea46-8028-8aef-c23bddc04735" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨åº“ä¸­çš„ä¸€ä¸ªè™šæ‹Ÿå±æ€§ï¼Œç”¨è·¯å¾„å’Œè®°å½•çš„_idæ¥ä¸ºæ¯ä¸ªæ¨¡å‹è®°å½•å®šä¹‰å”¯ä¸€çš„URL</li></ul><p id="1f4694d5-ea46-806c-8454-d34247d96bfd" class="">
</p><p id="1f4694d5-ea46-80b2-9e7b-efdcc1b27c91" class=""><strong>â€”æ–¹æ³•å’ŒæŸ¥è¯¢åŠ©æ‰‹ï¼š</strong></p><ul id="1f4694d5-ea46-8030-91ea-df1d0f25be2e" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å¼æ”¯æŒå®ä¾‹æ–¹æ³•ã€é™æ€æ–¹æ³•ã€æŸ¥è¯¢åŠ©æ‰‹ã€‚<ul id="1f4694d5-ea46-80d0-9686-c75a2cf00589" class="bulleted-list"><li style="list-style-type:circle">å®ä¾‹æ–¹æ³•å’Œé™æ€æ–¹æ³•å¤–è¡¨å¾ˆç›¸ä¼¼ï¼Œä½†æœ‰æœ¬è´¨åŒºåˆ«ï¼Œå®ä¾‹æ–¹æ³•é’ˆå¯¹ç‰¹å®šè®°å½•ï¼Œä¸”å¯ä»¥è®¿é—®å½“å‰å¯¹è±¡</li></ul><ul id="1f4694d5-ea46-80b1-b88e-e2d6b7ac74ea" class="bulleted-list"><li style="list-style-type:circle">æŸ¥è¯¢åŠ©æ‰‹å¯ç”¨äºæ‰©å±•Mongooseçš„é“¾å¼æŸ¥è¯¢APIï¼ˆä¾‹å¦‚åœ¨findï¼ˆï¼‰ã€findOndeï¼ˆï¼‰ã€findByIdï¼ˆï¼‰æ–¹æ³•å¤–å¯ä»¥æ·»åŠ ä¸€ä¸ªbyNameæŸ¥è¯¢ã€‚ï¼‰</li></ul></li></ul><p id="1f4694d5-ea46-80e7-9652-cc00e525ef08" class="">
</p><p id="1f4694d5-ea46-80b0-a766-cf3000419eff" class=""><strong>â€”ä½¿ç”¨æ¨¡å‹ï¼š</strong></p><ul id="1f4694d5-ea46-8031-8320-d75eed3da182" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥ä½¿ç”¨åˆ›å»ºå¥½çš„æ¨¡å¼æ¥åˆ›å»ºæ¨¡å‹ã€‚æ¨¡å‹å³æ•°æ®åº“ä¸­å¯ä»¥æœç´¢åˆ°çš„ä¸€ç±»æ–‡æ¡£ï¼Œæ¨¡å‹çš„å®ä¾‹æ—¢å¯ä»¥å­˜å–å•ä¸ªæ–‡æ¡£</li></ul><p id="1f4694d5-ea46-8015-8965-c54e02012359" class="">
</p><p id="1f4694d5-ea46-80b8-8829-c12b68dbfea9" class=""><strong>â€”åˆ›å»ºå’Œä¿®æ”¹æ–‡æ¡£ï¼š</strong></p><ul id="1f4694d5-ea46-8017-a05d-d29f77ceecf9" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥é€šè¿‡å®šä¹‰æ¨¡å‹çš„å®ä¾‹å¹¶è°ƒç”¨saveï¼ˆï¼‰æ¥åˆ›å»ºè®°å½•ï¼Œä»¥ä¸‹ç¤ºä¾‹å‡å®šSomeModelæ—¶ä½¿ç”¨ç°æœ‰æ¨¡å¼åˆ›å»ºçš„æ¨¡å‹ï¼ˆåªæœ‰ä¸€ä¸ªå­—æ®µnameï¼‰<p id="1f4694d5-ea46-80ec-b3b7-ea6d68ca9a76" class="">// åˆ›å»ºä¸€ä¸ª SomeModel æ¨¡å‹çš„å®ä¾‹<br/>const awesome_instance = new SomeModel({ name: &quot;ç‰›äºº&quot; });<br/></p><p id="1f4694d5-ea46-80eb-a9a9-fbbef4ebfaea" class="">// ä¼ é€’å›è°ƒä»¥ä¿å­˜è¿™ä¸ªæ–°å»ºçš„æ¨¡å‹å®ä¾‹<br/>awesome_instance.save(function (err) {<br/>if (err) {<br/>return handleError(err);<br/>} // å·²ä¿å­˜<br/>});<br/></p><ul id="1f4694d5-ea46-80c6-a653-fd0781d6601d" class="bulleted-list"><li style="list-style-type:circle">è®°å½•çš„åˆ›å»ºï¼ˆæ›´æ–°ã€åˆ é™¤ã€æŸ¥è¯¢ï¼‰æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„ï¼Œå¯ä»¥æä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°åœ¨æ“ä½œå®Œæˆæ—¶è°ƒç”¨ã€‚ç”±äºAPIéµå¾ªé”™è¯¯å‚æ•°æœ‰é™çš„æƒ¯ä¾‹ï¼Œå› æ­¤æ¯æ‰çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºé”™è¯¯å€¼ï¼ˆæˆ–nullï¼‰ï¼Œå¦‚æœAPIéœ€è¦è¿”å›ä¸€äº›ç»“æœï¼Œåˆ™å°†ç»“æœä½œä¸ºç¬¬äºŒä¸ªå‚æ•°ã€‚</li></ul></li></ul><ul id="1f4694d5-ea46-8045-a7ca-e2ee7a81b4e8" class="bulleted-list"><li style="list-style-type:disc">è¿˜å¯ä»¥ä½¿ç”¨createï¼ˆï¼‰ï¼Œåœ¨å®šä¹‰æ¨¡å‹å®ä¾‹çš„åŒæ—¶å°†å…¶ä¿å­˜ï¼Œå›è°ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°è¿”å›é”™è¯¯ï¼Œç¬¬äºŒä¸ªå‚æ•°è¿”å›æ–°å»ºçš„æ¨¡å‹å®ä¾‹<p id="1f4694d5-ea46-807e-953c-d7ce22bdaf8d" class="">SomeModel.create({ name: &quot;ä¹Ÿæ˜¯ç‰›äºº&quot; }, function (err, awesome_instance) {<br/>if (err) {<br/>return handleError(err);<br/>} // å·²ä¿å­˜<br/>});<br/></p></li></ul><ul id="1f4694d5-ea46-8062-b65f-dea13e65f760" class="bulleted-list"><li style="list-style-type:disc">æ¯ä¸ªæ¨¡å‹éƒ½æœ‰ä¸€ä¸ªç›¸å…³çš„é“¾æ¥ï¼ˆä½¿ç”¨mongoose.modelï¼ˆï¼‰æ—¶å°†ä½œä¸ºé»˜è®¤é“¾æ¥ï¼‰ã€‚å¯ä»¥é€šè¿‡åˆ›å»ºæ–°è¿æ¥å¹¶å¯¹å…¶ä½¿ç”¨.modelï¼Œä»è€Œåœ¨å¦ä¸€ä¸ªæ•°æ®åº“ä¸Šåˆ›å»ºæ–‡æ¡£ã€‚</li></ul><ul id="1f4694d5-ea46-8079-92dd-c7ef8aa6f9c8" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥ä½¿ç”¨åœ†ç‚¹åŠ å­—æ®µåæ¥è®¿é—®ã€ä¿®æ”¹æ–°çºªå½•ä¸­çš„å­—æ®µã€‚æ“ä½œåå¿…é¡»è°ƒç”¨saveï¼ˆï¼‰æˆ–updateï¼ˆï¼‰æ¥å°†æ”¹åŠ¨ä¿å­˜å›æ•°æ®åº“<p id="1f4694d5-ea46-80f7-9d21-fb40473737d6" class="">// ä½¿ç”¨åœ†ç‚¹æ¥è®¿é—®æ¨¡å‹çš„å­—æ®µå€¼<br/>console.log(awesome_instance.name); // æ§åˆ¶å°å°†æ˜¾ç¤º &#x27;ä¹Ÿæ˜¯ç‰›äºº&#x27;<br/></p><p id="1f4694d5-ea46-802e-a8c0-d791342472f2" class="">// ä¿®æ”¹å­—æ®µå†…å®¹å¹¶è°ƒç”¨ save() ä»¥ä¿®æ”¹è®°å½•<br/>awesome_instance.name = &quot;é…·æ¯™äº†çš„ç‰›äºº&quot;;<br/>awesome_instance.save(function (err) {<br/>if (err) {<br/>return handleError(err);<br/>} // å·²ä¿å­˜<br/>});<br/></p></li></ul><p id="1f4694d5-ea46-8000-bfa8-eab22cba4c1b" class="">
</p><p id="1f4694d5-ea46-80d7-b80f-d91b37a0b9e7" class=""><strong>â€”æœç´¢è®°å½•ï¼š</strong></p><ul id="1f4694d5-ea46-8037-a075-c2f1fcbef085" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥ä½¿ç”¨æŸ¥è¯¢æ–¹æ³•æœç´¢è®°å½•ï¼ŒæŸ¥è¯¢æ¡ä»¶å¯ä»¥åˆ—åœ¨JSONæ–‡æ¡£ä¸­ï¼Œä»¥ä¸‹ä»£ç å±•ç¤ºäº†å¦‚ä½•åœ¨æ•°æ®åº“ä¸­æ‰¾åˆ°æ‰€æœ‰ç½‘çƒè¿åŠ¨å‘˜ï¼Œå¹¶è¿”å›è¿åŠ¨å‘˜å§“åã€å¹´é¾„å­—æ®µï¼Œè¿™é‡ŒåªæŒ‡å®šäº†ä¸€ä¸ªåŒ¹é…å­—æ®µï¼ˆè¿åŠ¨é¡¹ç›®ï¼Œsportï¼‰ï¼Œå¯ä»¥æ·»åŠ æ›´å¤šæ¡ä»¶ï¼ŒæŒ‡å®šæ­£åˆ™è¡¨è¾¾å¼ï¼Œè·å–å‡ºæ‰€æœ‰æ¡ä»¶æ¥è¿”å›æ‰€æœ‰è¿åŠ¨å‘˜<p id="1f4694d5-ea46-80bc-b7a5-db1797634d9d" class="">const Athlete = mongoose.model(&quot;Athlete&quot;, yourSchema);</p><p id="1f4694d5-ea46-801a-9d15-caaecf9fb429" class="">// SELECT name, age FROM Athlete WHERE sport=&#x27;Tennis&#x27;<br/>Athlete.find({ sport: &quot;Tennis&quot; }, &quot;name age&quot;, function (err, athletes) {<br/>if (err) {<br/>return handleError(err);<br/>} // &#x27;athletes&#x27; ä¸­ä¿å­˜ä¸€ä¸ªç¬¦åˆæ¡ä»¶çš„è¿åŠ¨å‘˜çš„åˆ—è¡¨<br/>});<br/></p><ul id="1f4694d5-ea46-802b-ab48-f3b421149ff2" class="bulleted-list"><li style="list-style-type:circle">åƒä¸Šè¿°ä»£ç æŒ‡å®šå›è°ƒï¼ŒæŸ¥è¯¢ä¼šç«‹å³æ‰§è¡Œï¼Œæœç´¢å®Œæˆåå°†è°ƒç”¨å›è°ƒ</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-8060-aba9-eb0e5a362be0"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-8036-b009-fdb10ddf753f" class="">Mongooseä¸­æ‰€æœ‰å›è°ƒéƒ½ä½¿ç”¨callbackï¼ˆerrorï¼Œresultï¼‰æ¨¡å¼ï¼Œå¦‚æœæŸ¥è¯¢æ—¶å‘ç”Ÿé”™è¯¯ï¼Œåˆ™å‚æ•°errorå°†åŒ…å«é”™è¯¯ç¨³å®šï¼Œresultä¸ºnullã€‚æŸ¥è¯¢æˆåŠŸåˆ™errorä¸ºnullï¼ŒæŸ¥è¯¢ç»“æœå¡«å……è‡³result</p></div></figure><ul id="1f4694d5-ea46-80d6-a330-e4e47a87acec" class="bulleted-list"><li style="list-style-type:circle">è‹¥æœªæŒ‡å®šå›è°ƒï¼Œåˆ™APIå°†è¿”å›Queryç±»å‹çš„å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨è¯¥æŸ¥è¯¢å¯¹è±¡æ¥æ„å»ºæŸ¥è¯¢ï¼Œéšåä½¿ç”¨execï¼ˆï¼‰æ–¹æ³•æ‰§è¡Œï¼ˆä½¿ç”¨å›è°ƒå‡½æ•°ï¼‰<p id="1f4694d5-ea46-8072-ba57-c3addca7343f" class="">// å¯»æ‰¾æ‰€æœ‰ç½‘çƒè¿åŠ¨å‘˜<br/>const query = Athlete.find({ sport: &quot;Tennis&quot; });<br/></p><p id="1f4694d5-ea46-808a-b98a-ee53bf64ac82" class="">// æŸ¥æ‰¾ name, age ä¸¤ä¸ªå­—æ®µ<br/>query.select(&quot;name age&quot;);<br/></p><p id="1f4694d5-ea46-80e9-9883-d12624196a2e" class="">// åªæŸ¥æ‰¾å‰ 5 æ¡è®°å½•<br/>query.limit(5);<br/></p><p id="1f4694d5-ea46-806e-b5ce-f9e3db33db0c" class="">// æŒ‰å¹´é¾„æ’åº<br/>query.sort({ age: -1 });<br/></p><p id="1f4694d5-ea46-80bd-b2f3-d0a036b6afdb" class="">// ä»¥åæŸä¸ªæ—¶é—´è¿è¡Œè¯¥æŸ¥è¯¢<br/>query.exec(function (err, athletes) {<br/>if (err) {<br/>return handleError(err);<br/>} // athletes ä¸­ä¿å­˜ç½‘çƒè¿åŠ¨å‘˜åˆ—è¡¨ï¼ŒæŒ‰å¹´é¾„æ’åºï¼Œå…± 5 æ¡è®°å½•<br/>});<br/></p><ul id="1f4694d5-ea46-8094-89f3-e650591e1f4c" class="bulleted-list"><li style="list-style-type:square">ä¸Šé¢çš„æŸ¥è¯¢æ¡ä»¶å®šä¹‰åœ¨findï¼ˆï¼‰æ–¹æ³•ä¸­ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨whereï¼ˆï¼‰å‡½æ•°æ¥æ‰§è¡Œæ­¤æ“ä½œï¼Œå¯ä»¥ä½¿ç”¨ç‚¹è¿ç®—ç¬¦ï¼ˆ.ï¼‰å°†æŸ¥è¯¢è¿æ¥åœ¨ä¸€èµ·ï¼Œä»¥ä¸‹ä»£ç å’Œä¸Šè¿°ä»£ç æŸ¥è¯¢åŸºæœ¬ç›¸åŒï¼Œè¿˜æ·»åŠ äº†å¹´é¾„èŒƒå›´çš„é™„åŠ æ¡ä»¶</li></ul></li></ul><p id="1f4694d5-ea46-80c2-b314-f4ff80214dd1" class="">Athlete.find()<br/>.where(&quot;sport&quot;)<br/>.equals(&quot;Tennis&quot;)<br/>.where(&quot;age&quot;)<br/>.gt(17)<br/>.lt(50) // é™„åŠ  WHERE æŸ¥è¯¢<br/>.limit(5)<br/>.sort({ age: -1 })<br/>.select(&quot;name age&quot;)<br/>.exec(callback); // å›è°ƒå‡½æ•°çš„åå­—æ˜¯ callback<br/></p></li></ul><ul id="1f4694d5-ea46-80af-8df5-cbe10f23aa4a" class="bulleted-list"><li style="list-style-type:disc">findï¼ˆï¼‰æ–¹æ³•ä¼šå–å¾—æ‰€æœ‰åŒ¹é…è®°å½•ï¼Œä½¿ç”¨ä¸‹é¢æ–¹æ³•æŸ¥è¯¢å•ä¸ªè®°å½•<ul id="1f4694d5-ea46-80b6-bd00-f74a8a237f9c" class="bulleted-list"><li style="list-style-type:circle">findByIdï¼ˆï¼‰ï¼šä½¿ç”¨æŒ‡å®šidæŸ¥æ‰¾æ–‡æ¡£ï¼ˆæ¯ä¸ªæ–‡æ¡£éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„idï¼‰</li></ul><ul id="1f4694d5-ea46-800e-a291-f3deab049b24" class="bulleted-list"><li style="list-style-type:circle">findOndeï¼ˆï¼‰ï¼šæŸ¥æ‰¾ä¸æŒ‡å®šæ¡ä»¶åŒ¹é…çš„ç¬¬ä¸€ä¸ªæ–‡æ¡£</li></ul><ul id="1f4694d5-ea46-8022-8d73-f74dbe18ac16" class="bulleted-list"><li style="list-style-type:circle">findByIdAndRemoveï¼ˆï¼‰ã€findByIdAndUpdateï¼ˆï¼‰ã€findOneAndRemoveï¼ˆï¼‰ã€findOneAndUpdateï¼ˆï¼‰ï¼šé€šè¿‡idæˆ–æ¡ä»¶æŸ¥æ‰¾å•ä¸ªæ–‡æ¡£ï¼Œå¹¶è¿›è¡Œæ›´æ–°æˆ–åˆ é™¤ã€‚</li></ul><ul id="1f4694d5-ea46-800f-b74f-fc2114c7c487" class="bulleted-list"><li style="list-style-type:circle">countï¼ˆï¼‰ï¼šå¯è·å–åŒ¹é…æ¡ä»¶çš„é¡¹ç›®çš„ä¸ªæ•°ï¼Œä¸ä¼šè·å–å®é™…è®°å½•ï¼Œä»…è·å¾—è®°å½•ä¸ªæ•°ã€‚</li></ul></li></ul><p id="1f4694d5-ea46-8086-8ada-e7cb5e203112" class="">
</p><p id="1f4694d5-ea46-800a-a6a7-f6275931350a" class=""><strong>â€”æ–‡æ¡£é—´åè°ƒ-populationï¼š</strong></p><ul id="1f4694d5-ea46-800d-980e-c610b7f40a21" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥ä½¿ç”¨ObjectIdæ¨¡å¼å­—æ®µæ¥åˆ›å»ºä¸¤ä¸ªæ–‡æ¡£/æ¨¡å‹å®ä¾‹é—´ä¸€å¯¹ä¸€å¼•ç”¨ï¼ˆä¸€ç»„ObjectIdså¯ä»¥åˆ›å»ºä¸€å¯¹å¤šçš„å¼•ç”¨ï¼‰ï¼Œè¯¥å­—æ®µå­˜å‚¨ç›¸å…³æ¨¡å‹çš„idã€‚å¦‚æœéœ€è¦ç›¸å…³æ–‡æ¡£çš„å®é™…å†…å®¹ï¼Œå¯ä»¥åœ¨æŸ¥è¯¢ä¸­ä½¿ç”¨populateï¼ˆï¼‰æ–¹æ³•ï¼Œå°†idæ›¿æ¢ä¸ºå®é™…æ•°æ®<ul id="1f4694d5-ea46-80de-9861-cb87222d96a3" class="bulleted-list"><li style="list-style-type:circle">ä¾‹å¦‚ï¼Œä¸€ä¸‹æ¨¡å¼å®šä¹‰äº†ä½œè€…å’Œé—´æ¥ï¼Œæ¯ä¸ªä½œè€…å¯ä»¥æœ‰å¤šæ¡ç®€ä»‹ï¼Œæˆ‘ä»¬å°†å…¶è¡¨ç¤ºä¸ºä¸€ä¸ªObjectIdæ•°ç»„ï¼Œæ¯æ¡ç®€ä»‹åªå¯¹åº”ä¸€ä¸ªä½œè€…â€œrefâ€ï¼ˆé»‘ä½“å­—ï¼‰å‘ŠçŸ¥æ¨¡å¼åˆ†é…å“ªä¸ªæ¨¡å‹ç»™è¯¥å­—æ®µ<p id="1f4694d5-ea46-8046-adf5-e66acd8a30a6" class="">const mongoose = require(&quot;mongoose&quot;);<br/>const Schema = mongoose.Schema;<br/></p><p id="1f4694d5-ea46-804f-89d7-d57215921516" class="">const authorSchema = Schema({<br/>name: String,<br/>stories: [{ type: Schema.Types.ObjectId, ref: &quot;Story&quot; }],<br/>});<br/></p><p id="1f4694d5-ea46-80e6-abe7-d615f07e4038" class="">const storySchema = Schema({<br/>author: { type: Schema.Types.ObjectId, ref: &quot;Author&quot; },<br/>title: String,<br/>});<br/></p><p id="1f4694d5-ea46-80f9-b595-dae90a43bbbe" class="">const Story = mongoose.model(&quot;Story&quot;, storySchema);<br/>const Author = mongoose.model(&quot;Author&quot;, authorSchema);<br/></p></li></ul><ul id="1f4694d5-ea46-8035-9f28-fd8032b8e4ad" class="bulleted-list"><li style="list-style-type:circle">é€šè¿‡åˆ†é…_idè‡³æ¥ä¿å­˜å¯¹ç›¸å…³æ–‡æ¡£çš„å¼•ç”¨ã€‚ä¸‹é¢åˆ›å»ºä¸€ä¸ªä½œè€…ã€ä¸€æ¡ç®€ä»‹ï¼Œå¹¶å°†æ–°ç®€ä»‹çš„authorå­—æ®µè®¾ç½®ä¸ºæ–°å»ºä½œè€…çš„id<p id="1f4694d5-ea46-8004-bd0f-d109b8fba41a" class="">const wxm = new Author({ name: &quot;å¸é©¬è¿&quot; });</p><p id="1f4694d5-ea46-807e-be87-dfd65672f0b6" class="">wxm.save(function (err) {<br/>if (err) {<br/>return handleError(err);<br/>}<br/></p><p id="1f4694d5-ea46-808a-95d7-c3568b47e7b9" class="">// ç°åœ¨åº“ä¸­æœ‰äº†ä½œè€…å¸é©¬è¿ï¼Œæˆ‘ä»¬æ¥æ–°å»ºä¸€æ¡ç®€ä»‹<br/>const story = new Story({<br/>title: &quot;å¸é©¬è¿æ˜¯å†å²å­¦å®¶&quot;,<br/>author: wxm._id, // author è®¾ç½®ä¸ºä½œè€… å¸é©¬è¿ çš„ _idã€‚ID æ˜¯è‡ªåŠ¨åˆ›å»ºçš„ã€‚<br/>});<br/></p><p id="1f4694d5-ea46-807e-aa56-fadf35a513cb" class="">story.save(function (err) {<br/>if (err) {<br/>return handleError(err);<br/>} // å¸é©¬è¿æœ‰äº†ä¸€æ¡ç®€ä»‹<br/>});<br/>});<br/></p></li></ul><ul id="1f4694d5-ea46-8036-9239-ff3caac29323" class="bulleted-list"><li style="list-style-type:circle">ä¸‹é¢ç®€ä»‹æ–‡æ¡£é€šè¿‡ä½œè€…æ–‡æ¡£çš„IDå¼•ç”¨ä½œè€…ï¼Œå¯ä½¿ç”¨populateï¼ˆï¼‰åœ¨ç®€ä»‹ä¸­è·å–ä½œè€…ä¿¡æ¯<p id="1f4694d5-ea46-8094-9b8f-ed2798053a74" class="">Story.findOne({ title: &quot;å¸é©¬è¿æ˜¯å†å²å­¦å®¶&quot; })<br/>.populate(&quot;author&quot;) // ä½¿ç”¨ä½œè€… id å¡«å……å®é™…ä½œè€…ä¿¡æ¯<br/>.exec(function (err, story) {<br/>if (err) {<br/>return handleError(err);<br/>}<br/>console.log(&quot;ä½œè€…æ˜¯ %s&quot;, <br/><a href="http://story.author.name/">story.author.name</a>);<br/>// æ§åˆ¶å°å°†æ‰“å° &quot;ä½œè€…æ˜¯ å¸é©¬è¿&quot;<br/>});<br/></p></li></ul></li></ul><p id="1f4694d5-ea46-80f9-89c6-ffc6f711fe16" class="">
</p><p id="1f4694d5-ea46-8084-9165-efc244ae8c73" class=""><strong>â€”æ¨¡å¼ï¼ˆæ¨¡å‹ï¼‰é…å¯¹ä¸€æ–‡ä»¶ï¼š</strong></p><ul id="1f4694d5-ea46-804a-8384-d2fb0659f182" class="bulleted-list"><li style="list-style-type:disc">è™½ç„¶åˆ›å»ºæ¨¡å¼å’Œæ¨¡å‹æ²¡æœ‰æ–‡ä»¶ç»“æ„çš„é™åˆ¶ï¼Œä½†å¼ºçƒˆå»ºè®®å°†å•ä¸€æ¨¡å¼å®šä¹‰åœ¨å•ä¸€æ¨¡å—ï¼ˆæ–‡ä»¶ï¼‰ä¸­ï¼Œå¹¶é€šè¿‡å¯¼å‡ºæ–¹æ³•æ¥åˆ›å»ºæ¨¡å‹ï¼Œå¦‚ä¸‹æ‰€ç¤º<p id="1f4694d5-ea46-809b-bcc4-fb9b9c51eea2" class="">// æ–‡ä»¶ï¼š./models/somemodel.js</p><p id="1f4694d5-ea46-80f2-bfcf-f15c07fa9ec6" class="">// Require Mongoose<br/>const mongoose = require(&quot;mongoose&quot;);<br/></p><p id="1f4694d5-ea46-8084-a3af-cd5d397b13d1" class="">// å®šä¹‰ä¸€ä¸ªæ¨¡å¼<br/>const Schema = mongoose.Schema;<br/></p><p id="1f4694d5-ea46-808a-88ae-ced8b6eddd3e" class="">const SomeModelSchema = new Schema({<br/>a_string: String,<br/>a_date: Date,<br/>});<br/></p><p id="1f4694d5-ea46-801a-95a2-cf1e132b69a6" class="">// å¯¼å‡ºå‡½æ•°æ¥åˆ›å»º &quot;SomeModel&quot; æ¨¡å‹ç±»<br/>module.exports = mongoose.model(&quot;SomeModel&quot;, SomeModelSchema);<br/></p></li></ul><ul id="1f4694d5-ea46-8008-adc9-cd313d6101ba" class="bulleted-list"><li style="list-style-type:disc">ç„¶åå°±å¯ä»¥åœ¨å…¶ä»–æ–‡ä»¶ä¸­ï¼Œrequireå¹¶ä½¿ç”¨è¯¥æ¨¡å‹ï¼Œä¸‹é¢æ—¶é€šè¿‡SomeModelæ¨¡å—æ¥è·å–æ‰€æœ‰å®ä¾‹çš„æ–¹æ³•<p id="1f4694d5-ea46-8061-bec9-d8b73cb18c90" class="">// é€šè¿‡ require æ¨¡å—æ¥åˆ›å»º SomeModel æ¨¡å‹<br/>const SomeModel = require(&quot;../models/somemodel&quot;);<br/></p><p id="1f4694d5-ea46-804d-b2b2-fd797c4842df" class="">// ä½¿ç”¨ SomeModel å¯¹è±¡ï¼ˆæ¨¡å‹ï¼‰æ¥æŸ¥æ‰¾æ‰€æœ‰çš„ SomeModel è®°å½•<br/>SomeModel.find(callback_function);<br/></p></li></ul><p id="1f4694d5-ea46-80ce-89a0-e60495152690" class="">
</p><p id="1f4694d5-ea46-805c-9339-c4f820c22f82" class=""><strong>ã€æ¶è®¾MongoDBæ•°æ®åº“ã€‘ï¼š</strong></p><ul id="1f4694d5-ea46-80c4-be9d-f06536ed8a66" class="bulleted-list"><li style="list-style-type:disc">æ­¤å¤„ä½¿ç”¨çš„æ˜¯äº‘æ•°æ®åº“ mLabå…è´¹ç‰ˆ</li></ul><ul id="1f4694d5-ea46-8080-affa-e81aa33a4acb" class="bulleted-list"><li style="list-style-type:disc">ä¹Ÿå¯ä»¥ä¸‹è½½å¹¶å®‰è£…å¯¹åº”çš„å®‰è£…åŒ…ï¼Œè®¾ç½®æœ¬åœ°ç‰ˆMå“¦èƒ½å¤ŸDBæ•°æ®åº“ï¼ŒæŒ‡ä»¤ä¸ä½¿ç”¨äº‘æ•°æ®åº“æ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†è¿æ¥æ—¶æ•°æ®åº“çš„URL</li></ul><ul id="1f4694d5-ea46-80fe-9a72-dae99a088d87" class="bulleted-list"><li style="list-style-type:disc">ä¸‹è½½å®‰è£…æœ¬åœ°ç‰ˆ</li></ul><p id="1f4694d5-ea46-808e-ba10-fd22576ae657" class="">
</p><p id="1f4694d5-ea46-8060-9477-ddbfe339cb94" class=""><strong>â€”å®‰è£…Mongooseï¼š</strong></p><ul id="1f4694d5-ea46-80a7-80dd-f6836426de93" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€ç»ˆç«¯ï¼Œåˆ°é¡¹ç›®ç›®å½•ï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…MongooseåŠå…¶ä¾èµ–é¡¹ã€‚å¹¶å°†å…¶æ·»åŠ è‡³package.json<ul id="1f4694d5-ea46-804e-a7e3-e845f19cf227" class="bulleted-list"><li style="list-style-type:circle">npm install mongoose</li></ul></li></ul><p id="1f4694d5-ea46-8082-8f85-e2ec7f95c0b6" class="">
</p><p id="1f4694d5-ea46-8068-9c69-f2099a83838e" class=""><strong>â€”è¿æ¥åˆ°MongoDBï¼š</strong></p><ul id="1f4694d5-ea46-80f3-b343-e6377293d192" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/app.jsï¼ˆé¡¹ç›®æ ¹ç›®å½•ï¼‰ï¼Œå°†ä»¥ä¸‹ä»£ç å¤åˆ¶åˆ°å£°æ˜Expressåº”ç”¨å¯¹è±¡çš„ä½ç½®ï¼ˆvar app = expressï¼ˆï¼‰ï¼›ä¹‹åï¼‰ã€‚å°†æ•°æ®åº“URLå­—ç¬¦ä¸²æ›¿æ¢ä¸ºçœŸå®çš„URL<ul id="1f4694d5-ea46-808a-b039-c3502196de85" class="bulleted-list"><li style="list-style-type:circle">// è®¾ç½® Mongoose è¿æ¥<br/>const mongoose = require(&quot;mongoose&quot;);<br/>const mongoDB = &quot;åœ¨æ­¤æ’å…¥æ•°æ®åº“_URL&quot;;<br/>mongoose.connect(mongoDB, { useNewUrlParser: true, useUnifiedTopology: true });<br/>mongoose.Promise = global.Promise;<br/>const db = mongoose.connection;<br/>db.on(&quot;error&quot;, console.error.bind(console, &quot;MongoDB è¿æ¥é”™è¯¯ï¼š&quot;));<br/><ul id="1f4694d5-ea46-8046-8faa-ed0a20a0f872" class="bulleted-list"><li style="list-style-type:square">å¦‚ä¸Šæ–‡æ‰€å±ï¼Œä»£ç åˆ›å»ºäº†ä¸æ•°æ®åº“çš„é»˜è®¤é“¾æ¥ï¼Œå¹¶ç»‘å®šäº†é”™è¯¯æ—¶é—´ã€‚é”™è¯¯ä¿¡æ¯å°†æ‰“å°åˆ°æ§åˆ¶å°</li></ul></li></ul></li></ul><p id="1f4694d5-ea46-80ee-b602-d3f5cf471c82" class="">
</p><p id="1f4694d5-ea46-809e-8a97-f2aa7c04ceb7" class=""><strong>â€”å®šä¹‰LocalLibraryæ¨¡å¼ï¼š</strong></p><ul id="1f4694d5-ea46-80c3-b9b2-cef7c5567b5e" class="bulleted-list"><li style="list-style-type:disc">å¦‚ä¸Šæ–‡æ‰€è¿°ï¼Œå°†æ¯ä¸ªæ¨¡å‹å®šä¹‰ä¸ºå•ç‹¬çš„æ¨¡å—ï¼Œé¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸­åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ç”¨æ¥ä¿å­˜æ¨¡å‹ï¼ˆ/modelsï¼‰ï¼Œç„¶åä¸ºæ¯ä¸ªæ¨¡å‹åˆ›å»ºå•ç‹¬çš„æ–‡ä»¶</li></ul><figure id="1f4694d5-ea46-803e-b59a-d119073ce5ea" class="image"><a href="image%203.png"><img style="width:561.1625366210938px" src="image%203.png"/></a></figure><p id="1f4694d5-ea46-8097-89fb-d2de43a5a61d" class="">
</p><p id="1f4694d5-ea46-80f0-bc43-c9ac79a929c4" class=""><strong>â€”ä½œè€…æ¨¡å‹ï¼ˆAuthorï¼‰ï¼š</strong></p><ul id="1f4694d5-ea46-805b-8bfd-d97976de0e6a" class="bulleted-list"><li style="list-style-type:disc">ä»£ç å¦‚ä¸‹ï¼Œæ¨¡å¼ä¸­å®šä¹‰äº†ä¸¤ä¸ªStringæ¨¡å¼ç±»å‹æ¥è¡¨ç¤ºä½œè€…çš„å§“æ°å’Œåå­—ï¼ˆè¿™ä¸¤ä¸ªå­—æ®µæ˜¯å¿…é¡»çš„ï¼Œä¸”é•¿åº¦ä¸å¾—è¶…è¿‡100å­—ç¬¦ï¼‰ï¼Œå®šä¹‰äº†ä¸¤ä¸ªDateå­—æ®µä½œä¸ºä½œè€…ç”Ÿå’æ—¥æœŸã€‚<ul id="1f4694d5-ea46-80cc-aa95-c87038c48fc0" class="bulleted-list"><li style="list-style-type:circle">const mongoose = require(&quot;mongoose&quot;);<p id="1f4694d5-ea46-8085-a8a5-e3c656334910" class="">const Schema = mongoose.Schema;</p><p id="1f4694d5-ea46-8058-9bc2-c1846224a6e1" class="">const AuthorSchema = new Schema({<br/>first_name: { type: String, required: true, max: 100 },<br/>family_name: { type: String, required: true, max: 100 },<br/>date_of_birth: { type: Date },<br/>date_of_death: { type: Date },<br/>});<br/></p><p id="1f4694d5-ea46-80d8-a1a2-efc5bfe9a6de" class="">// è™šæ‹Ÿå±æ€§&#x27;name&#x27;ï¼šè¡¨ç¤ºä½œè€…å…¨å<br/>AuthorSchema.virtual(&quot;name&quot;).get(function () {<br/>return this.family_name + &quot;, &quot; + this.first_name;<br/>});<br/></p><p id="1f4694d5-ea46-80fc-a31b-c1503f5d6573" class="">// è™šæ‹Ÿå±æ€§&#x27;lifespan&#x27;ï¼šä½œè€…å¯¿å‘½<br/>AuthorSchema.virtual(&quot;lifespan&quot;).get(function () {<br/>return (<br/>this.date_of_death.getYear() - this.date_of_birth.getYear()<br/>).toString();<br/>});<br/></p><p id="1f4694d5-ea46-8087-a966-d77727ae4fcd" class="">// è™šæ‹Ÿå±æ€§&#x27;url&#x27;ï¼šä½œè€… URL<br/>AuthorSchema.virtual(&quot;url&quot;).get(function () {<br/>return &quot;/catalog/author/&quot; + this._id;<br/>});<br/></p><p id="1f4694d5-ea46-8034-bb4c-f639fd2d6f36" class="">// å¯¼å‡º Author æ¨¡å‹<br/>module.exports = mongoose.model(&quot;Author&quot;, AuthorSchema);<br/></p></li></ul><ul id="1f4694d5-ea46-80ba-8e59-f97ee68d0483" class="bulleted-list"><li style="list-style-type:circle">ä¸ºAuthorSchemaå£°æ˜äº†ä¸€ä¸ªurlè™šæ‹Ÿå±æ€§ï¼Œä¸€è¿”å›æ¯æ ¡ç‰¹å®šå®ä¾‹çš„ç»å¯¹URLï¼Œåœ¨æ¨¡æ¿ä¸­éœ€è¦è·å–ç‰¹å®šä½œè€…çš„é“¾æ¥æ—¶å¯ä»¥ä½¿ç”¨è¯¥å±æ€§ã€‚</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f4694d5-ea46-80d4-b1e9-dbcabcad74e6"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f4694d5-ea46-8074-ac72-d843f7131984" class="">æœ‰å¿…è¦å°†URLå£°æ˜ä¸ºè™šæ‹Ÿå±æ€§ï¼Œå› ä¸ºè¿™æ ·ï¼Œé¡¹ç›®çš„URLåªéœ€è¦åœ¨ä¸€å¤„è¿›è¡Œæ›´æ”¹ï¼Œæ­¤æ—¶ä½¿ç”¨æ­¤URLçš„é“¾æ¥è¿˜ä¸èƒ½å·¥ä½œï¼Œå› ä¸ºç›®å‰è¿˜æ²¡æœ‰è®¾ç½®ä»»ä½•è·¯ç”±ï¼Œæ— æ³•å¤„ç†ç‰¹å®šæ¨¡å‹å®ä¾‹çš„ä»£ç </p></div></figure></li></ul><p id="1f4694d5-ea46-8064-be0d-c8da859a125d" class="">
</p><p id="1f4694d5-ea46-8007-b92b-d95e927653a4" class=""><strong>â€”è—ä¹¦æ¨¡å‹ï¼ˆBookï¼‰ï¼š</strong></p><ul id="1f4694d5-ea46-8069-8ddd-c2fae015bdd4" class="bulleted-list"><li style="list-style-type:disc">å¤§ä½“ç»“æ„ç±»ä¼¼äºä½œè€…æ¨¡å‹ï¼Œæœ‰ä¸‰ä¸ªå­—ç¬¦ä¸²å­—æ®µï¼Œä¸€ä¸ªç”¨äºè·å–ç‰¹å®šè—ä¹¦è®°å½•URLçš„è™šæ‹Ÿå±æ€§ï¼Œä»£ç æœ€åå¯¹æ¨¡å‹è¿›è¡Œå¯¼å‡º<ul id="1f4694d5-ea46-8032-b70e-e3397519e201" class="bulleted-list"><li style="list-style-type:circle">const mongoose = require(&quot;mongoose&quot;);<p id="1f4694d5-ea46-8083-a0d3-cee6025c7a6f" class="">const Schema = mongoose.Schema;</p><p id="1f4694d5-ea46-800c-8b81-fa47f069a65f" class="">const BookSchema = new Schema({<br/>title: { type: String, required: true },<br/>author: { type: Schema.Types.ObjectId, ref: &quot;Author&quot;, required: true },<br/>summary: { type: String, required: true },<br/>isbn: { type: String, required: true },<br/>genre: [{ type: Schema.Types.ObjectId, ref: &quot;Genre&quot; }],<br/>});<br/></p><p id="1f4694d5-ea46-80c6-832a-f86b648daf3c" class="">// è™šæ‹Ÿå±æ€§&#x27;url&#x27;ï¼šè—ä¹¦ URL<br/>BookSchema.virtual(&quot;url&quot;).get(function () {<br/>return &quot;/catalog/book/&quot; + this._id;<br/>});<br/></p><p id="1f4694d5-ea46-8098-8d12-f9668e97c871" class="">// å¯¼å‡º Book æ¨¡å—<br/>module.exports = mongoose.model(&quot;Book&quot;, BookSchema);<br/></p></li></ul></li></ul><ul id="1f4694d5-ea46-80b2-a3e4-cc3b27cc9b21" class="bulleted-list"><li style="list-style-type:disc">ä¸»è¦åŒºåˆ«åœ¨äºï¼šæ­¤å¤„æœ‰ä¸¤ä¸ªå­—æ®µæ˜¯å¯¹å…¶ä»–æ¨¡å‹çš„å¼•ç”¨<ul id="1f4694d5-ea46-801a-aae4-d01c896b6748" class="bulleted-list"><li style="list-style-type:circle">authoræ˜¯å¯¹å•ä¸€Authoræ¨¡å‹å¯¹è±¡çš„å¼•ç”¨ï¼Œè€Œä¸”æ˜¯å¿…é¡»çš„</li></ul><ul id="1f4694d5-ea46-80bb-a4b3-cc1b565de22d" class="bulleted-list"><li style="list-style-type:circle">genreæ˜¯å¯¹Genreæ¨¡å‹å¯¹è±¡æ•°ç»„çš„å¼•ç”¨</li></ul></li></ul><p id="1f4694d5-ea46-80fe-8541-e8124c8a9619" class="">
</p><p id="1f4694d5-ea46-8064-a5cd-ef1849691533" class=""><strong>â€”è—ä¹¦å‰¯æœ¬æ¨¡å‹ï¼ˆBookInstanceï¼‰ï¼š</strong></p><ul id="1f4694d5-ea46-8043-8886-de90848fdf51" class="bulleted-list"><li style="list-style-type:disc">è¯¥æ¨¡å‹è¡¨ç¤ºå¯ä¾›å€Ÿé˜…çš„è—ä¹¦çš„ç‰¹å®šå‰¯æœ¬ï¼Œå…¶ä¸­åŒ…å«è¯¥å‰¯æœ¬æ˜¯å¦å¯ç”¨ã€å¹»æœ¯æœŸé™ã€å‡ºç‰ˆæ‰¹æ¬¡ã€ç‰ˆæœ¬è¯¦ç»†ä¿¡æ¯ç­‰<ul id="1f4694d5-ea46-808c-9ccc-cec2543d5a80" class="bulleted-list"><li style="list-style-type:circle">const mongoose = require(&quot;mongoose&quot;);<p id="1f4694d5-ea46-80c9-a650-cb24b6d66956" class="">const Schema = mongoose.Schema;</p><p id="1f4694d5-ea46-80b0-8e85-cd79bc9fdb75" class="">const BookInstanceSchema = new Schema({<br/>// æŒ‡å‘ç›¸å…³è—ä¹¦çš„å¼•ç”¨<br/>book: { type: Schema.Types.ObjectId, ref: &quot;Book&quot;, required: true },<br/>// å‡ºç‰ˆé¡¹<br/>imprint: { type: String, required: true },<br/>status: {<br/>type: String,<br/>required: true,<br/>enum: [&quot;Available&quot;, &quot;Maintenance&quot;, &quot;Loaned&quot;, &quot;Reserved&quot;],<br/>default: &quot;Maintenance&quot;,<br/>},<br/>due_back: { type: Date, default: Date.now },<br/>});<br/></p><p id="1f4694d5-ea46-80fc-86b5-d3447b1d2224" class="">// è™šæ‹Ÿå±æ€§&#x27;url&#x27;ï¼šè—ä¹¦å‰¯æœ¬ URL<br/>BookInstanceSchema.virtual(&quot;url&quot;).get(function () {<br/>return &quot;/catalog/bookinstance/&quot; + this._id;<br/>});<br/></p><p id="1f4694d5-ea46-807a-9f0f-d48e52b7b0e5" class="">// å¯¼å‡º BookInstance æ¨¡å‹<br/>module.exports = mongoose.model(&quot;BookInstance&quot;, BookInstanceSchema);<br/></p></li></ul></li></ul><ul id="1f4694d5-ea46-8030-94be-e0b2db297357" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°ä»£ç æ·»åŠ äº†å­—æ®µé€‰é¡¹<ul id="1f4694d5-ea46-8008-a23c-ce92fbdd7a0a" class="bulleted-list"><li style="list-style-type:circle">enumï¼šå¯ä»¥è®¾ç½®å­—ç¬¦ä¸²å…è®¸çš„å€¼ï¼Œæœ¬ä¾‹ä¸­å¯æŒ‡å®šä¹¦è®°çš„çŠ¶æ€ï¼ˆä½¿ç”¨ç¾å‰§å¯ä»¥é¿å…çŠ¶æ€ä¸­å‡ºç°é”™è¯¯æ‹¼å†™æˆ–ä¸å…è®¸çš„å€¼ï¼‰</li></ul><ul id="1f4694d5-ea46-80fc-ac17-c861e082c28a" class="bulleted-list"><li style="list-style-type:circle">defaultï¼šå³é»˜è®¤å€¼å¯ä»¥è®¾å®šæ–°å»ºè—ä¹¦å®ä¾‹çš„é»˜è®¤çŠ¶æ€ï¼ˆé¦†è—ç»´æŠ¤ingï¼‰ï¼Œè¿˜å¯ä»¥å¥–é—¨äººè¿˜ä¹¦æœŸé™æ—¥æœŸï¼ˆdue_backï¼‰è®¾ç½®ä¸ºä»Šå¤©ï¼ˆnowï¼‰ï¼ˆè®¾ç½®æ—¥æœŸæ—¶æ³¨æ„Dateå‡½æ•°çš„ç”¨æ³•ï¼‰</li></ul></li></ul><p id="1f4694d5-ea46-80c4-99e3-dd26e67ac50b" class="">
</p><p id="1f4694d5-ea46-80a4-be39-e6279a16e138" class=""><strong>â€”å›¾ä¹¦ç§ç±»æ¨¡å‹ï¼ˆGenreï¼‰ï¼š</strong></p><ul id="1f4694d5-ea46-80ac-96bd-cb32a8486ba5" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºæ¨¡å¼æ¥å­˜å‚¨Genreï¼ˆä¹¦æœ¬ç±»åˆ«ã€å°è¯´ã€çºªå®ç±»ã€çˆ±æƒ…ã€å†›äº‹ã€å†å²ç­‰ï¼‰</li></ul><ul id="1f4694d5-ea46-80a7-b226-e29f6cc76b4d" class="bulleted-list"><li style="list-style-type:disc">ä¸ä¹‹å‰æ¨¡å‹å®šä¹‰æ–¹å¼ç±»ä¼¼<ul id="1f4694d5-ea46-8021-9540-f5c1639c6535" class="bulleted-list"><li style="list-style-type:circle">æœ‰Stringæ¨¡å¼ç±»å‹ï¼Œå‘½åä¸ºnameï¼Œç”¨æ¥æè¿°å›¾ä¹¦ç§ç±»</li></ul><ul id="1f4694d5-ea46-8098-8b0e-d4e65c5f65eb" class="bulleted-list"><li style="list-style-type:circle">nameå­—æ®µæ˜¯å¿…é¡»çš„ï¼Œ3-100å­—ç¬¦</li></ul><ul id="1f4694d5-ea46-8091-824a-d80266f509fe" class="bulleted-list"><li style="list-style-type:circle">å£°æ˜è™šæ‹Ÿå±æ€§ï¼Œå‘½åä¸ºurlï¼Œè¿”å›å›¾ä¹¦ç±»å‹URL</li></ul><ul id="1f4694d5-ea46-80a3-9bfe-d518051270fe" class="bulleted-list"><li style="list-style-type:circle">å¯¼å‡ºæ¨¡å‹</li></ul><p id="1f4694d5-ea46-8089-a9b1-f4ba2ca0b6fe" class="">
</p><p id="1f4694d5-ea46-803a-b0b8-eff1f31fd0c0" class="">
</p></li></ul><p id="1f4694d5-ea46-8026-879e-e73a810393b5" class=""><strong>ã€æµ‹è¯•-æ·»åŠ é¡¹ç›®ã€‘ï¼š</strong></p><ul id="1f4694d5-ea46-8044-8d7d-defe7e59b074" class="bulleted-list"><li style="list-style-type:disc">æµ‹è¯•æ¨¡å‹ï¼Œå¹¶æ·»åŠ ä¸€äº›ç¤ºä¾‹è—ä¹¦å’Œé¡¹ç›®ä¾¿äºä»¥åä½¿ç”¨ã€‚</li></ul><ul id="1f4694d5-ea46-8008-8978-e4d08e15708d" class="bulleted-list"><li style="list-style-type:disc">è¿è¡Œä¸€ä¸ªå•ç‹¬çš„è„šæœ¬ä¸ºæ¯ç§ç±»å‹åˆ›å»ºä¸€äº›é¡¹ç›®<ul id="1f4694d5-ea46-8093-8027-f33c274d0ed4" class="bulleted-list"><li style="list-style-type:circle">ä¸‹è½½populatedb.jsï¼Œä¿å­˜åœ¨express-locallibrary-tutorialç›®å½•ï¼ˆpackage.jsonæ‰€åœ¨ä½ç½®ï¼‰</li></ul><ul id="1f4694d5-ea46-80f6-90b1-f9e59c356947" class="bulleted-list"><li style="list-style-type:circle">åœ¨é¡¹ç›®æ ¹ç›®å½•è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œæ¥å®‰è£…è„šæœ¬æ‰€éœ€çš„å¼‚æ­¥æ¨¡å—<ul id="1f4694d5-ea46-80ea-86f4-f976bf2fa444" class="bulleted-list"><li style="list-style-type:square">npm install async</li></ul></li></ul><ul id="1f4694d5-ea46-8098-8d9e-d2f19834c844" class="bulleted-list"><li style="list-style-type:circle">åœ¨å‘½ä»¤è¡Œç”¨nodeè¿è¡Œæ­¤è„šæœ¬å¹¶ä»¥ä¸€MongoDBæ•°æ®åº“çš„urlä½œä¸ºå‚æ•°ï¼ˆåŒapp.jsä¸­æ›¿æ¢çš„URLä¸€è‡´ï¼‰<ul id="1f4694d5-ea46-808f-b930-cc866dbd4105" class="bulleted-list"><li style="list-style-type:square">node populatedb &lt;mongodb url&gt;<ul id="1f4694d5-ea46-8021-b61a-ed42d05a364f" class="bulleted-list"><li style="list-style-type:disc">ä¸€èˆ¬ä¸ºmongodb://127.0.0.1:27017/name</li></ul></li></ul></li></ul><ul id="1f4694d5-ea46-8054-9507-db1d92e908f6" class="bulleted-list"><li style="list-style-type:circle">è¯¥è„šæœ¬åº”ä¸€è·¯è¿è¡Œè‡³å®Œæˆï¼Œå¹¶åœ¨ç»ˆç«¯ä¸­è®°å½•æ‰€åˆ›å»ºçš„é¡¹ç›®</li></ul></li></ul><p id="1f5694d5-ea46-80c2-9240-d80d76825112" class="">
</p><p id="1f5694d5-ea46-8058-84db-df3d6afbebcd" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬ä¸‰æ­¥-è·¯ç”±å’Œæ§åˆ¶å™¨ã€‘ï¼š</span></strong></p><p id="1f5694d5-ea46-8069-aa3c-e4354535166d" class="">ä¸ºè¯¥é¡¹ç›®éœ€è¦çš„æ‰€æœ‰èµ„æºç«¯ç‚¹è®¾ç½®ä¸ºå…·æœ‰è™šæ‹Ÿå¤„ç†å™¨å‡½æ•°çš„è·¯ç”±ï¼ˆURLå¤„ç†ä»£ç ï¼‰ã€‚å®Œæˆåï¼Œå°±æœ‰äº†è·¯ç”±å¤„ç†ä»£ç çš„æ¨¡å—åŒ–è§£æ„</p><p id="1f5694d5-ea46-80e4-99cf-caa5b6164501" class="">
</p><p id="1f5694d5-ea46-80bf-9bd0-e71a50c50b7f" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f5694d5-ea46-80f4-9cc5-fc8a2067fc3a" class="bulleted-list"><li style="list-style-type:disc">ä¸Šä¸€æ­¥å®šä¹‰äº†ä¸æ•°æ®åº“äº¤äº’çš„Mongooseæ¨¡å‹ï¼Œå¹¶ä½¿ç”¨äº†ä¸€ä¸ªç‹¬ç«‹çš„è„šæœ¬åˆ›å»ºäº†ä¸€äº›åˆå§‹çš„å›¾ä¹¦é¦†è®°å½•ï¼Œç°åœ¨æ¥ç¼–å†™ä»£ç å‘ç”¨æˆ·æ¥å±•ç¤ºè¿™äº›ä¿¡æ¯ã€‚é¦–å…ˆç¡®å®šè¦åœ¨é¡µé¢ä¸­æ˜¾ç¤ºå“ªäº›ä¿¡æ¯ï¼Œç„¶åå®šä¹‰é€‚å½“çš„URLæ¥è¿”å›è¿™äº›èµ„æºï¼Œä¹‹ååˆ›å»ºè·¯ç”±ï¼ˆURLå¤„ç†å™¨ï¼‰å’Œè§†å›¾ï¼ˆæ¨¡æ¿ï¼‰æ¥æ˜¾ç¤ºè¿™äº›é¡µé¢</li></ul><ul id="1f5694d5-ea46-80f5-bf98-ff297fe00811" class="bulleted-list"><li style="list-style-type:disc">ä¸‹å›¾å±•ç¤ºäº†HTTPè¯·æ±‚/å“åº”å¤„ç†çš„ä¸»æ•°æ®æµå’Œéœ€è¦å®ç°çš„è¡Œä¸ºï¼Œé€”ä¸­é™¤è§†å›¾ï¼ˆviewï¼‰å’Œè·¯ç”±ï¼ˆRouteï¼‰ä¹‹å¤–ï¼Œè¿˜å±•ç¤ºäº†æ§åˆ¶å™¨ï¼ˆControllerï¼‰ï¼Œå³å°†è·¯ç”±è¯·æ±‚çš„ä»£ç å’Œå®é™…å¤„ç†è¯·æ±‚çš„ä»£ç åˆ†ç¦»çš„å‡½æ•°ã€‚</li></ul><ul id="1f5694d5-ea46-8054-a440-e1b3cae6b206" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä¸‹æ˜¯éœ€è¦åˆ›å»ºçš„å†…å®¹<ul id="1f5694d5-ea46-80c6-8918-c26a8ad0c776" class="bulleted-list"><li style="list-style-type:circle">æ¨¡å‹ï¼ˆä¸Šä¸€æ­¥å®Œæˆï¼‰</li></ul><ul id="1f5694d5-ea46-80a4-8a4f-ef7e8f041b2a" class="bulleted-list"><li style="list-style-type:circle">è·¯ç”±ï¼šæŠŠéœ€è¦æ”¯æŒçš„è¯·æ±‚ï¼ˆä»¥åŠè¯·æ±‚URLä¸­ç¼–ç çš„ä»»ä½•ä¿¡æ¯ï¼‰è½¬å‘åˆ°é€‚å½“çš„æ§åˆ¶å™¨å‡½æ•°</li></ul><ul id="1f5694d5-ea46-8071-a4ff-c029a86693da" class="bulleted-list"><li style="list-style-type:circle">æ§åˆ¶å™¨å‡½æ•°ï¼šä»æ¨¡å‹ä¸­è·å–è¯·æ±‚çš„æ•°æ®ï¼Œåˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºæ•°æ®çš„HTMLé¡µé¢ï¼Œå¹¶å°†é¡µé¢è¿”å›ç»™ç”¨æˆ·ï¼Œä»¥ä¾¿åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹</li></ul><ul id="1f5694d5-ea46-80bd-b80a-e302b0dcf1cd" class="bulleted-list"><li style="list-style-type:circle">è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰ï¼šä¾›æ§åˆ¶å™¨æ¥æ¸²æŸ“æ•°æ®</li></ul><figure id="1f5694d5-ea46-808f-83f8-d183b10d3253" class="image"><a href="image%204.png"><img style="width:533.1749877929688px" src="image%204.png"/></a></figure></li></ul><ul id="1f5694d5-ea46-80ac-b4ef-dc7850e38c7c" class="bulleted-list"><li style="list-style-type:disc">æœ€ç»ˆéœ€è¦æ˜¾ç¤ºå›¾ä¹¦ã€å›¾ä¹¦ç§ç±»ã€ä½œè€…ã€å›¾ä¹¦å‰¯æœ¬çš„åˆ—è¡¨å’Œè¯¦ç»†ä¿¡æ¯çš„é¡µé¢ï¼Œè¿˜éœ€è¦é¡µé¢æ¥åˆ›å»ºã€æ›´æ–°å’Œåˆ é™¤è®°å½•ã€‚<ul id="1f5694d5-ea46-8020-be81-d65670ee1d89" class="bulleted-list"><li style="list-style-type:circle">æœ¬æ­¥éª¤ä¸»è¦é›†ä¸­åœ¨è·¯ç”±å’Œæ§åˆ¶å™¨è®¾ç½®ã€‚</li></ul></li></ul><p id="1f5694d5-ea46-802b-9312-e4f0a01547d0" class="">
</p><p id="1f5694d5-ea46-80ee-b2cf-ee108f4f47b6" class=""><strong>è·¯ç”±å…¥é—¨ï¼š</strong></p><ul id="1f5694d5-ea46-8053-920a-c4ec4626c2bb" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±æ˜¯ä¸€æ®µExpressä»£ç ï¼Œå°†HTTPåŠ¨è¯ï¼ˆGETã€POSTã€PUTã€DELETEç­‰ï¼‰ã€URLè·¯å¾„/æ¨¡å¼ã€å¤„ç†å‡½æ•°ä¸‰è€…å…³è”èµ·æ¥</li></ul><ul id="1f5694d5-ea46-807a-bcb6-e7572a270773" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºè·¯ç”±æœ‰å¾ˆå¤šæ–¹æ³•ï¼Œæœ¬æ­¥éª¤ä½¿ç”¨express.Routerä¸­é—´ä»¶ã€‚å¯ä»¥å°†ç½‘ç«™ç‰¹å®šéƒ¨åˆ†çš„è·¯ç”±å¤„ç†å™¨åˆ†ç»„åœ¨ä¸€èµ·å¹¶ä½¿ç”¨å…±åŒçš„è·¯ç”±å‰ç¼€è®¿é—®ä»–ä»¬ã€‚<ul id="1f5694d5-ea46-80f6-994f-c3204b3a9945" class="bulleted-list"><li style="list-style-type:circle">å°†æ‰€æœ‰ä¸å›¾ä¹¦é¦†ç›¸å…³çš„è·¯ç”±éƒ½ä¿å­˜åœ¨catalogï¼ˆç›®å½•ï¼‰æ¨¡å—ä¸­ï¼Œå¦‚æœæˆ‘ä»¬æ·»åŠ äº†ç”¨äºå¤„ç†ç”¨æˆ·è´¦æˆ·æˆ–å…¶ä»–åŠŸèƒ½çš„è·¯ç”±ï¼Œå¯ä»¥å°†å…¶å•ç‹¬åˆ†ç»„</li></ul></li></ul><p id="1f5694d5-ea46-806c-bc3c-ca5763f9b76c" class="">
</p><p id="1f5694d5-ea46-80fe-acf4-dcfba4c8213a" class=""><strong>å®šä¹‰å’Œä½¿ç”¨å•ç‹¬çš„è·¯ç”±æ¨¡å—ï¼š</strong></p><ul id="1f5694d5-ea46-801a-b3c5-d6b1cbd89674" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢ç¤ºä¾‹è¯´æ˜å¦‚ä½•åˆ›å»ºè·¯ç”±æ¨¡å—ï¼Œä»¥åŠå¦‚ä½•åœ¨Expressåº”ç”¨ä¸­ä½¿ç”¨å®ƒ<ul id="1f5694d5-ea46-80d4-ac93-cad65eda49b6" class="bulleted-list"><li style="list-style-type:circle">é¦–å…ˆåœ¨wiki.jsæ¨¡å—ä¸­åˆ›å»ºä¸€ä¸ªç»´åŸºè·¯ç”±ã€‚ä»£ç ä¸€å¼€å§‹å¯¼å…¥Expressåº”ç”¨å¯¹è±¡ï¼Œä½¿ç”¨å®ƒè·å¾—ä¸€ä¸ªRouterå¯¹è±¡ï¼Œç„¶åç”¨getï¼ˆï¼‰æ–¹æ³•å‘å…¶æ·»åŠ ä¸¤ä¸ªå…·ä½“çš„è·¯ç”±ã€‚æ¨¡å—çš„æœ€åå¯¼å‡ºè¯¥Routerå¯¹è±¡<ul id="1f5694d5-ea46-80b4-9e79-c33d8701d6c6" class="bulleted-list"><li style="list-style-type:square">// wiki.js - ç»´åŸºè·¯ç”±æ¨¡å—<p id="1f5694d5-ea46-806d-8082-d5ef8c9be66f" class="">const express = require(&quot;express&quot;);<br/>const router = express.Router();<br/></p><p id="1f5694d5-ea46-8062-80aa-d54e03feedab" class="">// ä¸»é¡µè·¯ç”±<br/>router.get(&quot;/&quot;, (req, res) =&gt; {<br/>res.send(&quot;ç»´åŸºä¸»é¡µ&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8055-bd20-c077d9e171a6" class="">// â€œå…³äºé¡µé¢â€è·¯ç”±<br/>router.get(&quot;/about&quot;, (req, res) =&gt; {<br/>res.send(&quot;å…³äºæ­¤ç»´åŸº&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8022-be51-fd784e005b70" class="">module.exports = router;</p></li></ul></li></ul><ul id="1f5694d5-ea46-80fa-b8ed-cf9357964059" class="bulleted-list"><li style="list-style-type:circle">åœ¨ä¸»åº”ç”¨ä¸­ä½¿ç”¨è¯¥è·¯ç”±æ¨¡å—ï¼Œé¦–å…ˆåº”è¯¥requireï¼ˆï¼‰å®ƒï¼Œç„¶åå†Expressåº”ç”¨å¯¹è±¡ä¸Šè°ƒç”¨useï¼ˆï¼‰ï¼ˆæŒ‡å®šURLè·¯å¾„wikiï¼‰ï¼Œå³å¯å°†å…¶æ·»åŠ åˆ°ä¸­é—´ä»¶å¤„ç†è·¯å¾„<ul id="1f5694d5-ea46-8049-a971-db2194990443" class="bulleted-list"><li style="list-style-type:square">const wiki = require(&quot;./wiki.js&quot;);<br/>// â€¦<br/>app.use(&quot;/wiki&quot;, wiki);<br/></li></ul></li></ul><ul id="1f5694d5-ea46-809a-8d3b-e4cc46ff6e82" class="bulleted-list"><li style="list-style-type:circle">è¿™é‡Œwikiæ¨¡å—ä¸­å®šä¹‰çš„ä¸¤ä¸ªè·¯ç”±å°±å¯ä»¥ä»/wiki/å’Œ/wiki/about/è®¿é—®äº†</li></ul></li></ul><p id="1f5694d5-ea46-8074-8c5c-ec60aec5e950" class="">
</p><p id="1f5694d5-ea46-8004-98bf-ccc2b6f28802" class=""><strong>è·¯ç”±å‡½æ•°ï¼š</strong></p><ul id="1f5694d5-ea46-80eb-bd8e-f2aca5dfa0ac" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°æ¨¡å—å®šä¹‰äº†ä¸¤ä¸ªå…¸å‹çš„è·¯ç”±å‡½æ•°ï¼Œrouter.getï¼ˆï¼‰æ–¹æ³•å®šä¹‰çš„aboutè·¯ç”±ï¼Œä»…å“åº”HTTP GETè¯·æ±‚ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ—¶URLè·¯å¾„ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å›è°ƒå‡½æ•°ï¼Œæ”¶åˆ°å¸¦æœ‰è·¯å¾„çš„HTTP GETè¯·æ±‚ä¼šè°ƒç”¨å®ƒ<ul id="1f5694d5-ea46-80e8-90ce-e69f7423ed7e" class="bulleted-list"><li style="list-style-type:circle">router.get(&quot;/about&quot;, (req, res) =&gt; {<br/>res.send(&quot;å…³äºæ­¤ç»´åŸº&quot;);<br/>});<br/></li></ul></li></ul><ul id="1f5694d5-ea46-8012-90cf-ee181bb59191" class="bulleted-list"><li style="list-style-type:disc">å›è°ƒå‡½æ•°æœ‰ä¸‰ä¸ªå‚æ•°ï¼ˆé€šå¸¸å‘½åä¸ºï¼šreqã€resã€nextï¼‰ï¼Œåˆ†åˆ«ä¸ºHTTPè¯·æ±‚å¯¹è±¡ï¼ŒHTTPå“åº”ï¼Œä¸­é—´ä»¶é“¾ä¸­çš„ä¸‹ä¸€ä¸ªå‡½æ•°</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f5694d5-ea46-8091-994c-f73a64798408"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f5694d5-ea46-8032-af79-d63aced9efef" class="">è·¯ç”±å‡½æ•°å°±æ˜¯Â Express ä¸­é—´ä»¶ï¼Œè¿™æ„å‘³ç€å®ƒä»¬è¦ä¹ˆï¼ˆé€šè¿‡å“åº”ï¼‰ç»“æŸè¯·æ±‚ï¼Œè¦ä¹ˆè°ƒç”¨é“¾ä¸­çš„Â <code>next</code>Â å‡½æ•°ã€‚åœ¨ä¸Šè¿°ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨Â <code>send()</code>Â å®Œæˆäº†è¯·æ±‚ï¼Œå› è€Œæ²¡æœ‰ç”¨ä¸ŠÂ <code>next</code>Â å‚æ•°ï¼ˆå‚æ•°è¡¨ä¸­å°†å…¶çœç•¥ï¼‰ã€‚</p><p id="1f5694d5-ea46-80f2-bad1-f0ed99bc3b0c" class="">ä¸Šè¿°è·¯ç”±å‡½æ•°åªéœ€è¦ä¸€ä¸ªå›è°ƒã€‚æˆ‘ä»¬å¯ä»¥æ ¹æ®éœ€è¦æŒ‡å®šä»»æ„æ•°é‡çš„å›è°ƒå‚æ•°æˆ–ä¸€ä¸ªå›è°ƒå‡½æ•°æ•°ç»„ã€‚æ¯ä¸ªå‡½æ•°éƒ½å°†åŠ å…¥ä¸­é—´ä»¶é“¾ï¼Œå¹¶ä¸”å°†æŒ‰æ·»åŠ é¡ºåºè°ƒç”¨ï¼ˆè‹¥æœ‰å›è°ƒå®Œæˆè¯·æ±‚åˆ™ä¸­æ­¢å½“å‰å‘¨æœŸï¼‰ã€‚</p></div></figure><ul id="1f5694d5-ea46-8002-ad0c-c85ec42cf3c5" class="bulleted-list"><li style="list-style-type:disc">æ­¤å¤„çš„å›è°ƒæ˜¯å¯¹å“åº”å¯¹è±¡è°ƒç”¨sendï¼ˆï¼‰ï¼Œå½“æ”¶åˆ°å¸¦æœ‰è·¯å¾„/aboutçš„GETè¯·æ±‚æ—¶å°†è¿”å›å­—ç¬¦ä¸²â€™å…³äºæ­¤ç»´åŸºâ€˜ã€‚<ul id="1f5694d5-ea46-80f7-ad66-f14251aaa4b9" class="bulleted-list"><li style="list-style-type:circle">è¿˜æœ‰å¾ˆå¤šå¯ä»¥ç»“æŸè¯·æ±‚/å“åº”å‘¨æœŸç›¸åº”æ–¹æ³•ï¼Œä¾‹å¦‚å¯ä»¥è°ƒç”¨res.jsonï¼ˆï¼‰æ¥å‘é€JSONå“åº”ï¼Œæˆ–è€…è°ƒç”¨res.sendFileï¼ˆï¼‰æ¥å‘é€æ–‡ä»¶ã€‚</li></ul></li></ul><ul id="1f5694d5-ea46-80e5-bb33-e4fd2ac33a31" class="bulleted-list"><li style="list-style-type:disc">æ„å»ºæœ¬é¡¹ç›®æœ€å¸¸ç”¨çš„æ˜¯renderï¼ˆï¼‰ç›¸åº”æ–¹æ³•ï¼Œå®ƒä½¿ç”¨æ¨¡æ¿å’Œæ•°æ®åˆ›å»ºå¹¶è¿”å›HTMLæ–‡ä»¶ã€‚</li></ul><p id="1f5694d5-ea46-8072-849d-c9eff14999c2" class="">
</p><p id="1f5694d5-ea46-80fe-b255-f2891a9e61fc" class=""><strong>HTTPåŠ¨è¯ï¼š</strong></p><ul id="1f5694d5-ea46-8081-b20d-db9dd8826723" class="bulleted-list"><li style="list-style-type:disc">ä¸Šé¢ç¤ºä¾‹ä½¿ç”¨Router.getï¼ˆï¼‰æ–¹æ³•æ¥å“åº”ç‰¹å®šè·¯å¾„çš„HTTP GET è¯·æ±‚</li></ul><ul id="1f5694d5-ea46-80c6-afa6-c5e3f2059f33" class="bulleted-list"><li style="list-style-type:disc">Routerè¿˜ä¸ºå…¶ä»–HTTPåŠ¨è¯æä¾›è·¯ç”±æ–¹æ³•ï¼Œå¤§å¤šç”¨æ³•ç›¸åŒï¼š<ul id="1f5694d5-ea46-80ff-a511-fdadc818c337" class="bulleted-list"><li style="list-style-type:circle">postï¼ˆï¼‰ã€putï¼ˆï¼‰ã€deleteï¼ˆï¼‰ã€optionsï¼ˆï¼‰ã€traceï¼ˆï¼‰ã€copyï¼ˆï¼‰ã€lockï¼ˆï¼‰ã€mkcolï¼ˆï¼‰ã€moveï¼ˆï¼‰ã€purgeï¼ˆï¼‰ã€propfindï¼ˆï¼‰ã€proppatchï¼ˆï¼‰ã€unlockï¼ˆï¼‰ã€reportï¼ˆï¼‰ã€mkactivityï¼ˆï¼‰ã€checkoutï¼ˆï¼‰ã€mergeï¼ˆï¼‰ã€m-searchï¼ˆï¼‰ã€notifyï¼ˆï¼‰ã€subscribeï¼ˆï¼‰ã€patchï¼ˆï¼‰ã€searchï¼ˆï¼‰å’Œconnectï¼ˆï¼‰</li></ul></li></ul><ul id="1f5694d5-ea46-8040-9b3f-e075967e9fa5" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢ç¤ºä¾‹ä»£ç åŒä¸Šæ–¹/aboutè·¯å¾„è¡Œä¸ºä¸€ç›´ï¼Œä½†åªå“åº”HTTP POSTè¯·æ±‚<ul id="1f5694d5-ea46-8088-9e6d-f7c058c1848b" class="bulleted-list"><li style="list-style-type:circle">router.post(&quot;/about&quot;, (req, res) =&gt; {<br/>res.send(&quot;å…³äºæ­¤ç»´åŸº&quot;);<br/>});<br/></li></ul></li></ul><p id="1f5694d5-ea46-8095-9fd0-f707230f9d1c" class="">
</p><p id="1f5694d5-ea46-80b8-882f-c87c6c79b1db" class=""><strong>è·¯ç”±è·¯å¾„ï¼š</strong></p><ul id="1f5694d5-ea46-80ce-86b6-f532cc20c120" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±è·¯å¾„ç”¨äºå®šä¹‰å¯è¯·æ±‚çš„ç«¯ç‚¹ï¼Œä¹‹å‰ç¤ºä¾‹è·¯å¾„éƒ½æ˜¯å­—ç¬¦ä¸²ï¼Œè€Œä¸”å¿…é¡»ç²¾ç¡®åˆ°â€™/â€˜ã€â€˜/aboutâ€™ã€â€™/bookâ€˜ç±»ä¼¼</li></ul><ul id="1f5694d5-ea46-8090-bc78-ed3da7987838" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±è·¯å¾„ä¹Ÿå¯ä»¥æ˜¯å­—ç¬¦ä¸²æ¨¡å¼ï¼ˆstring patternï¼‰ã€‚å­—ç¬¦ä¸²æ¨¡å¼ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ¥å®šä¹‰å°†åŒ¹é…çš„ç«¯ç‚¹æ¨¡å¼ã€‚è¯­æ³•å¦‚ä¸‹ï¼ˆæ³¨æ„è¿å­—ç¬¦-å’Œç‚¹.å†åŸºäºå­—ç¬¦ä¸²è·¯å¾„ä¸­è¢«è§£é‡Šä¸ºå­—é¢é‡ï¼‰<ul id="1f5694d5-ea46-80a4-8c8c-f716d28e2b00" class="bulleted-list"><li style="list-style-type:circle">ï¼Ÿï¼šé—®å·ä¹‹å‰çš„å­—ç¬¦åªèƒ½å‡ºç°é›¶æ¬¡æˆ–ä¸€æ¬¡ï¼Œä¾‹å¦‚è·¯ç”±è·¯å¾„â€™/abï¼Ÿcdâ€˜è·¯å¾„åŒ¹é…ç«¯ç‚¹acdæˆ–abcdç­‰</li></ul><ul id="1f5694d5-ea46-8029-9260-e6cc03c8f327" class="bulleted-list"><li style="list-style-type:circle">+ï¼šåŠ å·ä¹‹å‰çš„ä¸€ä¸ªå­—ç¬¦è‡³å°‘å‡ºç°ä¸€æ¬¡ï¼Œä¾‹å¦‚è·¯ç”±è·¯å¾„â€™/ab+cdâ€˜è·¯å¾„åŒ¹é…ç«¯ç‚¹abcdã€abbcdã€abbbcdç­‰</li></ul><ul id="1f5694d5-ea46-806f-a795-c32fd06bc24d" class="bulleted-list"><li style="list-style-type:circle"><em>*ï¼šæ˜Ÿå·å¯ä»¥æ›¿æ¢ä¸ºä»»æ„å­—ç¬¦ä¸²ï¼Œä¾‹å¦‚è·¯ç”±è·¯å¾„â€™/ab*cd</em>â€˜åŒ¹é…ç«¯ç‚¹abcdã€abXcdã€abSOMErandomTEXTcdç­‰</li></ul><ul id="1f5694d5-ea46-80e7-9a9d-c47fee00eb37" class="bulleted-list"><li style="list-style-type:circle">ï¼ˆï¼‰ï¼šå°†ä¸€ä¸ªå­—ç¬¦ä¸²è§†ä¸ºä¸€ä½“æ‰§è¡Œï¼Ÿã€+ã€*æ“ä½œï¼Œä¾‹å¦‚â€™/abï¼ˆcdï¼‰ï¼Ÿeâ€˜å°†å¯¹ï¼ˆcdï¼‰è¿›è¡ŒåŒ¹é…ï¼Œå°†åŒ¹é…åˆ°abeå’Œabcde</li></ul></li></ul><ul id="1f5694d5-ea46-806d-8000-e73dcfb05228" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±è·¯å¾„å¯ä»¥æ˜¯JSæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢è·¯ç”±è·¯å¾„å°†åŒ¹é…catfishå’Œdogfishè€Œä¸æ˜¯catflapã€catfishheadç­‰ã€‚æ³¨æ„æ­£åˆ™è¡¨è¾¾å¼è·¯å¾„ä¸å†ç”¨å¼•å·â€œâ€¦â€æ‹¬èµ·æ¥ï¼Œè€Œæ˜¯ç”¨æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•/â€¦/<ul id="1f5694d5-ea46-8039-ae7d-e31ee45cb6b2" class="bulleted-list"><li style="list-style-type:circle">app.get(/.*fish$/, (req, res) =&gt; {<br/>...<br/>});<br/></li></ul></li></ul><p id="1f5694d5-ea46-80b3-8632-d58ec1caf511" class="">
</p><p id="1f5694d5-ea46-8081-bb93-cb5107851eaf" class=""><strong>è·¯ç”±å‚æ•°ï¼š</strong></p><ul id="1f5694d5-ea46-802f-b4cf-fa1109859bf5" class="bulleted-list"><li style="list-style-type:disc">è·¯å¾„å‚æ•°æ˜¯å…·åURLç‰‡æ®µï¼Œç”¨äºæ•è·åœ¨URLä¸­çš„ä½ç½®æŒ‡å®šçš„å€¼ï¼Œå…·åæ®µä¸€å†’å·ä¸ºå‰ç¼€å¹¶ç´§æ¥ç€åç§°ï¼ˆå¦‚/ï¼šyour_name/ï¼‰ã€‚æ•è·çš„å€¼ä¿å­˜åœ¨req.paramså¯¹è±¡ä¸­ï¼Œå…¶ä¸­å‚æ•°åå¯¹åº”å¯¹è±¡çš„é”®ï¼ˆä¾‹å¦‚req.params.your_nameï¼‰</li></ul><ul id="1f5694d5-ea46-804d-aa09-da21503b565e" class="bulleted-list"><li style="list-style-type:disc">æ¯”å¦‚ï¼Œè€ƒè™‘åº”è¯¥åŒ…å«ç”¨æˆ·å’Œå›¾ä¹¦ä¿¡æ¯çš„URLhttpï¼š//localhostï¼š3000/users/34/books/8989.è¿™æ ·å°±å¯ä»¥æå–ä¿¡æ¯ï¼ˆä½¿ç”¨userIdå’ŒbookIdè·¯å¾„å‚æ•°ï¼‰<ul id="1f5694d5-ea46-8034-8bb5-e26e58af12c7" class="bulleted-list"><li style="list-style-type:circle">app.get(&quot;/users/:userId/books/:bookId&quot;, (req, res) =&gt; {<br/>// é€šè¿‡ req.params.userId è®¿é—® userId<br/>// é€šè¿‡ req.params.bookId è®¿é—® bookId<br/>res.send(req.params);<br/>});<br/></li></ul></li></ul><ul id="1f5694d5-ea46-80a1-849f-dc31070796fa" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±å‚æ•°åå¿…é¡»æœ‰å•è¯å­—ç¬¦ï¼ˆA-Zã€a-zã€0-9ã€_ï¼‰ç»„æˆ</li></ul><p id="1f5694d5-ea46-80d6-9c95-e8fe328a3525" class="">
</p><p id="1f5694d5-ea46-80e6-b2ed-ed484d30f470" class=""><strong>å¤„ç†è·¯ç”±å‡½æ•°ä¸­çš„é”™è¯¯ï¼š</strong></p><ul id="1f5694d5-ea46-805e-92be-ff700f6685c3" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°çš„è·¯ç”±å‡½æ•°éƒ½æœ‰å‚æ•°reqå’Œresï¼Œåˆ†åˆ«ä»£è¡¨è¯·æ±‚å’Œå“åº”ï¼Œè·¯ç”±å‡½æ•°è¿˜å¯ä»¥ä½¿ç”¨ç¬¬ä¸‰ä¸ªå‚æ•°nextï¼Œè¯¥å‚æ•°å¯ç”¨äºå°†é”™è¯¯ä¼ é€’ç»™Expressä¸­é—´ä»¶é“¾</li></ul><ul id="1f5694d5-ea46-8002-8781-e46b4626cc48" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢çš„ä»£ç å±•ç¤ºnextå¦‚ä½•å·¥ä½œï¼Œä½¿ç”¨ä¸€ä¸ªæ•°æ®åº“æŸ¥è¯¢çš„ç¤ºä¾‹ï¼Œè¯¥æŸ¥è¯¢é‡‡ç”¨å›è°ƒå‡½æ•°å¹¶è¿”å›é”™è¯¯erræˆ–ä¸€äº›ç»“æœã€‚å¦‚æœè¿”å›errï¼Œå°±å°†errä¼ å…¥nextæ–¹æ³•ï¼ˆæœ€ç»ˆé”™è¯¯ä¼šä¼ æ’­åˆ°æˆ‘ä»¬çš„å…¨å±€é”™è¯¯å¤„ç†ä»£ç ï¼‰ï¼Œå¦‚æœæˆåŠŸï¼Œå°†è¿”å›æ‰€éœ€çš„æ•°æ®å¹¶å°†åœ¨å“åº”ä¸­ä½¿ç”¨<ul id="1f5694d5-ea46-8061-a29a-f7440b2db809" class="bulleted-list"><li style="list-style-type:circle">router.get(&quot;/about&quot;, (req, res, next) =&gt; {<br/>About.find({}).exec((err, queryResults) =&gt; {<br/>if (err) {<br/>return next(err);<br/>}<br/>// æˆåŠŸäº†ï¼Œé‚£ä¹ˆå°±æ¸²æŸ“å§<br/>res.render(&quot;about_view&quot;, { title: &quot;About&quot;, list: queryResults });<br/>});<br/>});<br/></li></ul></li></ul><p id="1f5694d5-ea46-8040-9fda-f49bb4e991e9" class="">
</p><p id="1f5694d5-ea46-8024-adec-ff50ed3d2d92" class=""><strong>å¤„ç†è·¯ç”±å‡½æ•°ä¸­çš„å¼‚å¸¸ï¼š</strong></p><ul id="1f5694d5-ea46-800d-a8b5-c3451f6dde04" class="bulleted-list"><li style="list-style-type:disc">ä¸Šé¢å±•ç¤ºäº†ExpressæœŸæœ›è·¯ç”±å‡½æ•°è¿”å›é”™è¯¯çš„æ–¹å¼ï¼Œè¯¥æ¡†æ¶è®¾è®¡ç”¨äºå¼‚æ­¥å‡½æ•°ï¼Œè¿™äº›å‡½æ•°é‡‡ç”¨å›è°ƒå‡½æ•°ï¼ˆå¸¦æœ‰é”™è¯¯å’Œç»“æœå‚æ•°ï¼‰ï¼Œè¯¥å‡½æ•°åœ¨æ“ä½œå®Œæˆæ—¶è°ƒç”¨ã€‚<ul id="1f5694d5-ea46-8056-80be-d2a6cdbe9bdf" class="bulleted-list"><li style="list-style-type:circle">ç¨åä½¿ç”¨åŸºäºPromiseçš„APIè¿›è¡ŒMongooseæ•°æ®åº“æŸ¥è¯¢ï¼Œå¹¶ä¸”å¯èƒ½ä¼šåœ¨è·¯ç”±å‡½æ•°æŠ›å‡ºå¼‚å¸¸ï¼ˆè€Œä¸æ˜¯åœ¨å›è°ƒä¸­è¿”å›é”™è¯¯ï¼‰</li></ul></li></ul><ul id="1f5694d5-ea46-80c6-ad57-d60603cc083e" class="bulleted-list"><li style="list-style-type:disc">ä¸ºä¾‹ä½¿æ¡†æ¶æ­£ç¡®å¤„ç†å¼‚å¸¸ï¼Œè¿™äº›å¼‚å¸¸å¿…é¡»è¢«æ•è·ï¼Œç„¶åå°†å…¶ä½œä¸ºé”™è¯¯è½¬å‘ã€‚</li></ul><ul id="1f5694d5-ea46-80d9-8ba3-f274293c2ce8" class="bulleted-list"><li style="list-style-type:disc">ä¸Šä¸€èŠ‚ç¤ºä¾‹ä¸­ï¼ŒAbout.findï¼ˆï¼‰.execæ˜¯è¿”å›Promiseçš„æ•°æ®åº“æŸ¥è¯¢ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨try â€¦ catchå—å†…ç¼–å†™è·¯ç”±å‡½æ•°ï¼Œå¦‚ä¸‹<ul id="1f5694d5-ea46-80cb-a927-de68e4dc0aaa" class="bulleted-list"><li style="list-style-type:circle">exports.get(&quot;/about&quot;, async function (req, res, next) {<br/>try {<br/>const successfulResult = await About.find({}).exec();<br/>res.render(&quot;about_view&quot;, { title: &quot;About&quot;, list: successfulResult });<br/>} catch (error) {<br/>return next(error);<br/>}<br/>});<br/></li></ul></li></ul><ul id="1f5694d5-ea46-8088-b921-cf45c72eb287" class="bulleted-list"><li style="list-style-type:disc">æ¯ä¸ªå‡½æ•°éƒ½éœ€è¦æ·»åŠ å¤§é‡çš„æ ·æ¿æ ·å¼ï¼Œæœ¬é¡¹ç›®ä¸­ä½¿ç”¨express-async-handleræ¨¡å—ï¼Œå®ƒå®šä¹‰äº†ä¸€ä¸ªåŒ…è£…å™¨å‡½æ•°ï¼Œéšè—äº†try â€¦ catchå—å’Œç”¨äºè½¬å‘é”™è¯¯çš„ä»£ç ï¼Œç°åœ¨ç›¸åŒçš„ç¤ºä¾‹æ›´ä¸ºç®€å•ï¼Œåªéœ€è¦ä¸ºå‡è®¾æˆåŠŸçš„æƒ…å†µç¼–å†™ä»£ç å³å¯<ul id="1f5694d5-ea46-80b4-ad1d-d17abf0a8da0" class="bulleted-list"><li style="list-style-type:circle">// å¯¼å…¥æ¨¡å—<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f5694d5-ea46-8077-82ad-e8345bad1b4c" class="">exports.get(<br/>&quot;/about&quot;,<br/>asyncHandler(async (req, res, next) =&gt; {<br/>const successfulResult = await About.find({}).exec();<br/>res.render(&quot;about_view&quot;, { title: &quot;About&quot;, list: successfulResult });<br/>}),<br/>);<br/></p></li></ul></li></ul><p id="1f5694d5-ea46-8022-8052-fdc2ad08a364" class="">
</p><p id="1f5694d5-ea46-8052-b097-c7d5ffa25cb5" class=""><strong>å›¾ä¹¦é¦†é¡¹ç›®æ‰€éœ€çš„è·¯ç”±ï¼š</strong></p><ul id="1f5694d5-ea46-80ab-a581-e7359a011c9b" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä¸‹æ˜¯ç«™ç‚¹é¡µé¢å®Œæ•´çš„URLåˆ—è¡¨ï¼Œå…¶ä¸­objectæ˜¯æ¨¡å‹åç§°ï¼ˆbookã€bookinstanceã€genreã€authorï¼‰ï¼Œobjectsæ˜¯ä¸€ç»„æ¨¡å‹ï¼Œidæ˜¯æ¯ä¸ªMongooseæ¨¡å‹å®ä¾‹é»˜è®¤çš„æ ‡è¯†å­—æ®µï¼ˆ_idï¼‰<ul id="1f5694d5-ea46-8000-b418-d243d2abb663" class="bulleted-list"><li style="list-style-type:circle">catalog/ï¼šä¸»é¡µ</li></ul><ul id="1f5694d5-ea46-8052-bfb2-e8601f487151" class="bulleted-list"><li style="list-style-type:circle">catallog/&lt;bojects&gt;/ï¼šæ¨¡å‹ï¼ˆä¹¦æœ¬ã€å›¾ä¹¦å‰¯æœ¬ã€å›¾ä¹¦ç§ç±»ã€ä½œè€…ï¼‰çš„å®Œæ•´åˆ—è¡¨ï¼ˆä¾‹å¦‚/catalog/books/ã€/catalog/genres/ç­‰ï¼‰</li></ul><ul id="1f5694d5-ea46-8033-b544-d9aea5f3f3b1" class="bulleted-list"><li style="list-style-type:circle">catalog/&lt;boject&gt;/&lt;_id&gt;ï¼šå…·æœ‰_idå­—æ®µå€¼çš„ç‰¹å®šæ¨¡å‹çš„è¯¦ç»†é¡µé¢ï¼ˆä¾‹å¦‚/catalog/book/52727687367ï¼‰</li></ul><ul id="1f5694d5-ea46-8077-95af-c1a9e639625a" class="bulleted-list"><li style="list-style-type:circle">catalog/&lt;object&gt;/createï¼šæ·»åŠ æ–°æ¨¡å‹çš„è¡¨å•ï¼ˆä¾‹å¦‚/catalog/book/createï¼‰</li></ul><ul id="1f5694d5-ea46-8000-be60-f239b6d790a6" class="bulleted-list"><li style="list-style-type:circle">catalog/&lt;object&gt;/&lt;id&gt;/updateï¼šæ›´æ–°å…·æœ‰Â _idÂ å­—æ®µå€¼çš„ç‰¹å®šæ¨¡å‹çš„è¡¨å•ï¼ˆä¾‹å¦‚Â /catalog/book/584493c1f4887f06c0e67d37/updateï¼‰ã€‚</li></ul><ul id="1f5694d5-ea46-803b-8ec4-fd9f7fd95dec" class="bulleted-list"><li style="list-style-type:circle">catalog/&lt;object&gt;/&lt;id&gt;/deleteï¼šåˆ é™¤å…·æœ‰Â _idÂ å­—æ®µå€¼çš„ç‰¹å®šæ¨¡å‹çš„è¡¨å•ï¼ˆä¾‹å¦‚Â /catalog/book/584493c1f4887f06c0e67d37/deleteï¼‰ã€‚</li></ul></li></ul><ul id="1f5694d5-ea46-8081-94dc-e030ab208413" class="bulleted-list"><li style="list-style-type:disc">é¦–é¡µå’Œåˆ—è¡¨é¡µé¢æ²¡æœ‰åŒ…å«ä»»ä½•é¢å¤–ä¿¡æ¯ï¼Œå› æ­¤ä»–ä»¬è¿”å›çš„ç»“æœåªå–å†³äºæ¨¡å‹ç±»å‹å’Œæ•°æ®åº“å†…å®¹ï¼Œè·å–ä¿¡æ¯çš„æŸ¥è¯¢æ“ä½œæ˜¯æ’å®šä¸å˜çš„ï¼ˆç±»ä¼¼çš„ï¼Œåˆ›å»ºå¯¹è±¡çš„ä»£ç ä¹Ÿæ²¡æœ‰è¾ƒå¤§æ”¹åŠ¨ï¼‰</li></ul><ul id="1f5694d5-ea46-8008-8409-d67a8b4e6105" class="bulleted-list"><li style="list-style-type:disc">ä¸ä¹‹ç›¸åï¼Œå…¶ä»–URLæ˜¯ç”¨äºå¤„ç†ç‰¹å®šæ–‡æ¡£/æ¨¡å‹å®ä¾‹çš„ï¼Œä»–ä»¬ä¼šå°†é¡¹ç›®çš„è¡¨ç¤ºåµŒå…¥URLï¼ˆä¸Šæ–‡çš„_idï¼‰ä¸­ï¼Œå¯ä»¥ç”¨è·¯å¾„å‚æ•°æ¥æå–åµŒå…¥çš„ä¿¡æ¯ï¼Œå¹¶ä¼ é€’ç»™è·¯ç”±å¤„ç†å™¨ã€‚</li></ul><ul id="1f5694d5-ea46-8063-a5c8-c990f00368a1" class="bulleted-list"><li style="list-style-type:disc">é€šè¿‡åœ¨URLä¸­åµŒå…¥ä¿¡æ¯ï¼Œä½¿å¾—æ¯ç§ç±»å‹çš„æ‰€æœ‰èµ„æºéƒ½åªéœ€è¦ä¸€ä¸ªè·¯ç”±ï¼ˆä¾‹å¦‚ï¼Œæ‰€æœ‰å›¾ä¹¦å‰¯æœ¬çš„æ˜¾ç¤ºæ“ä½œéƒ½åªéœ€è¦ä¸€ä¸ªè·¯ç”±ï¼‰</li></ul><p id="1f5694d5-ea46-805a-be55-e1dfce766e0f" class="">
</p><p id="1f5694d5-ea46-8012-aa9e-cd8e24d25afc" class=""><strong>åˆ›å»ºè·¯ç”±å¤„ç†å™¨å›è°ƒå‡½æ•°ï¼š</strong></p><ul id="1f5694d5-ea46-80ed-9c51-e506d229232e" class="bulleted-list"><li style="list-style-type:disc">åœ¨å®šä¹‰è·¯ç”±ä¹‹å‰ï¼Œé¦–å…ˆéœ€è¦åˆ›å»ºä»–ä»¬å°†è°ƒç”¨çš„æ‰€æœ‰è™šæ‹Ÿ/æ¡†æ¶å›è°ƒå‡½æ•°ã€‚è¿™äº›å›è°ƒå‡½æ•°å°†åˆ†åˆ«å­˜å‚¨åœ¨Bookã€BookInstanceã€Genreã€Authorçš„æ§åˆ¶å™¨æ¨¡å—ä¸­ï¼ˆå¯ä»¥ä½¿ç”¨ä»»ä½•æ–‡ä»¶/æ¨¡å—è§£æ„ã€‚ï¼‰</li></ul><ul id="1f5694d5-ea46-80b3-a0e3-f126966434ab" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ä¸ºæ§åˆ¶å™¨åˆ›å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼ˆ/controllersï¼‰ï¼Œç„¶åä¸ºå¤„ç†æ¯ä¸ªæ¨¡å‹åˆ›å»ºç‹¬ç«‹çš„æ§åˆ¶å™¨æ–‡ä»¶/æ¨¡å—</li></ul><ul id="1f5694d5-ea46-80a7-8496-ca0c77b34179" class="bulleted-list"><li style="list-style-type:disc">æ§åˆ¶å™¨å°†ä½¿ç”¨express-async-handleræ¨¡å—ï¼Œä½¿ç”¨npmå®‰è£…<ul id="1f5694d5-ea46-807e-af2c-c9a15e50e8dc" class="bulleted-list"><li style="list-style-type:circle">npm install express-async-handler</li></ul></li></ul><p id="1f5694d5-ea46-8079-9892-e4c0720b6486" class="">
</p><p id="1f5694d5-ea46-807d-ac46-fa897f583187" class="">ã€Authoræ§åˆ¶å™¨ã€‘ï¼š</p><ul id="1f5694d5-ea46-808e-bb07-d6b4c392e7e6" class="bulleted-list"><li style="list-style-type:disc">å†™å…¥jsæ–‡ä»¶<ul id="1f5694d5-ea46-8064-ae1b-e8fff1c52e35" class="bulleted-list"><li style="list-style-type:circle">const Author = require(&quot;../models/author&quot;);<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f5694d5-ea46-8055-8f12-f6e17f535f8c" class="">// æ˜¾ç¤ºå®Œæ•´çš„ä½œè€…åˆ—è¡¨<br/>exports.author_list = (req, res) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šä½œè€…åˆ—è¡¨&quot;);<br/>};<br/></p><p id="1f5694d5-ea46-801e-bef5-d645ec0ad8e1" class="">// ä¸ºæ¯ä½ä½œè€…æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯çš„é¡µé¢<br/>exports.author_detail = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šä½œè€…è¯¦ç»†ä¿¡æ¯ï¼š&quot; + <br/><a href="http://req.params.id/">req.params.id</a>);<br/>});<br/></p><p id="1f5694d5-ea46-807b-bb8c-c5c4180efc1f" class="">// ç”± GET æ˜¾ç¤ºåˆ›å»ºä½œè€…çš„è¡¨å•<br/>exports.author_create_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šåˆ›å»ºä½œè€…çš„ GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8059-8f8e-c3705b964cc7" class="">// ç”± POST å¤„ç†ä½œè€…åˆ›å»ºæ“ä½œ<br/>exports.author_create_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šåˆ›å»ºä½œè€…çš„ POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8023-b8b5-c95e5e786caa" class="">// ç”± GET æ˜¾ç¤ºåˆ é™¤ä½œè€…çš„è¡¨å•<br/>exports.author_delete_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šåˆ é™¤ä½œè€…çš„ GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80e1-9b0d-fc679c3db351" class="">// ç”± POST å¤„ç†ä½œè€…åˆ é™¤æ“ä½œ<br/>exports.author_delete_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šåˆ é™¤ä½œè€…çš„ POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80fe-8487-dafee168f551" class="">// ç”± GET æ˜¾ç¤ºæ›´æ–°ä½œè€…çš„è¡¨å•<br/>exports.author_update_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæ›´æ–°ä½œè€…çš„ GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80de-a0b4-c414287fee92" class="">// ç”± POST å¤„ç†ä½œè€…æ›´æ–°æ“ä½œ<br/>exports.author_update_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæ›´æ–°ä½œè€…çš„ POST&quot;);<br/>});<br/></p></li></ul></li></ul><ul id="1f5694d5-ea46-80af-8956-ecb40605ff0a" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å—é¦–å…ˆéœ€è¦Authoræ¨¡å‹å’ŒasyncHandleråŒ…è£…å™¨ï¼ˆæ•è·è·¯ç”±å¤„ç†å‡½æ•°ä¸­æŠ›å‡ºçš„ä»»ä½•å¼‚å¸¸ï¼‰ã€‚ç„¶åå¤„ç†æ¯ä¸ªURLè¾“å‡ºå‡½æ•°ã€‚<ul id="1f5694d5-ea46-80ea-af38-d908ba62e34b" class="bulleted-list"><li style="list-style-type:circle">è¿™é‡Œåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æ“ä½œä½¿ç”¨çš„è¡¨å•ï¼Œè¿˜éœ€è¦é¢å¤–çš„æ–¹æ³•æ¥å¤„ç†è¡¨å•å‘å¸ƒè¯·æ±‚ã€‚</li></ul></li></ul><ul id="1f5694d5-ea46-80b0-a513-f3576297a57e" class="bulleted-list"><li style="list-style-type:disc">è¿™äº›å‡½æ•°éƒ½æ˜¯ç”¨äº†ä¸Šæ–‡ä¸­å¤„ç†è·¯ç”±å‡½æ•°ä¸­çš„å¼‚å¸¸ä¸­çš„å°è£…å‡½æ•°ï¼Œå…¶å‚æ•°åŒ…æ‹¬è¯·æ±‚ã€å“åº”ã€nextã€‚å‡½æ•°ä¼šå“åº”ä¸€ä¸ªå­—ç¬¦ä¸²ã€è¡¨ç¤ºç›¸å…³é¡µé¢ä¸ºåˆ›å»ºï¼Œå¦‚æœæ§åˆ¶å™¨å‡½æ•°é¢„è®¡ä¼šæ¥å—è·¯å¾„å‚æ•°ï¼Œåˆ™ä¼šåœ¨æ¶ˆæ¯ç¥–çˆ¶ä¼ ä¸­è¾“å‡ºè¿™äº›å‚æ•°</li></ul><ul id="1f5694d5-ea46-8062-809c-e77f27b20b48" class="bulleted-list"><li style="list-style-type:disc">æŸäº›è·¯ç”±å‡½æ•°åœ¨å®ç°åå¯èƒ½ä¸åŒ…å«ä»»ä½•å¯æŠ›å‡ºçš„å¼‚å¸¸ä»£ç ï¼Œå¯ä»¥ä½¿ç”¨æ—¶å°†ä»–ä»¬æ”¹å›æ­£å¸¸çš„è·¯ç”±å¤„ç†å™¨å‡½æ•°</li></ul><p id="1f5694d5-ea46-8028-b57c-fe0cf4203e1f" class="">
</p><p id="1f5694d5-ea46-8016-a7d9-dde9dfc28e4a" class="">ã€BookInstanceæ§åˆ¶å™¨ã€‘ï¼š</p><ul id="1f5694d5-ea46-807c-99df-d6930200d74d" class="bulleted-list"><li style="list-style-type:disc">å†™å…¥jsæ–‡ä»¶<ul id="1f5694d5-ea46-8010-98d3-f029b73a3b74" class="bulleted-list"><li style="list-style-type:circle">const BookInstance = require(&quot;../models/bookinstance&quot;);<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f5694d5-ea46-80f5-a85a-e5d4186a59a1" class="">// æ˜¾ç¤ºæ‰€æœ‰çš„ BookInstances<br/>exports.bookinstance_list = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance åˆ—è¡¨&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8013-aefa-db11e11dc2a9" class="">// æ˜¾ç¤ºç‰¹å®š BookInstance çš„è¯¦æƒ…é¡µ<br/>exports.bookinstance_detail = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(<br/><code>æœªå®ç°ï¼šBookInstance è¯¦æƒ…é¡µé¢ï¼š${req.params.id}</code>);<br/>});<br/></p><p id="1f5694d5-ea46-8030-a9b5-f09634f5abd1" class="">// ç”± GET æ˜¾ç¤ºåˆ›å»º BookInstance çš„è¡¨å•<br/>exports.bookinstance_create_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance åˆ›å»º GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8074-a06c-db3e1189d9e5" class="">// ç”± POST å¤„ç†åˆ›å»º BookInstance<br/>exports.bookinstance_create_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance åˆ›å»º POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-802c-a46b-fee4d4f3ac92" class="">// ç”± GET æ˜¾ç¤ºåˆ é™¤ BookInstance çš„è¡¨å•<br/>exports.bookinstance_delete_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance åˆ é™¤ GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80a2-9759-e0078b884bdc" class="">// ç”± POST åˆ é™¤ BookInstance<br/>exports.bookinstance_delete_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance åˆ é™¤ POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80e8-a281-f9ad71042857" class="">// ç”± GET æ˜¾ç¤ºæ›´æ–° BookInstance çš„è¡¨å•<br/>exports.bookinstance_update_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance æ›´æ–° GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8053-8922-e7136793bc9d" class="">// ç”± POST å¤„ç†æ›´æ–° BookInstance<br/>exports.bookinstance_update_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šBookInstance æ›´æ–° POST&quot;);<br/>});<br/></p></li></ul></li></ul><p id="1f5694d5-ea46-8064-8cfc-cf6ec711cdf5" class="">
</p><p id="1f5694d5-ea46-802d-9fd8-e0d6290956c0" class="">ã€Genreæ§åˆ¶å™¨ã€‘ï¼š</p><ul id="1f5694d5-ea46-80c2-bf1f-f272f43fe18e" class="bulleted-list"><li style="list-style-type:disc">å†™å…¥jsæ–‡ä»¶<ul id="1f5694d5-ea46-8036-8a43-d5d28096d92a" class="bulleted-list"><li style="list-style-type:circle">const genre = require(&quot;../models/genre&quot;);<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f5694d5-ea46-80ac-a628-c33b0e1fd418" class="">// æ˜¾ç¤ºæ‰€æœ‰çš„æµæ´¾ã€‚<br/>exports.genre_list = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾åˆ—è¡¨&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8040-a9b5-e43c83824b06" class="">// æ˜¾ç¤ºç‰¹å®šæµæ´¾çš„è¯¦æƒ…é¡µã€‚<br/>exports.genre_detail = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(<br/><code>æœªå®ç°ï¼šæµæ´¾è¯¦æƒ…é¡µï¼š${req.params.id}</code>);<br/>});<br/></p><p id="1f5694d5-ea46-808d-914b-d522e994b963" class="">// é€šè¿‡ GET æ˜¾ç¤ºåˆ›å»ºæµæ´¾ã€‚<br/>exports.genre_create_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾åˆ›å»º GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-80aa-be68-e5ed11e0d49e" class="">// ä»¥ POST æ–¹å¼å¤„ç†åˆ›å»ºæµæ´¾ã€‚<br/>exports.genre_create_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾åˆ›å»º POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-806b-bef6-f2006ca7aac4" class="">// é€šè¿‡ GET æ˜¾ç¤ºæµæ´¾åˆ é™¤è¡¨å•ã€‚<br/>exports.genre_delete_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾åˆ é™¤ GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-807e-ba27-e6146f32fe3f" class="">// å¤„ç† POST æ—¶çš„æµæ´¾åˆ é™¤ã€‚<br/>exports.genre_delete_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾åˆ é™¤ POST&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8035-956c-fb84bc4fc522" class="">// é€šè¿‡ GET æ˜¾ç¤ºæµæ´¾æ›´æ–°è¡¨å•ã€‚<br/>exports.genre_update_get = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾æ›´æ–° GET&quot;);<br/>});<br/></p><p id="1f5694d5-ea46-8058-8e41-db7311679bc7" class="">// å¤„ç† POST ä¸Šçš„æµæ´¾æ›´æ–°ã€‚<br/>exports.genre_update_post = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;æœªå®ç°ï¼šæµæ´¾æ›´æ–° POST&quot;);<br/>});<br/></p></li></ul></li></ul><p id="1f5694d5-ea46-8076-bd27-e56b02dd95e1" class="">
</p><p id="1f5694d5-ea46-802c-b7ac-d1807a463afc" class="">ã€åˆ›å»ºcatalogè·¯ç”±æ¨¡å—ã€‘</p><ul id="1f5694d5-ea46-80ec-bac7-f98d79045f1a" class="bulleted-list"><li style="list-style-type:disc">ä¸ºæœ¬åœ°å›¾ä¹¦é¦†ç½‘ç«™åˆ›å»ºå®Œæ•´çš„URLè·¯ç”±<ul id="1f5694d5-ea46-8027-948a-f8942d9e53ca" class="bulleted-list"><li style="list-style-type:circle">é¡¹ç›®æ ¹ç›®å½•ä¸­æœ‰ä¸€ä¸ª/routesæ–‡ä»¶å¤¹ï¼ŒåŒ…å«ä¸¤ä¸ªè·¯ç”±æ–‡ä»¶indexå’Œusersï¼Œè¿™é‡Œæ–°å»ºä¸€ä¸ªcatalog.jsè·¯ç”±æ–‡ä»¶</li></ul><ul id="1f5694d5-ea46-806f-8fa2-ede1a507ce72" class="bulleted-list"><li style="list-style-type:circle">å†™å…¥JSä»£ç <ul id="1f5694d5-ea46-80af-b4f4-ee559d5c25b6" class="bulleted-list"><li style="list-style-type:square">const express = require(&quot;express&quot;);<br/>const router = express.Router();<br/><p id="1f5694d5-ea46-8047-b33c-ffec77a565ae" class="">// å¯¼å…¥æ§åˆ¶å™¨æ¨¡å—<br/>const book_controller = require(&quot;../controllers/bookController&quot;);<br/>const author_controller = require(&quot;../controllers/authorController&quot;);<br/>const genre_controller = require(&quot;../controllers/genreController&quot;);<br/>const book_instance_controller = require(&quot;../controllers/bookinstanceController&quot;);<br/></p><p id="1f5694d5-ea46-80aa-b391-dfde81333971" class="">/// å›¾ä¹¦è·¯ç”± ///</p><p id="1f5694d5-ea46-808a-9760-c44700146809" class="">// GET è·å–å›¾ä¹¦ç¼–ç›®ä¸»é¡µ<br/>router.get(&quot;/&quot;, book_controller.index);<br/></p><p id="1f5694d5-ea46-808c-bece-fcca11bb0eeb" class="">// GET è¯·æ±‚æ·»åŠ æ–°çš„å›¾ä¹¦ã€‚æ³¨æ„æ­¤é¡¹å¿…é¡»ä½äºæ˜¾ç¤ºå›¾ä¹¦çš„è·¯ç”±ï¼ˆä½¿ç”¨äº† idï¼‰ä¹‹å‰ã€‚<br/>router.get(&quot;/book/create&quot;, book_controller.book_create_get);<br/></p><p id="1f5694d5-ea46-807d-b576-cbd97ca1623e" class="">// POST è¯·æ±‚æ·»åŠ æ–°çš„å›¾ä¹¦<br/>router.post(&quot;/book/create&quot;, book_controller.book_create_post);<br/></p><p id="1f5694d5-ea46-8039-b47d-d4b26c595134" class="">// GET è¯·æ±‚åˆ é™¤å›¾ä¹¦<br/>router.get(&quot;/book/:id/delete&quot;, book_controller.book_delete_get);<br/></p><p id="1f5694d5-ea46-8037-baf3-e3c7cc5108cf" class="">// POST è¯·æ±‚åˆ é™¤å›¾ä¹¦<br/>router.post(&quot;/book/:id/delete&quot;, book_controller.book_delete_post);<br/></p><p id="1f5694d5-ea46-802e-ada2-fd4240febcba" class="">// GET è¯·æ±‚æ›´æ–°å›¾ä¹¦<br/>router.get(&quot;/book/:id/update&quot;, book_controller.book_update_get);<br/></p><p id="1f5694d5-ea46-80af-8664-e3fe8b3ad52f" class="">// POST è¯·æ±‚æ›´æ–°å›¾ä¹¦<br/>router.post(&quot;/book/:id/update&quot;, book_controller.book_update_post);<br/></p><p id="1f5694d5-ea46-80a7-a0b5-c23984afe708" class="">// GET è¯·æ±‚å›¾ä¹¦<br/>router.get(&quot;/book/:id&quot;, book_controller.book_detail);<br/></p><p id="1f5694d5-ea46-80e1-bd87-c6bbfe48afa7" class="">// GET è¯·æ±‚å®Œæ•´å›¾ä¹¦åˆ—è¡¨<br/>router.get(&quot;/books&quot;, book_controller.book_list);<br/></p><p id="1f5694d5-ea46-8013-9478-edfc03f694f1" class="">/// ä½œè€…è·¯ç”± ///</p><p id="1f5694d5-ea46-802a-9972-d3786327f6dc" class="">// ç”¨äºåˆ›å»ºä½œè€…çš„ GET è¯·æ±‚ã€‚æ³¨æ„è¿™å¿…é¡»åœ¨ id çš„è·¯ç”±ä¹‹å‰ï¼ˆæ¯”å¦‚è¯´æ˜¾ç¤ºä½œè€…ï¼‰<br/>router.get(&quot;/author/create&quot;, author_controller.author_create_get);<br/></p><p id="1f5694d5-ea46-80fb-b62b-dc7d8e424469" class="">// åˆ›å»ºä½œè€…çš„ POST è¯·æ±‚ã€‚<br/>router.post(&quot;/author/create&quot;, author_controller.author_create_post);<br/></p><p id="1f5694d5-ea46-8064-bc66-d74d7ee6ab99" class="">// åˆ é™¤ä½œè€…çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/author/:id/delete&quot;, author_controller.author_delete_get);<br/></p><p id="1f5694d5-ea46-80a5-8f1f-ca747fcf8395" class="">// POST è¯·æ±‚åˆ é™¤ä½œè€…ã€‚<br/>router.post(&quot;/author/:id/delete&quot;, author_controller.author_delete_post);<br/></p><p id="1f5694d5-ea46-8072-abe3-e35cbb5f9b1f" class="">// æ›´æ–°ä½œè€…çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/author/:id/update&quot;, author_controller.author_update_get);<br/></p><p id="1f5694d5-ea46-80a1-a2d5-f55f0132e1ce" class="">// POST è¯·æ±‚æ›´æ–°ä½œè€…ã€‚<br/>router.post(&quot;/author/:id/update&quot;, author_controller.author_update_post);<br/></p><p id="1f5694d5-ea46-8001-b2e4-e5d31f89093e" class="">// è·å–ä¸€ä¸ªä½œè€…çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/author/:id&quot;, author_controller.author_detail);<br/></p><p id="1f5694d5-ea46-8072-b0a0-e0d01a489029" class="">// è·å–æ‰€æœ‰ä½œè€…åˆ—è¡¨çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/authors&quot;, author_controller.author_list);<br/></p><p id="1f5694d5-ea46-8010-97cb-e54e641ef66d" class="">/// æµæ´¾è·¯ç”± ///</p><p id="1f5694d5-ea46-8067-bb87-e0886f120ecb" class="">// ç”¨äºåˆ›å»ºæµæ´¾çš„ GET è¯·æ±‚ã€‚æ³¨æ„ï¼šè¿™å¿…é¡»åœ¨æ˜¾ç¤ºæµæ´¾çš„è·¯ç”±ä¹‹å‰ï¼ˆä½¿ç”¨ id çš„è·¯ç”±ï¼‰ã€‚<br/>router.get(&quot;/genre/create&quot;, genre_controller.genre_create_get);<br/></p><p id="1f5694d5-ea46-806b-ab71-f2f330364c59" class="">// POST è¯·æ±‚åˆ›å»º Genreã€‚<br/>router.post(&quot;/genre/create&quot;, genre_controller.genre_create_post);<br/></p><p id="1f5694d5-ea46-80ec-8526-d111b948d434" class="">// åˆ é™¤æµæ´¾çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/genre/:id/delete&quot;, genre_controller.genre_delete_get);<br/></p><p id="1f5694d5-ea46-80cf-9682-d673348c9590" class="">// POST è¯·æ±‚åˆ é™¤ Genreã€‚<br/>router.post(&quot;/genre/:id/delete&quot;, genre_controller.genre_delete_post);<br/></p><p id="1f5694d5-ea46-80df-9168-c1029b1d49a9" class="">// æ›´æ–°æµæ´¾çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/genre/:id/update&quot;, genre_controller.genre_update_get);<br/></p><p id="1f5694d5-ea46-8078-bf7f-e24a445e2b7b" class="">// æ›´æ–°æµæ´¾çš„ POST è¯·æ±‚ã€‚<br/>router.post(&quot;/genre/:id/update&quot;, genre_controller.genre_update_post);<br/></p><p id="1f5694d5-ea46-8022-af33-d7ef98cdca9d" class="">// è·å–ä¸€ä¸ªæµæ´¾çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/genre/:id&quot;, genre_controller.genre_detail);<br/></p><p id="1f5694d5-ea46-8065-b8f2-f2689fcf7baa" class="">// è·å–æ‰€æœ‰æµæ´¾åˆ—è¡¨çš„ GET è¯·æ±‚<br/>router.get(&quot;/genres&quot;, genre_controller.genre_list);<br/></p><p id="1f5694d5-ea46-800c-9bc0-f9a9b0f8ae68" class="">/// BOOKINSTANCE è·¯ç”± ///</p><p id="1f5694d5-ea46-800c-92a3-c90ac993319b" class="">// ç”¨äºåˆ›å»º BookInstance çš„ GET è¯·æ±‚ã€‚æ³¨æ„ï¼šè¿™å¿…é¡»åœ¨æ˜¾ç¤º BookInstance çš„è·¯ç”±ä¹‹å‰ï¼ˆä½¿ç”¨ id çš„è·¯ç”±ï¼‰ã€‚<br/>router.get(<br/>&quot;/bookinstance/create&quot;,<br/>book_instance_controller.bookinstance_create_get,<br/>);<br/></p><p id="1f5694d5-ea46-80d3-8100-ca9249a64a9c" class="">// åˆ›å»º BookInstance çš„ POST è¯·æ±‚ã€‚<br/>router.post(<br/>&quot;/bookinstance/create&quot;,<br/>book_instance_controller.bookinstance_create_post,<br/>);<br/></p><p id="1f5694d5-ea46-8037-a17e-f9d6d73403be" class="">// åˆ é™¤ BookInstance çš„ GET è¯·æ±‚ã€‚<br/>router.post(<br/>&quot;/bookinstance/:id/delete&quot;,<br/>book_instance_controller.bookinstance_delete_get,<br/>);<br/></p><p id="1f5694d5-ea46-80fa-9077-e63639db1d98" class="">// POST è¯·æ±‚åˆ é™¤ BookInstanceã€‚<br/>router.post(<br/>&quot;/bookinstance/:id/delete&quot;,<br/>book_instance_controller.bookinstance_delete_post,<br/>);<br/></p><p id="1f5694d5-ea46-80aa-af20-d7937be1dd75" class="">// æ›´æ–° BookInstance çš„ GET è¯·æ±‚ã€‚<br/>router.get(<br/>&quot;/bookinstance/:id/delete&quot;,<br/>book_instance_controller.bookinstance_update_get,<br/>);<br/></p><p id="1f5694d5-ea46-8086-b0fd-d65345371612" class="">// æ›´æ–° BookInstance çš„ POST è¯·æ±‚ã€‚<br/>router.post(<br/>&quot;/bookinstance/:id/update&quot;,<br/>book_instance_controller.bookinstance_update_post,<br/>);<br/></p><p id="1f5694d5-ea46-808b-9f4f-ecd6e6f81a4d" class="">// ä¸€ä¸ª BookInstance çš„ GET è¯·æ±‚ã€‚<br/>router.get(&quot;/bookinstance/:id&quot;, book_instance_controller.bookinstance_detail);<br/></p><p id="1f5694d5-ea46-8096-a907-d9fbed2de340" class="">// GET è¯·æ±‚è·å–æ‰€æœ‰ BookInstance çš„åˆ—è¡¨ã€‚<br/>router.get(&quot;/bookinstances&quot;, book_instance_controller.bookinstance_list);<br/></p><p id="1f5694d5-ea46-807f-ab78-faf2bfef0be3" class="">module.exports = router;</p></li></ul></li></ul></li></ul><ul id="1f5694d5-ea46-806e-ba1b-d1532a8ce142" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å—å¯¼å…¥äº†expresså¹¶åˆ›å»ºäº†ä¸€ä¸ªRouterå¯¹è±¡routerï¼Œæ‰€æœ‰è·¯ç”±éƒ½è®¾ç½®åœ¨routerä¸Šï¼Œæœ€åå°†å…¶å¯¼å‡º</li></ul><ul id="1f5694d5-ea46-80fc-9e1f-d3c16ae77423" class="bulleted-list"><li style="list-style-type:disc">å¯¹routerå¯¹è±¡è°ƒç”¨.getï¼ˆï¼‰æˆ–.postï¼ˆï¼‰å‡½æ•°å³å¯å®šä¹‰è·¯ç”±ã€‚è¿™é‡Œæ‰€æœ‰è·¯å¾„éƒ½æ˜¯ç”¨å­—ç¬¦ä¸²å®šä¹‰ï¼ˆä¸ä½¿ç”¨å­—ç¬¦ä¸²æ¨¡å¼æˆ–æ­£åˆ™è¡¨è¾¾å¼ï¼‰ã€‚æŸäº›ç‰¹å®šèµ„æºï¼ˆä¾‹å¦‚å›¾ä¹¦ï¼‰çš„è·¯ç”±ä½¿ç”¨è·¯å¾„å‚æ•°ä»URLä¸­è·å–å¯¹è±¡æ ‡è¯†</li></ul><p id="1f5694d5-ea46-8088-be5f-dabad25f7009" class="">
</p><p id="1f5694d5-ea46-8076-9ef4-ff788c5e59d2" class=""><strong>æ›´æ–°ç´¢å¼•è·¯ç”±æ¨¡å—ï¼š</strong></p><ul id="1f5694d5-ea46-80dc-96aa-e71a7981d943" class="bulleted-list"><li style="list-style-type:disc">è®¾ç½®äº†æ‰€æœ‰æ–°è·¯å¾„ï¼Œè¿˜æœ‰ä¸€æ¡è·¯å¾„æŒ‡å‘åŸå§‹é¡µé¢ï¼Œéœ€è¦é‡å®šå‘åˆ°catalogè·¯å¾„ä¸‹åˆ›å»ºçš„æ–°ç´¢å¼•é¡µé¢</li></ul><ul id="1f5694d5-ea46-80be-b251-ea46fa7a7e5d" class="bulleted-list"><li style="list-style-type:disc">ä¿®æ”¹/routes/index.jsä¸­é—´ä»¶<ul id="1f5694d5-ea46-80cc-aa90-e5b48af1528b" class="bulleted-list"><li style="list-style-type:circle">// GET è¯·æ±‚ä¸»é¡µ<br/>router.get(&quot;/&quot;, (req, res) =&gt; {<br/>res.redirect(&quot;/catalog&quot;);<br/>});<br/></li></ul></li></ul><ul id="1f5694d5-ea46-80a2-a320-c595d484b519" class="bulleted-list"><li style="list-style-type:disc">è¿™æ˜¯æˆ‘ä»¬ç¬¬ä¸€æ¬¡ä½¿ç”¨Â redirect()Â å“åº”æ–¹æ³•ã€‚å®ƒä¼šä½¿è·¯ç”±é‡å®šå‘åˆ°æŒ‡å®šçš„é¡µé¢ï¼Œé»˜è®¤å‘é€ HTTP çŠ¶æ€ä»£ç â€œ302 Foundâ€ã€‚å¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹è¿”å›çš„çŠ¶æ€ä»£ç ã€è®¾ç½®ç»å¯¹æˆ–ç›¸å¯¹è·¯å¾„ã€‚</li></ul><p id="1f5694d5-ea46-8034-8973-d399666794d6" class="">
</p><p id="1f5694d5-ea46-8036-bbab-fb7a46bfc467" class=""><strong>æ›´æ–°app.jsï¼š</strong></p><ul id="1f5694d5-ea46-80de-a07d-c73c41e83d70" class="bulleted-list"><li style="list-style-type:disc">åœ¨app.jsä¸­å°†è·¯ç”±æ·»åŠ åˆ°ä¸­é—´ä»¶é“¾<ul id="1f5694d5-ea46-80f3-aa40-f53ab8965d46" class="bulleted-list"><li style="list-style-type:circle">app.jsä¸­ï¼Œåœ¨indexå’Œusersè·¯ç”±ä¸‹æ–¹æ·»åŠ catalogè·¯ç”±<ul id="1f5694d5-ea46-80ce-9f02-fcdb77125c65" class="bulleted-list"><li style="list-style-type:square">const indexRouter = require(&quot;./routes/index&quot;);<br/>const usersRouter = require(&quot;./routes/users&quot;);<br/>const catalogRouter = require(&quot;./routes/catalog&quot;); // å¯¼å…¥ catalog è·¯ç”±<br/></li></ul></li></ul></li></ul><ul id="1f5694d5-ea46-805f-b36e-ec76c3a55615" class="bulleted-list"><li style="list-style-type:disc">åœ¨å·²å®šä¹‰çš„è·¯ç”±ä¸‹æ–¹å°†ç›®å½•è·¯ç”±æ·»åŠ è¿›ä¸­é—´ä»¶æ ˆ<ul id="1f5694d5-ea46-8017-aa0f-e2c301756ceb" class="bulleted-list"><li style="list-style-type:circle">app.use(&quot;/&quot;, indexRouter);<br/>app.use(&quot;/users&quot;, usersRouter);<br/>app.use(&quot;/catalog&quot;, catalogRouter); // å°† catalog è·¯ç”±æ·»åŠ è¿›ä¸­é—´ä»¶é“¾<br/></li></ul></li></ul><ul id="1f5694d5-ea46-807b-865e-f2210de59dd3" class="bulleted-list"><li style="list-style-type:disc">æˆ‘ä»¬å°†å›¾ä¹¦ç¼–ç›®æ¨¡å—æ·»åŠ åˆ°äº†Â <code>&#x27;/catalog&#x27;</code>Â è·¯å¾„ï¼Œè¯¥è·¯å¾„æ˜¯ catalog æ¨¡å—ä¸­æ‰€æœ‰è·¯å¾„çš„å‰ç¼€ã€‚ä¾‹å¦‚ï¼Œè®¿é—®å›¾ä¹¦åˆ—è¡¨ çš„ URL ä¸ºï¼š<code>/catalog/books/</code>ã€‚</li></ul><p id="1f5694d5-ea46-8076-9dc8-c1b4c180bcef" class="">
</p><p id="1f5694d5-ea46-80ff-a99a-da8194c299e9" class=""><strong>æµ‹è¯•è·¯ç”±ï¼š</strong></p><ul id="1f5694d5-ea46-8068-9e15-d2016b08d0e5" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆå¯åŠ¨ç½‘ç«™<ul id="1f5694d5-ea46-809f-a281-e3d620eaa782" class="bulleted-list"><li style="list-style-type:circle">Windows<p id="1f5694d5-ea46-80a3-bd84-c389bed95a6c" class="">SET DEBUG=express-locallibrary-tutorial:* &amp; npm start</p></li></ul></li></ul><ul id="1f5694d5-ea46-8095-b0db-dece73f307eb" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœè®¾ç½®è¿‡nodemonï¼Œåˆ™å¯ä»¥ä½¿ç”¨<ul id="1f5694d5-ea46-80bf-b144-cc142d60b7cd" class="bulleted-list"><li style="list-style-type:circle">DEBUG=express-locallibrary-tutorial:* npm run devstart</li></ul></li></ul><ul id="1f5694d5-ea46-8043-b05f-ee238876882e" class="bulleted-list"><li style="list-style-type:disc">è®¿é—®ä¸€äº›URLï¼Œç¡®ä¿ä¸ä¼šå—åˆ°é”™è¯¯é¡µé¢404</li></ul><p id="1f6694d5-ea46-80d1-8c63-d188583ffc9e" class="">
</p><p id="1f6694d5-ea46-80fc-8628-ec6dbcdf02b1" class="">
</p><p id="1f6694d5-ea46-8055-9c9a-e605079286af" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬å››æ­¥-å‘ˆç°å›¾ä¹¦é¦†æ•°æ®ã€‘ï¼š</span></strong></p><p id="1f6694d5-ea46-80cf-bd9f-e2606e1b4a35" class="">ç°åœ¨å‡†å¤‡æ–°å¢ç½‘é¡µï¼Œæ¥æ˜¾ç¤ºå›¾ä¹¦é¦†ç½‘ç«™çš„ä¹¦æœ¬åŸŸå…¶ä»–èµ„æ–™ï¼Œç½‘ç«™åŒ…å«ä¸»é¡µæ¥æ˜¾ç¤ºæ‹¥æœ‰çš„æ¯ä¸ªæ¨¡å‹çš„è®°å½•æ•°ï¼Œæ‰€æœ‰æ¨¡å‹çš„æ¸…å•å’Œè¯¦ç»†ä¿¡æ¯é¡µé¢ã€‚</p><p id="1f6694d5-ea46-80f6-9b18-e229779f3e0f" class=""><strong>å°†ä»æ•°æ®åº“ä¸­è·å–è®°å½•ä»¥åŠä½¿ç”¨æ¨¡æ¿</strong></p><p id="1f6694d5-ea46-8062-9890-cb6758f027ad" class="">ç›®æ ‡ï¼šäº†è§£å¦‚ä½•ä½¿ç”¨å¼‚æ­¥æ¨¡ç»„ä¸Pugæ ·æ¿è¯­è¨€ï¼Œä»¥åŠå¦‚ä½•ä»æ§åˆ¶å™¨å‡½æ•°ä¸­çš„URLè·å–ä¿¡æ¯</p><p id="1f6694d5-ea46-801b-961b-ff3d350f0996" class="">
</p><p id="1f6694d5-ea46-80cd-8024-c771e291b1be" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f6694d5-ea46-801c-bb5b-d4b849a5e804" class="bulleted-list"><li style="list-style-type:disc">å…ˆå‰å®šä¹‰äº†å’Œèµ„æ–™åº“äº’åŠ¨çš„Mongoose modelsï¼Œå¹¶åˆ›å»ºäº†ä¸€äº›å›¾ä¹¦é¦†è®°å½•ã€‚ä¹‹ååˆ›å»ºäº†å›¾ä¹¦é¦†ç½‘ç«™éœ€è¦çš„æ‰€æœ‰è·¯ç”±ï¼Œä½†ä»…ä½¿ç”¨ç©ºå£³æ§åˆ¶å™¨å‡½æ•°ï¼ˆå³æ¡†æ¶æ§åˆ¶å™¨å‡½æ•°ï¼Œå½“ç½‘é¡µè¢«å­˜å–æ—¶ï¼ŒæŒ‡å›ä¼ ä¸€ä¸ªä¸ºå®ç°çš„ä¿¡æ¯ï¼‰</li></ul><ul id="1f6694d5-ea46-802c-aea0-cb2a9fd4ef76" class="bulleted-list"><li style="list-style-type:disc">ä¸‹ä¸€æ­¥ï¼Œä¸ºæ˜¾ç¤ºå›¾ä¹¦é¦†ä¿¡æ¯çš„ç½‘é¡µï¼Œæä¾›é€‚å½“çš„å®ç°ï¼ˆèšç„¦ç½‘é¡µè¡¨å•çš„å®ç°ï¼Œåˆ›å»ºã€æ›´æ–°ã€åˆ é™¤ä¿¡æ¯ç­‰æ“ä½œï¼‰ã€‚åŒ…å«äº†æ›´æ–°æ§åˆ¶å™¨å‡½æ•°ï¼Œå·²åˆ©ç”¨æˆ‘ä»¬çš„æ¨¡å‹è·å–è®°å½•ï¼Œå®šä¹‰æ¨¡æ¿ï¼Œä¸ºç”¨æˆ·æ˜¾ç¤ºè¿™äº›ä¿¡æ¯</li></ul><p id="1f6694d5-ea46-80f7-9249-e2919db9b3eb" class="">
</p><p id="1f6694d5-ea46-80f2-9e52-debb0452174f" class=""><strong><span style="border-bottom:0.05em solid">001-æ¨¡æ¿å…¥é—¨ï¼š</span></strong></p><ul id="1f6694d5-ea46-80b5-ac8f-ca1e912bd7aa" class="bulleted-list"><li style="list-style-type:disc">æ¨¡æ¿ä½¿ç”¨è¯¥æ–‡å­—æ¡£ï¼Œå®šä¹‰äº†ä¸€ä¸ªè¾“å‡ºæ¡£çš„ç»“æ„æˆ–æ’ç‰ˆï¼Œä½¿ç”¨å®šä½ç¬¦å·è¡¨ç¤ºï¼Œå½“ç›®æ ‡è¢«ç»˜åˆ¶æ—¶ï¼Œèµ„æ–™å°†æ’å…¥ä½•å¤„ï¼ˆExpressä¸­ï¼Œæ¨¡æ¿è¢«ç§°ä¸ºè§†å›¾ï¼‰</li></ul><p id="1f6694d5-ea46-80b2-9790-cd1138f090c9" class=""><strong>Expressæ¨¡æ¿é€‰æ‹©ï¼š</strong></p><ul id="1f6694d5-ea46-8002-b16a-d9a75a86c392" class="bulleted-list"><li style="list-style-type:disc">Expresså¯ä»¥ä¸è®¸å¤šä¸åŒçš„æ¨¡æ¿æ¸²æŸ“å¼•æ“ä¸€èµ·ä½¿ç”¨ï¼Œæœ¬é¡¹ç›®ä½¿ç”¨Pugä½œä¸ºç›®æ ‡ã€‚</li></ul><ul id="1f6694d5-ea46-80c1-bff8-c81105ad4acd" class="bulleted-list"><li style="list-style-type:disc">ä¸åŒçš„æ¨¡æ¿è¯­è¨€ä½¿ç”¨ä¸åŒçš„æ–¹æ³•ï¼Œæ¥å®šä¹‰å¸ƒå±€å’Œæ ‡è®°æ•°æ®çš„å ä½ç¬¦-ï¼Œä¸€äº›å®ç”¨HTMLæ¥å®šä¹‰å¸ƒå±€ï¼Œè€Œä¸€äº›åˆ™å¯ä»¥ä½¿ç”¨ç¼–è¯‘ä¸ºHTMLçš„ä¸åŒæ ‡è®°æ ¼å¼ã€‚</li></ul><ul id="1f6694d5-ea46-801c-ae04-f5a79937a8ec" class="bulleted-list"><li style="list-style-type:disc">Pugæ˜¯ç¬¬äºŒç§ç±»å‹ï¼Œä½¿ç”¨HTMLçš„è¡¨ç¤ºå½¢å¼ï¼Œå…¶ä¸­ä»»ä½•è¡Œä¸­çš„ç¬¬ä¸€ä¸ªå•è¯ï¼Œé€šå¸¸è¡¨ç¤ºä¸ºHTMLå…ƒç´ ï¼Œåç»­èˆªä¸­çš„ç¼©è¿›ï¼Œç”¨äºè¡¨ç¤ºåµŒå¥—åœ¨è¿™äº›å…ƒç´ ä¸­çš„ä»»ä½•å†…å®¹ï¼Œç»“æœæ—¶åº”è¯¥é¡µé¢å®šä¹‰ç›´æ¥è½¬æ¢ä¸ºHTMLã€‚<ul id="1f6694d5-ea46-8015-9287-d7cde7fa29c7" class="bulleted-list"><li style="list-style-type:circle">Pugç¼ºç‚¹ï¼šå¯¹ç¼©è¿›å’Œç©ºæ ¼æ•æ„Ÿï¼Œå¦‚æœåœ¨é”™è¯¯ä½ç½®æ·»åŠ é¢å¤–çš„ç©ºæ ¼ï¼Œå¯èƒ½ä¼šæŠ¥é”™</li></ul></li></ul><p id="1f6694d5-ea46-8098-9468-c5b89c93eb29" class=""><strong>æ¨¡æ¿ç»„æ€ï¼š</strong></p><ul id="1f6694d5-ea46-800a-a75e-f7db008e2a00" class="bulleted-list"><li style="list-style-type:disc">åœ¨åˆ›å»ºæ¡†æ¶ç½‘ç«™æ—¶ï¼ŒLocalLibraryé…ç½®ä¸ºä½¿ç”¨Pugï¼ŒPugæ¨¡å—ä½œä¸ºä¾èµ–é¡¹ï¼ŒåŒ…å«åœ¨ç½‘ç«™çš„package.jsonæ–‡ä»¶ä¸­ï¼Œä»¥åŠapp.jsæ–‡ä»¶çš„ä¸€ä¸‹é…ç½®è®¾ç½®ã€‚<ul id="1f6694d5-ea46-805b-931a-e538e7010b64" class="bulleted-list"><li style="list-style-type:circle">// View engine setup.<br/>app.set(&quot;views&quot;, path.join(__dirname, &quot;views&quot;));<br/>app.set(&quot;view engine&quot;, &quot;pug&quot;);<br/></li></ul></li></ul><ul id="1f6694d5-ea46-80f4-9125-e9b49ebaccd3" class="bulleted-list"><li style="list-style-type:disc">è®¾ç½®å·²çŸ¥ï¼Œä½¿ç”¨pugä½œä¸ºè§†å›¾å¼•æ“ï¼ŒExpressåº”è¯¥åœ¨/viewså­ç›®å½•ä¸­æœç´¢æ¨¡æ¿</li></ul><ul id="1f6694d5-ea46-801f-85e1-d00a0252a8c2" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæŸ¥çœ‹viewsç›®å½•ï¼Œå¯ä»¥çœ‹åˆ°é¡¹ç›®é»˜è®¤è§†å›¾çš„.pugæ–‡ä»¶ï¼Œè¿™åŒ…æ‹¬éœ€è¦ç”¨è‡ªå·±çš„å†…å®¹æ›¿æ¢æ‰index.pugå’ŒåŸºæœ¬æ¨¡æ¿layout.pugçš„è§†å›¾</li></ul><p id="1f6694d5-ea46-808c-99c3-c5705066b15d" class=""><strong>æ¨¡æ¿è¯­æ³•ï¼š</strong></p><ul id="1f6694d5-ea46-8025-b1ba-dd987a2a261c" class="bulleted-list"><li style="list-style-type:disc">å¦‚ä¸‹ç¤ºä¾‹æ¨¡æ¿ï¼Œå±•ç¤ºPugçš„ä¸»è¦åŠŸèƒ½</li></ul><ul id="1f6694d5-ea46-8018-9b76-d4d4a46da945" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆè¦æ³¨æ„ï¼Œè¯¥æˆ‘å‘¢è§æ˜ å°„å…¸å‹HTMLæ–‡ä»¶çš„ç»“æ„ï¼Œå…¶ä¸­æ¯ä¸€è¡Œçš„ç¬¬ä¸€ä¸ªå•è¯ä¸ºHTMLå…ƒç´ ï¼Œå¹¶ä¸”èº²è¿›ç”¨äºæŒ‡ç¤ºç­¾åˆ°å…ƒç´ ã€‚å› æ­¤ï¼Œbodyæœ¬æ–‡å…ƒç´ ä½äºhtmlå…ƒç´ å†…ï¼Œè€Œæ®µè½å…ƒç´ pä½äºbodyå…ƒç´ å†…ç­‰ã€‚éåµŒå¥—å…ƒç´ ä¸ºä¸ä¸åŒçš„è¡Œä¸Š<ul id="1f6694d5-ea46-80d5-9b65-c68de97153a7" class="bulleted-list"><li style="list-style-type:circle">PUGè¯­æ³•ç¤ºä¾‹<ul id="1f6694d5-ea46-8016-8438-deaf719f4932" class="bulleted-list"><li style="list-style-type:square">html(lang=&quot;en&quot;)<br/>  head<br/>    title= title<br/>    script(type=&#x27;text/javascript&#x27;).<br/>  body<br/>    h1= title<br/><p id="1f6694d5-ea46-8002-a8e3-eaa4f8b85fe9" class="">    p This is a line with #[em some emphasis] and #[strong strong text] markup.<br/>    p This line has un-escaped data: !{&#x27;&lt;em&gt; is emphasised&lt;/em&gt;&#x27;} and escaped data: #{&#x27;&lt;em&gt; is not emphasised&lt;/em&gt;&#x27;}.<br/>  | This line follows on.<br/>    p= &#x27;Evaluated and &lt;em&gt;escaped expression&lt;/em&gt;:&#x27; + title<br/><br/>&lt;!-- You can add HTML comments directly --&gt;<br/>// You can add single line JavaScript comments and they are generated to HTML comments<br/>//- Introducing a single line JavaScript comment with &quot;//-&quot; ensures the comment isn&#x27;t rendered to HTML<br/><br/>    p A line with a link<br/>      a(href=&#x27;/catalog/authors&#x27;) Some link text<br/>  |  and some extra text.<br/><br/>#container.col<br/>      if title<br/>          p A variable named &quot;title&quot; exists.<br/>  else<br/>    p A variable named &quot;title&quot; does not exist.<br/>  p.<br/>    Pug is a terse and simple template language with a<br/>    strong focus on performance and powerful features.<br/><br/>h2 Generate a list<br/><br/>ul<br/>  each val in [1, 2, 3, 4, 5]<br/>    li= val<br/></p></li></ul></li></ul></li></ul><ul id="1f6694d5-ea46-8043-ab0e-e5f18a0fa648" class="bulleted-list"><li style="list-style-type:disc">å…ƒç´ å±æ€§è¢«å®šä¹‰åœ¨å…¶å…³è”å…ƒç´ ä¹‹åçš„æ‹¬å·ä¸­ï¼Œåœ¨æ‹¬å·å†…ï¼Œå±æ€§å®šä¹‰åœ¨ä»¥é€—å·æˆ–ç©ºæ ¼åˆ†éš”çš„å±æ€§åç§°å’Œå±æ€§å€¼å¯¹çš„åˆ—è¡¨ä¸­ï¼Œä¾‹å¦‚<ul id="1f6694d5-ea46-8023-b099-f8b97cb89a40" class="bulleted-list"><li style="list-style-type:circle"><code>script(type=&#x27;text/javascript&#x27;)</code>,Â <code>link(rel=&#x27;stylesheet&#x27;, href=&#x27;/stylesheets/style.css&#x27;)</code></li></ul><ul id="1f6694d5-ea46-806f-b411-fbd6d30f2245" class="bulleted-list"><li style="list-style-type:circle"> <code>meta(name=&#x27;viewport&#x27; content=&#x27;width=device-width initial-scale=1&#x27;)</code></li></ul></li></ul><ul id="1f6694d5-ea46-80b4-a1b8-edd2186d7450" class="bulleted-list"><li style="list-style-type:disc">æ‰€æœ‰å±æ€§çš„å€¼éƒ½è¢«è½¬ä¹‰ï¼Œä¾‹å¦‚&gt;ç­‰å­—ç¬¦è½¬æ¢ä¸ºHTMLä»£ç ç­‰æ•ˆé¡¹ï¼Œå¦‚&amp;gtï¼›</li></ul><ul id="1f6694d5-ea46-800a-a73f-f946abc0d869" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ ‡è®°åè·Ÿç€ç­‰å·ï¼Œåˆ™ä¸€ä¸‹æ–‡æœ¬è¢«è§†ä¸ºJSè¡¨è¾¾å¼ï¼Œä¾‹å¦‚h1æ ‡è®°çš„å†…å®¹æ˜¯æ ‡é¢˜å˜é‡titleï¼ˆåœ¨æ–‡ä»¶ä¸­å®šä¹‰ï¼Œæˆ–ä»Expressä¼ é€’åˆ°æ¨¡æ¿ä¸­ï¼‰ï¼Œç¬¬äºŒè¡Œä¸­æ®µè½å†…å®¹ä¸æ ‡é¢˜å˜é‡titleè¿æ¥çš„æ–‡æœ¬å­—ç¬¦ä¸²ï¼Œè¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œé»˜è®¤è¡Œä¸ºæ˜¯è½¬ä¹‰è¯¥è¡Œ<ul id="1f6694d5-ea46-8010-8306-f6e0163f1ad7" class="bulleted-list"><li style="list-style-type:circle">h1= title<br/>p= &#x27;Evaluated and &lt;em&gt;escaped expression&lt;/em&gt;:&#x27; + title<br/></li></ul></li></ul><ul id="1f6694d5-ea46-8071-9b2d-c7d45b3331fe" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ ‡è®°åé¢æ²¡æœ‰ç¯å·ï¼Œåˆ™å°†å†…å®¹è§†ä¸ºçº¯æ–‡æœ¬ï¼Œåœ¨çº¯æ–‡æœ¬ä¸­ï¼Œå¯ä»¥ä½¿ç”¨#{}å’Œï¼{}è¯­æ³•ï¼Œæ’å…¥è½¬ä¹‰å’Œè‚ºè½¬ç§»æ•°æ®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼Œå¯ä»¥åœ¨çº¯æ–‡æœ¬ä¸­æ·»åŠ åŸå§‹HTML<ul id="1f6694d5-ea46-80f8-9dfc-d49b85e4e148" class="bulleted-list"><li style="list-style-type:circle">p This is a line with #[em some emphasis] and #[strong strong text] markup.<br/>p This line has an un-escaped string: !{&#x27;&lt;em&gt; is emphasised&lt;/em&gt;&#x27;}, an escaped string: #{&#x27;&lt;em&gt; is not emphasised&lt;/em&gt;&#x27;}, and escaped variables: #{title}.<br/></li></ul></li></ul><ul id="1f6694d5-ea46-8016-9f9a-d2168a4ff74a" class="bulleted-list"><li style="list-style-type:disc">è½¬ä¹‰æ¥è‡ªç”¨æˆ·çš„æ•°æ®ï¼Œä½¿ç”¨#{}è¯­æ³•</li></ul><ul id="1f6694d5-ea46-803d-906c-d654f4d4951f" class="bulleted-list"><li style="list-style-type:disc">å¯ä¿¡ä»»çš„æ•°æ®ï¼ˆä¾‹å¦‚ï¼Œç”Ÿæˆçš„è®°å½•è®¡æ•°ç­‰ï¼‰å¯ä»¥ä¸è½¬ä¹‰å°±æ˜¾ç¤º</li></ul><ul id="1f6694d5-ea46-80e5-badd-e4f76845fa9b" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥åœ¨è¡Œçš„å¼€å¤´ä½¿ç”¨ç®¡é“â€œ|â€å­—ç¬¦æ¥è¡¨ç¤ºçº¯æ–‡æœ¬ï¼Œä¾‹å¦‚ä¸‹é¢æ˜¾ç¤ºçš„é™„åŠ æ–‡æœ¬ï¼Œè§æ˜¾ç¤ºåœ¨å‰ä¸€ä¸ªé”šç‚¹ç›¸åŒçš„è¡Œä¸Šï¼Œä½†ä¸ä¼šé“¾æ¥<ul id="1f6694d5-ea46-8046-933d-c9d6f72d579d" class="bulleted-list"><li style="list-style-type:circle">a(href=&#x27;<a href="http://someurl/">http://someurl/</a>&#x27;) Link text<br/>| Plain text<br/></li></ul></li></ul><ul id="1f6694d5-ea46-8040-92a6-eec4c7912235" class="bulleted-list"><li style="list-style-type:disc">Pugå…è®¸ä½¿ç”¨ifã€elseã€else ifå’Œunlessæ‰§è¡Œæ¡ä»¶æ“ä½œï¼Œä¾‹å¦‚<ul id="1f6694d5-ea46-807c-9417-f3a1d75432c8" class="bulleted-list"><li style="list-style-type:circle">if title<br/>    p A variable named &quot;title&quot; exists<br/>else<br/>    p A variable named &quot;title&quot; does not exist<br/></li></ul></li></ul><ul id="1f6694d5-ea46-80d6-af96-d14c43fc2021" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä½¿ç”¨each-inæˆ–whileè¯­æ³•æ‰§è¡Œå¾ªç¯/è¿­ä»£æ“ä½œã€‚ä¾‹å¦‚å¾ªç¯éå†æ•°ç»„ï¼Œæ¥æ˜¾ç¤ºå˜é‡åˆ—è¡¨ï¼ˆä¸»é¡µï¼Œä½¿ç”¨â€œli =â€æ¥è¯„ä¼°valï¼Œä½œä¸ºä¸‹é¢çš„å˜é‡ï¼‰è¿­ä»£çš„å€¼ä¹Ÿå¯ä»¥ä¼ é€’ç»™æ¨¡æ¿ä½œä¸ºå˜é‡<ul id="1f6694d5-ea46-80d9-a7aa-c8afa15db9a8" class="bulleted-list"><li style="list-style-type:circle">ul<br/>    each val in [1, 2, 3, 4, 5]<br/>        li= val<br/></li></ul></li></ul><ul id="1f6694d5-ea46-80ac-af2e-cbc47cde481e" class="bulleted-list"><li style="list-style-type:disc">è¯­æ³•æ”¯æŒæ³¨é‡Šï¼ˆå¯ä»¥åœ¨è¾“å‡ºä¸­å‘ˆç°ã€å¯é€‰ï¼‰ã€æ”¯æŒmixinsåˆ›å»ºå¯ä»¥é‡ç”¨çš„ä»£ç å—ã€caseè¯­æ³•ç­‰åŠŸèƒ½</li></ul><p id="1f6694d5-ea46-8040-9d05-cf081fe9fbcf" class=""><strong>æ‰©å±•æ¨¡æ¿ï¼š</strong></p><ul id="1f6694d5-ea46-8096-ae41-fb28bd60a1d3" class="bulleted-list"><li style="list-style-type:disc">åœ¨ç«™ç‚¹ä¸­ï¼Œé€šå¸¸æ‰€æœ‰é¡µé¢éƒ½æœ‰ä¸€ä¸ªå…±åŒçš„ç»“æ„ï¼ŒåŒ…æ‹¬é¦–é¡µã€é¡µè„šã€å¯¼èˆªç­‰æ ‡å‡†çš„HTMLæ ‡è®°ã€‚Pugå…è®¸å£°æ˜åº”è¯¥åŸºæœ¬æ¨¡æ¿ï¼Œç„¶åæ‰©å±•ä»–ï¼Œåªæ›¿æ¢æ¯ä¸ªç‰¹å®šé¡µé¢ä¸åŒçš„åœ°æ–¹<ul id="1f6694d5-ea46-8061-a13d-f8dc3be4e3d4" class="bulleted-list"><li style="list-style-type:circle">ä¾‹å¦‚ï¼Œåœ¨æ¡†æ¶é¡¹ç›®ä¸­ï¼Œåˆ›å»ºçš„åŸºæœ¬æ¨¡æ¿layout.pugï¼Œ<ul id="1f6694d5-ea46-80a1-8d2a-d3af34594158" class="bulleted-list"><li style="list-style-type:square">doctype html<br/>html<br/>    head<br/>        title= title<br/>        link(rel=&#x27;stylesheet&#x27;, href=&#x27;/stylesheets/style.css&#x27;)<br/>    body<br/>        block content<br/></li></ul></li></ul></li></ul><ul id="1f6694d5-ea46-807b-a8ec-cdc8513d70be" class="bulleted-list"><li style="list-style-type:disc">å—æ ‡è®°blockç”¨äºæ ‡è®°å¯åœ¨æ´¾ç”Ÿæ¨¡æ¿ä¸­æ›¿æ¢çš„å†…å®¹ä¸ç¬¦ï¼Œå¦‚æœæœªé‡æ–°å®šä¹‰å¿«ï¼Œåˆ™ä½¿ç”¨å…¶åœ¨åŸºç±»ä¸­çš„å®ç°</li></ul><ul id="1f6694d5-ea46-807a-85ca-c25e4b055aab" class="bulleted-list"><li style="list-style-type:disc">é»˜è®¤çš„index.pugï¼ˆä¸ºæ¡†æ¶é¡¹ç›®æ‰€åˆ›å»ºï¼‰ï¼Œæ˜¾ç¤ºäº†æˆ‘ä»¬å¦‚ä½•è¦†ç›–åŸºæœ¬æ¨¡æ¿ï¼Œextendsæ ‡è®°ï¼Œè¡¨ç¤ºè¦ä½¿ç”¨çš„åŸºæœ¬æ¨¡æ¿ï¼Œç„¶åæˆ‘ä»¬ä½¿ç”¨block section_nameï¼Œæ¥çŸ¥è¯†è¦è¦†ç›–çš„éƒ¨åˆ†æ–°å†…å®¹<ul id="1f6694d5-ea46-805b-8fab-cdca58055f81" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-80ab-b03b-de7d775a0b12" class="">block content<br/>    h1= title<br/>    p Welcome to #{title}<br/></p></li></ul></li></ul><p id="1f6694d5-ea46-8089-8c2d-c53166bc6943" class=""><strong><span style="border-bottom:0.05em solid">002-æœ¬åœ°å›¾ä¹¦é¦†åŸºç¡€æ¨¡æ¿ï¼š</span></strong></p><ul id="1f6694d5-ea46-80f1-a8c5-f2d64d4febbc" class="bulleted-list"><li style="list-style-type:disc">äº†è§£Pugå¦‚ä½•æ‹“å±•æ¨¡æ¿ã€‚å°±å›¾ä¹¦é¦†é¡¹ç›®ï¼Œåˆ›å»ºä¸€ä¸ªåŸºç¡€æ¨¡æ¿ï¼Œè¿™ä¸ªç›®æ ‡ä¼šæœ‰ä¸€ä¸ªä¾§è¾¹æ ï¼Œè¿æ¥åˆ°æœ¬æ•™ç¨‹ä¸­è¦åˆ›å»ºçš„å„ä¸ªé¡µé¢ï¼ˆä¾‹å¦‚ï¼Œä¹¦æœ¬ã€ç§ç±»ã€ä½œè€…ç­‰ç­‰ï¼‰ï¼Œä»¥åŠä¸€ä¸ªä¸»è¦å†…å®¹åŒºåŸŸï¼Œæˆ‘ä»¬å°†åœ¨æ¯ä¸ªé¡µé¢ä¸­è¿›è¡Œè¦†å†™</li></ul><ul id="1f6694d5-ea46-8009-bcd3-dba80b14a58d" class="bulleted-list"><li style="list-style-type:disc">å¼€å¯/views/layout.pugï¼Œå¹¶ä»¥ä¸‹åˆ—ä»£ç ç½®æ¢å…¶å†…å®¹<ul id="1f6694d5-ea46-80d0-a1f0-f643cbe75042" class="bulleted-list"><li style="list-style-type:circle">doctype html<br/>html(lang=&#x27;en&#x27;)<br/>head<br/>title= title<br/>meta(charset=&#x27;utf-8&#x27;)<br/>meta(name=&#x27;viewport&#x27;, content=&#x27;width=device-width, initial-scale=1&#x27;)<br/>link(rel=&#x27;stylesheet&#x27;, href=&#x27;<br/><a href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css</a>&#x27;)<br/>script(src=&#x27;<br/><a href="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js">https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js</a>&#x27;)<br/>script(src=&#x27;<br/><a href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js">https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js</a>&#x27;)<br/>link(rel=&#x27;stylesheet&#x27;, href=&#x27;/stylesheets/style.css&#x27;)<br/>body<br/>div(class=&#x27;container-fluid&#x27;)<br/>div(class=&#x27;row&#x27;)<br/>div(class=&#x27;col-sm-2&#x27;)<br/>block sidebar<br/>ul(class=&#x27;sidebar-nav&#x27;)<br/>li<br/>a(href=&#x27;/catalog&#x27;) Home<br/>li<br/>a(href=&#x27;/catalog/books&#x27;) All books<br/>li<br/>a(href=&#x27;/catalog/authors&#x27;) All authors<br/>li<br/>a(href=&#x27;/catalog/genres&#x27;) All genres<br/>li<br/>a(href=&#x27;/catalog/bookinstances&#x27;) All book-instances<br/>li<br/>hr<br/>li<br/>a(href=&#x27;/catalog/author/create&#x27;) Create new author<br/>li<br/>a(href=&#x27;/catalog/genre/create&#x27;) Create new genre<br/>li<br/>a(href=&#x27;/catalog/book/create&#x27;) Create new book<br/>li<br/>a(href=&#x27;/catalog/bookinstance/create&#x27;) Create new book instance (copy)<br/></li></ul><p id="1f6694d5-ea46-80ee-a1fc-f57812cb00a0" class="">      div(class=&#x27;col-sm-10&#x27;)<br/>        block content<br/></p></li></ul><ul id="1f6694d5-ea46-80e6-bc58-ec53b025db1d" class="bulleted-list"><li style="list-style-type:disc">æ­¤æ¨¡æ¿ä½¿ç”¨Bootstrapå¸ƒå±€ã€‚</li></ul><ul id="1f6694d5-ea46-8094-9b98-d250cabb8ded" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨block contentå½“ä½œå®šä½ç¬¦å·ï¼Œæ”¾åˆ°é¡µé¢å†…å®¹å°†æ”¾ç½®çš„åœ°æ–¹</li></ul><ul id="1f6694d5-ea46-8051-affb-d1bb9cfc18e4" class="bulleted-list"><li style="list-style-type:disc">åŸºç¡€æ¨¡æ¿å‚è€ƒäº†æœ¬åœ°cssï¼Œæä¾›äº†é¢å¤–çš„æ ·å¼åœ¨/public/stylesheets/style.css<ul id="1f6694d5-ea46-8024-b0a5-f1194df0f861" class="bulleted-list"><li style="list-style-type:circle">.sidebar-nav {<br/>margin-top: 20px;<br/>padding: 0;<br/>list-style: none;<br/>}<br/></li></ul></li></ul><p id="1f6694d5-ea46-8002-b43e-f44fe3a81ed4" class=""><strong><span style="border-bottom:0.05em solid">003-ä¸»é¡µï¼š</span></strong></p><ul id="1f6694d5-ea46-804a-9835-c2083634a76b" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºç¬¬ä¸€ä¸ªé¡µé¢æ˜¯ç½‘ç«™çš„ä¸»é¡µé¢ï¼Œç½‘ç«™çš„æ ¹ç›®å½•/æˆ–è€…catalogçš„æ ¹ç›®å½•è®¿é—®ï¼Œè¿™ä¼šå‘ˆç°ä¸€äº›ç½‘ç«™çš„é™æ€æ–‡å­—æè¿°ï¼Œä»¥åŠåŠ¨æ€è®¡ç®—æ•°æ®åº“ä¸­ä¸åŒè®°å½•ç±»å‹çš„æŠ€æœ¯</li></ul><ul id="1f6694d5-ea46-80d9-b0ee-d547ea0bb742" class="bulleted-list"><li style="list-style-type:disc">å…ˆå‰ä¸ºä¸»é¡µåˆ›å»ºäº†è·¯ç”±ï¼Œä¸ºä¾‹å®Œæˆé¡µé¢éœ€è¦æ›´æ–°æ§åˆ¶å™¨å‡½æ•°ï¼Œåœ¨æ•°æ®åº“ä¸­æå–è®°å½•çš„æŠ€æœ¯ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªå¯ç”¨äºå‘ˆç°é¡µé¢çš„è§†å›¾ï¼ˆæ¨¡æ¿ï¼‰</li></ul><p id="1f6694d5-ea46-8029-b01d-d317207d9be9" class=""><strong>è·¯ç”±ï¼š</strong></p><ul id="1f6694d5-ea46-80d2-ac0b-e4669d2f7e0d" class="bulleted-list"><li style="list-style-type:disc">å…ˆå‰åˆ›å»ºç±»ç´¢å¼•é¡µçš„è·¯ç”±ï¼Œæ‰€æœ‰è·¯ç”±å‡½æ•°å®šä¹‰åœ¨/routes/catalog.jsä¸­<ul id="1f6694d5-ea46-80df-bd57-f9144865fde3" class="bulleted-list"><li style="list-style-type:circle">router.get(&quot;/&quot;, book_controller.index); // å®é™…ä¸Šï¼Œå®ƒæ˜ å°„åˆ° /catalog/ï¼Œå› ä¸ºæˆ‘ä»¬å¯¼å…¥è·¯ç”±æ—¶ä½¿ç”¨äº† /catalog å‰ç¼€</li></ul></li></ul><ul id="1f6694d5-ea46-8099-84bd-c849fe5f7afd" class="bulleted-list"><li style="list-style-type:disc">åœ¨/controllers/bookController.jsä¸­ï¼Œå®šä¹‰å›è°ƒå‡½æ•°å‚æ•°ï¼ˆbook_controller.indexï¼‰<ul id="1f6694d5-ea46-80fa-85d4-eaf41b4a8f11" class="bulleted-list"><li style="list-style-type:circle">exports.index = asyncHandlerï¼ˆasync ï¼ˆreqã€resã€nextï¼‰â‡’{<ul id="1f6694d5-ea46-8066-929c-e2ef0664ff19" class="bulleted-list"><li style="list-style-type:square">res.sendï¼ˆâ€œNOT IMPLEMENTED: SITE HOME PAGEâ€ï¼‰ï¼›</li></ul></li></ul><ul id="1f6694d5-ea46-80c9-be0f-fde39612507f" class="bulleted-list"><li style="list-style-type:circle">}ï¼‰ï¼›</li></ul><ul id="1f6694d5-ea46-80a7-9127-fb57e6b11719" class="bulleted-list"><li style="list-style-type:circle">æ‰©å±•è¿™ä¸ªæ§åˆ¶å™¨å‡½æ•°ï¼Œä»æˆ‘ä»¬çš„æ¨¡å‹ä¸­è·å–ä¿¡æ¯ï¼Œç„¶åä½¿ç”¨æ¨¡æ¿ï¼ˆè§†å›¾ï¼‰æ¸²æŸ“å®ƒ</li></ul></li></ul><p id="1f6694d5-ea46-8011-9d69-f04158892741" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-8038-be48-fb615209dce6" class="bulleted-list"><li style="list-style-type:disc">ç´¢å¼•æ§åˆ¶å™¨å‡½æ•°éœ€è¦è·å–ä¸€ä¸‹æœ‰å…³ä¿¡æ¯ï¼Œå³æ•°æ®åº“æœ‰å¤šå°‘Bookã€BookInstanceï¼Œå¯ç”¨çš„BookInstanceã€Authorã€Genreè®°å½•ï¼Œè¿™äº›æ•°æ®æ¸²æŸ“åˆ°æ¨¡æ¿ä¸­ï¼Œæ¥åˆ›å»ºHTMLé¡µé¢ï¼Œç„¶åå°†å…¶è¿”å›åˆ°HTTPå“åº”ä¸­ã€‚</li></ul><ul id="1f6694d5-ea46-80e3-9daf-d56ba531824e" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/bookController.jsï¼Œåœ¨æ–‡ä»¶é¡¶éƒ¨ï¼Œå¯ä»¥çœ‹åˆ°å¯¼å‡ºçš„indexï¼ˆï¼‰å‡½æ•°<ul id="1f6694d5-ea46-80b1-bbe8-f1c90d9fb337" class="bulleted-list"><li style="list-style-type:circle">const Book = require(&quot;../models/book&quot;);<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f6694d5-ea46-80ea-a8dd-da74f12a8ba5" class="">exports.index = asyncHandler(async (req, res, next) =&gt; {<br/>res.send(&quot;NOT IMPLEMENTED: Site Home Page&quot;);<br/>});<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-8052-9aaa-dac563c8572b" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨ä»¥ä¸‹ä»£ç æ¥æ›¿æ¢ä¸Šè¿°ç‰‡æ®µï¼Œç¬¬ä¸€æ­¥æ˜¯å¯¼å…¥requireï¼ˆï¼‰æ‰€æœ‰æ¨¡å‹ã€‚å°†ä½¿ç”¨ä»–ä»¬æ¥è·å–è®°å½•çš„æŠ€æœ¯ï¼Œä»£ç åŒæ ·éœ€è¦express-async-handlerï¼Œå¯ä»¥æ•è·è·¯ç”±å¤„ç†å™¨å‡½æ•°æŠ›å‡ºçš„å¼‚å¸¸<ul id="1f6694d5-ea46-803c-8a91-cc85bc973918" class="bulleted-list"><li style="list-style-type:circle">const Book = require(&quot;../models/book&quot;);<br/>const Author = require(&quot;../models/author&quot;);<br/>const Genre = require(&quot;../models/genre&quot;);<br/>const BookInstance = require(&quot;../models/bookinstance&quot;);<br/><p id="1f6694d5-ea46-80a4-bc95-fc61f98c085c" class="">const asyncHandler = require(&quot;express-async-handler&quot;);</p><p id="1f6694d5-ea46-80c6-9585-d437d2e9950c" class="">exports.index = asyncHandler(async (req, res, next) =&gt; {<br/>// å¹¶è¡Œè·å–ä¹¦çš„è¯¦ç»†ä¿¡æ¯ã€ä¹¦å®ä¾‹ã€ä½œè€…å’Œä½“è£çš„æ•°é‡<br/>const [<br/>numBooks,<br/>numBookInstances,<br/>numAvailableBookInstances,<br/>numAuthors,<br/>numGenres,<br/>] = await Promise.all([<br/>Book.countDocuments({}).exec(),<br/>BookInstance.countDocuments({}).exec(),<br/>BookInstance.countDocuments({ status: &quot;Available&quot; }).exec(),<br/>Author.countDocuments({}).exec(),<br/>Genre.countDocuments({}).exec(),<br/>]);<br/></p><p id="1f6694d5-ea46-801c-bd8d-db4d961f2cf3" class="">res.render(&quot;index&quot;, {<br/>title: &quot;Local Library Home&quot;,<br/>book_count: numBooks,<br/>book_instance_count: numBookInstances,<br/>book_instance_available_count: numAvailableBookInstances,<br/>author_count: numAuthors,<br/>genre_count: numGenres,<br/>});<br/>});<br/></p></li></ul><ul id="1f6694d5-ea46-803f-a6a8-fa1c41a43bc4" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨countDocumentsï¼ˆï¼‰Fangfæ¥è·å–æ¯ä¸ªæ¨¡å‹çš„å®ä¾‹ä¸ªæ•°ï¼Œåœ¨æ¨¡å‹ä¸Šè°ƒç”¨ç›–æˆ¿å•Šï¼Œå¹¶ä½¿ç”¨ä¸€ç»„å¯é€‰çš„æ¡ä»¶è¿›è¡ŒåŒ¹é…ï¼Œç„¶åè¿”å›ä¸€ä¸ªQueryå¯¹è±¡ï¼Œç´§æ¥ç€æˆ‘ä»¬å¯ä»¥è°ƒç”¨exexï¼ˆï¼‰æ¥è¿›è¡ŒæŸ¥è¯¢æ“ä½œï¼Œå…¶è¿”å›ä¸€ä¸ªPromiseå¯¹è±¡ï¼Œè¯¥Promiseå¯¹è±¡è¦ä¹ˆå…‘ç°ç»“æœï¼Œè¦ä¹ˆå†å‡ºç°æ•°æ®åº“é”™è¯¯æ—¶è¢«æ‹’ç»</li></ul><ul id="1f6694d5-ea46-804d-9286-d1e8ce03a571" class="bulleted-list"><li style="list-style-type:circle">å› ä¸ºå¯¹æ–‡æ¡£æ•°é‡æŸ¥è¯¢çš„æ“ä½œæ—¶ç‹¬ç«‹çš„ï¼Œä½¿ç”¨Promise.allï¼ˆï¼‰ï¼Œæ¥è¿è¡Œè¿™äº›æŸ¥è¯¢è¯·æ±‚ï¼Œè¯¥æ–¹æ³•è¿”å›ä¸€ä¸ªæ–°çš„Promiseï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨awaitæ¥ç­‰å¾…å…¶å®Œæˆï¼ˆå³æ­¤å‡½æ•°çš„æ‰§è¡Œä¼šåœ¨awaitå¤„é˜»å¡ï¼‰ï¼Œå½“æ‰€æœ‰æŸ¥è¯¢å®Œæˆæ—¶ï¼Œallï¼ˆï¼‰Fanhuidepromiseä¼šå…‘ç°ï¼Œä¾¿ä¼šç»§ç»­æ‰§è¡Œè·¯ç”±å¤„ç†å‡½æ•°ï¼Œå¹¶ä½¿ç”¨æ•°æ®åº“æŸ¥è¯¢çš„ç»“æœå¡«å……æ•°ç»„</li></ul><ul id="1f6694d5-ea46-8027-aa29-f5d58f69bf5f" class="bulleted-list"><li style="list-style-type:circle">æˆåŠŸåï¼Œå›è°ƒå‡½æ•°è°ƒç”¨res.renderï¼ˆï¼‰ï¼ŒæŒ‡å®šindexè§†å›¾ï¼Œä»¥åŠä¸€ä¸ªå¯¹è±¡åŒ…å«äº†è¦æ’å…¥å…¶ä¸­çš„æ•°æ®ï¼ˆè¿™åŒ…æ‹¬æˆ‘ä»¬æ¨¡å‹è®¡æ•°çš„ç»“æœå¯¹è±¡ï¼‰ã€‚æ•°æ®ä»¥é”®å€¼å¯¹å½¢å¼æä¾›ï¼Œå¯ä»¥ä½¿ç”¨é”®åœ¨æ¨¡æ¿ä¸­è®¿é—®</li></ul></li></ul><ul id="1f6694d5-ea46-809c-ade5-c575bd551a45" class="bulleted-list"><li style="list-style-type:disc">ä»£ç ç®€å•ï¼Œæ˜¯å› ä¸ºå¯ä»¥å‡è®¾æ•°æ®åº“æŸ¥è¯¢æˆåŠŸï¼Œå¦‚æœä»»ä½•æ“ä½œå¤±è´¥ï¼ŒæŠ›å‡ºçš„ä¸€åœºä¼šè¢«asyncHandlerï¼ˆï¼‰æ•è·ç„¶åä¼ é€’ç»™é“¾ä¸­çš„ä¸‹ä¸€ä¸ªnextä¸­é—´ä»¶å¤„ç†å™¨</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f6694d5-ea46-8071-82f0-fe63442dec43"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f6694d5-ea46-8021-8fd1-f91b865db1af" class="">Pugæ¨¡æ¿ä¸­ï¼Œå¦‚æœä½¿ç”¨äº†ä¸ºä¼ å…¥çš„é”®æˆ–å˜é‡ï¼Œå®ƒå°†è¢«æ¸²æŸ“ä¸ºç©ºå­—ç¬¦ä¸²ï¼Œå¹¶ä¸”ä¼šåœ¨è¡¨è¾¾å¼ä¸­è¢«æ±‚å€¼ä¸ºfalseï¼Œè€Œå…¶ä»–çš„æ¨¡æ¿è¯­è¨€å¯èƒ½ä¼šè¦æ±‚ä½ ä¸ºæ‰€ä½¿ç”¨çš„æ‰€æœ‰å¯¹è±¡ä¼ é€’å€¼</p></div></figure><p id="1f6694d5-ea46-8099-a8b2-d733e3862bce" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80bb-a96f-ead52b404354" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/views/index.pugï¼Œä½¿ç”¨å¦‚ä¸‹ä»£ç æ›¿æ¢å†…å®¹<ul id="1f6694d5-ea46-8046-9132-ff9dcb80b9bc" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-80c4-8a2c-d1216d2cc375" class="">block content<br/>h1= title<br/>p Welcome to #[em LocalLibrary], a very basic Express website developed as a tutorial example on the Mozilla Developer Network.<br/></p><p id="1f6694d5-ea46-8050-9cec-eaa8335b1b9f" class="">h1 Dynamic content</p><p id="1f6694d5-ea46-80d6-a327-d82472405ba0" class="">p The library has the following record counts:</p><p id="1f6694d5-ea46-80d9-bd25-cc337f4ee019" class="">ul<br/>li #[strong Books:] !{book_count}<br/>li #[strong Copies:] !{book_instance_count}<br/>li #[strong Copies available:] !{book_instance_available_count}<br/>li #[strong Authors:] !{author_count}<br/>li #[strong Genres:] !{genre_count}<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80a0-9ca1-d663deccb6f2" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªè§†å›¾å¾ˆç®€å•ï¼Œæ‰©å±•äº†layout.pugåŸºæœ¬æ¨¡æ¿ï¼Œæ¶µç›–äº†åä¸ºcontentçš„æ¨¡å—blockã€‚ç¬¬ä¸€ä¸ªh1æ ‡é¢˜ã€‚å°†æ˜¯ä¼ é€’ç»™renderï¼ˆï¼‰å‡½æ•°çš„titleå˜é‡çš„è½¬ç§»æ–‡æœ¬-è¯·æ³¨æ„â€˜h1=â€™çš„ä½¿ç”¨æ–¹å¼ä½¿å¾—æ¥ä¸‹æ¥æ–‡æœ¬ï¼Œè¢«è§†ä¸ºJSè¡¨è¾¾å¼ï¼Œç„¶åæ”¾å…¥ä¸€ä¸ªä»‹ç»æœ¬é¡¹ç›®çš„æ®µè½</li></ul><ul id="1f6694d5-ea46-8057-9777-f9c1e21ddefc" class="bulleted-list"><li style="list-style-type:disc">åœ¨åŠ¨æ€å†…å®¹æ ‡é¢˜ä¸‹ï¼Œæˆ‘ä»¬æ£€æŸ¥ä»renderï¼ˆï¼‰å‡½æ•°ä¼ å…¥çš„é”™è¯¯å˜é‡ï¼Œæ˜¯å¦å·²å®šä¹‰ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™åˆ—å‡ºè¿™ä¸ªé”™è¯¯ï¼Œå¦ï¼Œåˆ™ä»dataå˜é‡ä¸­ï¼Œè·å–å¹¶åˆ—å‡ºæ¯ä¸ªæ¨¡å‹çš„å‰¯æœ¬æ•°é‡</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f6694d5-ea46-80fb-8dc2-f5dba111b1ca"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f6694d5-ea46-8014-9153-ca5fa071e77c" class="">æ²¡æœ‰è½¬ä¹‰è®¡æ•°å€¼ï¼ˆi.eæˆ‘ä»¬ä½¿ç”¨ï¼{}è¯­æ³•ï¼‰ï¼Œå› ä¸ºè®¡æ•°å€¼å·²ç»è¢«è®¡ç®—è¿‡ï¼Œå¦‚æœä¿¡æ¯æ˜¯ç”±ç»ˆç«¯ç”¨æˆ·æä¾›çš„ï¼Œæˆ‘ä»¬ä¼šè½¬ä¹‰è¯¥å˜é‡ï¼Œç”¨äºæ˜¾ç¤º</p></div></figure><p id="1f6694d5-ea46-805d-8f00-dd973da9293e" class=""><strong>æ˜¾ç¤ºç»“æœå¦‚ä¸‹</strong></p><figure id="1f6694d5-ea46-8031-83af-d57acdd9a1df" class="image"><a href="image%205.png"><img style="width:561.1875px" src="image%205.png"/></a></figure><ul id="1f6694d5-ea46-8090-bf5e-d61699c5b491" class="bulleted-list"><li style="list-style-type:disc">æ— æ³•ä½¿ç”¨ä¾§è¾¹æ é“¾æ¥ï¼Œå› ä¸ºè¿™äº›ç½‘é¡µçš„ç½‘å€ï¼Œè§†å›¾ã€æ¨¡æ¿å°šæœªå®šä¹‰ã€‚</li></ul><p id="1f6694d5-ea46-80fc-89a4-c38fb7982b59" class=""><strong><span style="border-bottom:0.05em solid">004-ä¹¦æœ¬åˆ—è¡¨é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-8085-b9d0-cfa600188814" class="bulleted-list"><li style="list-style-type:disc">æ¥ä¸‹æ¥å®ç°ä¹¦æœ¬åˆ—è¡¨é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢éœ€è¦å‘ˆç°æ•°æ®åº“ä¸­æ‰€æœ‰ä¹¦æœ¬çš„åˆ—è¡¨ï¼ŒåŒ…å«æ¯æœ¬ä¹¦çš„ä½œè€…ã€æ ‡é¢˜ï¼Œæ ‡é¢˜å°†æˆä¸ºä¸€ä¸ªé“¾æ¥ï¼Œè¿æ¥åˆ°ä¹¦æœ¬è¯¦ç»†å†…å®¹é¡µé¢</li></ul><p id="1f6694d5-ea46-80ee-9910-dbdb9e8d6d2d" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-8012-a01d-d3833d42aeba" class="bulleted-list"><li style="list-style-type:disc">ä¹¦æœ¬åˆ—è¡¨æ§åˆ¶å™¨å‡½æ•°éœ€è¦è·å–æ•°æ®åº“ä¸­æ‰€æœ‰çš„Bookå¯¹è±¡çš„åˆ—è¡¨ï¼Œå¯¹å®ƒä»¬è¿›è¡Œæ’åºï¼Œç„¶åå°†ä»–ä»¬ç»™æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ul><ul id="1f6694d5-ea46-8063-8d14-f9088bc79400" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/bookController.jsï¼Œæ‰¾åˆ°å¯¼å‡ºçš„book_listæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¹¶æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç <ul id="1f6694d5-ea46-809c-8695-cec9fdbcd158" class="bulleted-list"><li style="list-style-type:circle">// å‘ˆç°æ•°æ®åº“ä¸­æ‰€æœ‰ä¹¦æœ¬çš„åˆ—è¡¨<br/>exports.book_list = asyncHandler(async (req, res, next) =&gt; {<br/>const allBooks = await Book.find({}, &quot;title author&quot;)<br/>.sort({ title: 1 })<br/>.populate(&quot;author&quot;)<br/>.exec();<br/><p id="1f6694d5-ea46-8075-ae74-e1b77c40e10b" class="">res.render(&quot;book_list&quot;, { title: &quot;Book List&quot;, book_list: allBooks });<br/>});<br/></p></li></ul></li></ul><p id="1f6694d5-ea46-80cc-a69c-edc22031174c" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-803e-8027-e017141330c1" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/book_list.pugå¹¶å†™å…¥ä¸€ä¸‹å†…å®¹<ul id="1f6694d5-ea46-8020-aa3a-f240defc3325" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-8079-8cbb-cef47f2c5e98" class="">block content<br/>h1= title<br/>if book_list.length<br/>ul<br/>each book in book_list<br/>li<br/>a(href=book.url) #{book.title}<br/>|  (#{<br/><a href="http://book.author.name/">book.author.name</a>})</p><p id="1f6694d5-ea46-809a-a6b7-fa8471c7f5b7" class="">else<br/>p There are no books.<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-8003-87ee-feb11438287f" class="bulleted-list"><li style="list-style-type:disc">è§†å›¾æ‰©å±•äº†layout.pugåŸºæœ¬æ¨¡æ¿ï¼Œå¹¶è¦†ç›–äº†åä¸ºcontentçš„åŒºå—ï¼ˆblockï¼‰ï¼Œä»–å…ˆæ˜¯äº†æˆ‘ä»¬ä»æ§åˆ¶å™¨ä¼ å…¥çš„æ ‡é¢˜titleï¼ˆä½¿ç”¨renderï¼ˆï¼‰æ–¹æ³•ï¼‰ï¼Œç„¶åä½¿ç”¨each-inè¯­æ³•å˜é‡book_listå˜é‡ï¼Œä¸ºæ¯æœ¬ä¹¦åˆ›å»ºä¸€ä¸ªåˆ—è¡¨é¡¹ï¼Œæ¥æ˜¾ç¤ºä¹¦åã€å¹¶ä½œä¸ºä¹¦çš„è¯¦ç»†ä¿¡æ¯é¡µé¢çš„é“¾æ¥ï¼Œåé¢è·Ÿç€ä½œè€…å§“åï¼Œå¦‚æœbook_listé¡µé¢æ²¡æœ‰ä¹¦ï¼Œåˆ™æ‰§è¡Œelseå­—å¥ï¼Œå¹¶æ˜¾ç¤ºæ–‡æœ¬there are no books</li></ul><ul id="1f6694d5-ea46-804d-9902-dbcc7a532058" class="bulleted-list"><li style="list-style-type:disc">æ¯æœ¬ä¹¦è¢«å®šä¹‰ä¸ºä¸¤è¡Œï¼Œç¬¬äºŒè¡Œä½¿ç”¨ç®¡é“ï¼Œè¿™ç§æ–¹æ³•æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå¦‚æœä½œè€…å§“åä½äºä¸Šä¸€è¡Œï¼Œä»–å°†æˆä¸ºè¿æ¥çš„ä¸€éƒ¨åˆ†</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f6694d5-ea46-80c8-a8b4-cfdbf243bfcd"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f6694d5-ea46-801d-a4c1-eb446fdd9545" class="">ä½¿ç”¨book.urä¸ºæ¯æœ¬ä¹¦æä¾›è¯¦ç»†è®°å½•çš„é“¾æ¥ï¼ˆæˆ‘ä»¬å·²ç»å®ç°äº†æ­¤è·¯ç”±ï¼Œå¹¶æœªå®ç°æ­¤é¡µé¢ï¼‰ï¼Œè¿™æ˜¯Bookæ¨¡å‹çš„æ‚‰å°¼å±æ€§ï¼Œå®ƒä½¿ç”¨æ¨¡å‹å®ä¾‹çš„_idå­—æ®µï¼Œç”Ÿæˆå”¯ä¸€çš„URLè·¯å¾„</p></div></figure><p id="1f6694d5-ea46-8065-8539-cd90ddcd310a" class=""><strong>æ˜¾ç¤ºç»“æœå¦‚ä¸‹ï¼š</strong></p><figure id="1f6694d5-ea46-8002-91e6-c6b02fbb492e" class="image"><a href="image%206.png"><img style="width:561.1875px" src="image%206.png"/></a></figure><p id="1f6694d5-ea46-80f3-8201-c34e28ec7c75" class=""><strong><span style="border-bottom:0.05em solid">004-ä¹¦æœ¬å®ä¾‹åˆ—è¡¨é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-80fa-8b7c-ec94992395ce" class="bulleted-list"><li style="list-style-type:disc">æ¥ä¸‹æ¥å®ç°å›¾ä¹¦é¦†ä¸­çš„æ‰€æœ‰ä¹¦æœ¬å®ä¾‹BookInstanceçš„åˆ—è¡¨é¡µé¢ï¼Œè¿™ä¸ªé¡µé¢éœ€è¦åŒ…å«ä¸æ¯ä¸ªBookInstanceï¼ˆé“¾æ¥åˆ°å…¶è¯¦ç»†ä¿¡æ¯é¡µé¢ï¼‰å…³è”çš„ä¹¦æœ¬Bookæ ‡é¢˜ï¼Œä»¥åŠBookInstanceæ¨¡å‹ä¸­çš„å…¶ä»–ä¿¡æ¯ï¼ŒåŒ…å«æ¯ä¸ªå‰¯æœ¬çš„çŠ¶æ€ã€ä¸‹è¿°å“ç‰Œã€å”¯ä¸€IDã€‚å”¯ä¸€IDçš„æ–‡æœ¬åº”è¯¥é“¾æ¥åˆ°BookInstanceè¯¦ç»†ä¿¡æ¯é¡µé¢</li></ul><p id="1f6694d5-ea46-804b-938c-d59b57d49367" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-80e7-8f12-e61efae91fe5" class="bulleted-list"><li style="list-style-type:disc">BookInstanceåˆ—è¡¨æ§åˆ¶å™¨å‡½æ•°éœ€è¦è·å–æ‰€æœ‰ä¹¦æœ¬å®ä¾‹çš„åˆ—è¡¨ï¼Œå¡«å……å…³è”çš„ä¹¦æœ¬ä¿¡æ¯ï¼Œç„¶åå°†åˆ—è¡¨ä¼ é€’ç»™æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ul><ul id="1f6694d5-ea46-8080-8c43-ea1a8fd0632c" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/bookinstanceController.jsï¼Œæ‰¾åˆ°å¯¼å‡ºçš„bookinstance_listï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•æ²¡ä½¿ç”¨ä¸‹é¢ä»£ç æ›¿æ¢<ul id="1f6694d5-ea46-804c-92b8-d8922b2585f4" class="bulleted-list"><li style="list-style-type:circle">// å‘ˆç°æ‰€æœ‰ä¹¦æœ¬å®ä¾‹ï¼ˆBookInstanceï¼‰çš„åˆ—è¡¨<br/>exports.bookinstance_list = asyncHandler(async (req, res, next) =&gt; {<br/>const allBookInstances = await BookInstance.find().populate(&quot;book&quot;).exec();<br/><p id="1f6694d5-ea46-8002-b8dc-d8bb1154e30d" class="">res.render(&quot;bookinstance_list&quot;, {<br/>title: &quot;Book Instance List&quot;,<br/>bookinstance_list: allBookInstances,<br/>});<br/>});<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80b0-a896-f6665dd040fb" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±å¤„ç†å™¨è°ƒç”¨BookInstanceæ¨¡å‹çš„findï¼ˆï¼‰å‡½æ•°ï¼Œç„¶åé“¾å¼è°ƒç”¨populateï¼ˆï¼‰å‡½æ•°ï¼Œå¹¶å°†bookå­—æ®µä½œä¸ºå‚æ•°ä¼ é€’-å°†ç”¨å®Œæ•´çš„Bookæ–‡æ¡£æ›¿æ¢æ¯ä¸ªBookInstanceå¯¹è±¡ä¸­çš„ä¹¦æœ¬IDï¼Œæœ€ååœ¨é“¾å¼è°ƒç”¨çš„æœ«å°¾è°ƒå›ç”¨execï¼ˆï¼‰å‡½æ•°æ¥æ‰§è¡ŒæŸ¥è¯¢æ“ä½œå¹¶è¿”å›ä¸€ä¸ªPromise</li></ul><ul id="1f6694d5-ea46-8017-8c3e-ee8e159182b4" class="bulleted-list"><li style="list-style-type:disc">è·¯ç”±å¤„ç†å™¨ä½¿ç”¨awaitå…³é”®å­—æ¥ç­‰å¾…Promiseå¯¹è±¡ï¼Œç›´è‡³Promiseå¯¹è±¡è¢«è§£å†³æ‰ä¼šæ‰§è¡Œåç»­ä»£ç ï¼Œå¦‚æœPromiseå¯¹è±¡è¢«å…‘ç°ï¼ŒæŸ¥è¯¢ç»“æœè¢«ä¿å­˜åˆ°allBookInstanceså˜é‡ä¸­ï¼Œç„¶åè·¯ç”±å™¨ç»§ç»­æ‰§è¡Œï¼Œ</li></ul><ul id="1f6694d5-ea46-8059-be6f-eb9edacbeb71" class="bulleted-list"><li style="list-style-type:disc">ä»£ç æœ€åçš„éƒ¨åˆ†è°ƒç”¨renderï¼ˆï¼‰å‡½æ•°ï¼ŒæŒ‡å®šbookinstance_listï¼ˆ.pugï¼‰æ¨¡æ¿ï¼Œå¹¶å°†titleå’Œbookinstance_listçš„å€¼ä¼ é€’åˆ°æ¨¡æ¿ä¸­</li></ul><p id="1f6694d5-ea46-80fa-bd34-cc294a5b7e2e" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80e7-9995-c4eaf18ab766" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/bookinstance_list.pugï¼Œå¹¶å¤åˆ¶ç²˜è´´ä¸‹é¢çš„æ–‡æœ¬<ul id="1f6694d5-ea46-8044-ac8b-f99cb98fcb39" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-806f-8c2e-e45c81f9062c" class="">block content<br/>h1= title<br/></p><p id="1f6694d5-ea46-80ea-b8a5-f8dd680d240f" class="">if bookinstance_list.length<br/>ul<br/>each val in bookinstance_list<br/>li<br/>a(href=val.url) #{val.book.title} : #{val.imprint} -Â <br/>if val.status==&#x27;Available&#x27;<br/>span.text-success #{val.status}<br/>else if val.status==&#x27;Maintenance&#x27;<br/>span.text-danger #{val.status}<br/>else<br/>span.text-warning #{val.status}<br/>if val.status!=&#x27;Available&#x27;<br/>span  (Due: #{val.due_back} )<br/></p><p id="1f6694d5-ea46-809d-80e0-edc7d80e3307" class="">else<br/>p There are no book copies in this library.<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-8034-a976-c404d52c4890" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªè§†å›¾ç›¸ä¼¼äºå…¶ä»–è§†å›¾ï¼Œæ‰©å±•äº†å¸ƒå±€ï¼Œæ›¿æ¢äº†å†…å®¹contentåŒºå—ï¼Œæ˜¾ç¤ºäº†ä»æ§åˆ¶å™¨ä¼ å…¥çš„æ ‡é¢˜titleï¼Œç—…å˜ç†è®ºbookinstance_listä¸­çš„æ‰€æœ‰ä¹¦ç±å‰¯æœ¬ï¼Œå¯¹äºæ¯ä¸ªå‰¯æœ¬ï¼Œæˆ‘ä»¬éƒ½ä¼šæ˜¾ç¤ºä»–çš„çŠ¶æ€ï¼ˆä½¿ç”¨é¢œè‰²ç¼–ç ï¼‰ï¼Œå¦‚æœä¹¦æœ¬bookä¸å¯ä»¥ï¼Œåˆ™æ˜¾ç¤ºå…¶é¢„æœŸè¿”å›æ—¥æœŸï¼Œè¿™é‡Œå¼•å…¥äº†ä¸€ä¸ªæ–°ç‰¹æ€§-å¯ä»¥åœ¨æ ‡ç­¾ä¹‹åä½¿ç”¨ç‚¹ç¬¦å·æ ‡è¯†ç¬¦æ¥æŒ‡å®šä¸€ä¸ªç±»åˆ«ã€‚è¿™é‡Œçš„span.text-successå°†è¢«ç¼–è¯‘ä¸º&lt;span class = â€˜text-successâ€™&gt;ï¼ˆä¹Ÿå¯ä»¥ä½¿ç”¨Puæ”¹å˜å†™ä¸ºspanï¼ˆclass = â€text-successâ€œï¼‰ï¼‰</li></ul><p id="1f6694d5-ea46-80d4-abf0-c08f78d100a5" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼š</strong></p><figure id="1f6694d5-ea46-8076-a0fb-c80496e38b2b" class="image"><a href="image%207.png"><img style="width:561.1875px" src="image%207.png"/></a></figure><p id="1f6694d5-ea46-805f-96d0-f705ff43a12f" class=""><strong><span style="border-bottom:0.05em solid">005-ä½¿ç”¨luxonåšæ—¥æœŸæ ¼å¼åŒ–ï¼š</span></strong></p><ul id="1f6694d5-ea46-80d1-ac68-f524c3851a74" class="bulleted-list"><li style="list-style-type:disc">æ¨¡å‹é»˜è®¤çš„æ—¥æœŸå‘ˆç°ä¸ºï¼š<em>Fri Apr 10 2020 12:49:58 GMT+0800 (ä¸­å›½æ ‡å‡†æ—¶é—´)</em>ã€‚</li></ul><ul id="1f6694d5-ea46-806f-b3d4-d3676b50a08c" class="bulleted-list"><li style="list-style-type:disc">æœ¬èŠ‚ä¸­å±•ç¤ºå¦‚ä½•åœ¨BookInstanceæ¨¡å‹ä¸­æ›´å‹å¥½çš„æ ¼å¼æ˜¾ç¤ºæ—¥æœŸï¼š2025 å¹´ 5 æœˆ 17 æ—¥</li></ul><ul id="1f6694d5-ea46-80a4-9ce5-c3c45f98518e" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨æ–¹æ³•æ˜¯åœ¨BookInstanceæ¨¡å‹ä¸­åˆ›å»ºä¸€ä¸ªè¿”å›æ ¼å¼åŒ–æ—¥æœŸçš„è™šæ‹Ÿå±æ€§ï¼Œä½¿ç”¨luxonæ¥æ ¼å¼åŒ–ï¼Œè¿™æ˜¯åº”è¯¥JSæ—¥æœŸåº“ï¼Œç”¨äºè§£æã€éªŒè¯ã€æ“ä½œã€æ ¼å¼åŒ–ã€æœ¬åœ°åŒ–æ—¥æœŸ</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f6694d5-ea46-800b-9e9c-dc086617ff04"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f6694d5-ea46-8092-a752-fda52bd35188" class="">å¯ä»¥ç›´æ¥åœ¨Pugæ¨¡æ¿ä¸­ä½¿ç”¨luxonæ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä¹Ÿå¯ä»¥åœ¨å…¶ä»–åœ°æ–¹æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼Œä½¿ç”¨è™šæ‹Ÿå±æ€§å…è®¸ä¸å½“å‰è·å–due_dateå®Œå…¨ç›¸åŒçš„æ–¹å¼è·å–æ ¼å¼åŒ–æ—¥æœŸ</p></div></figure><p id="1f6694d5-ea46-803a-a43e-db256b3b9f0a" class=""><strong>å®‰è£…luxonï¼š</strong></p><ul id="1f6694d5-ea46-80ba-ab80-e1978df22c75" class="bulleted-list"><li style="list-style-type:disc">é¡¹ç›®æ ¹ç›®å½•è¾“å…¥å‘½ä»¤<ul id="1f6694d5-ea46-8098-af50-ced0b78655f3" class="bulleted-list"><li style="list-style-type:circle">npm install luxon</li></ul></li></ul><p id="1f6694d5-ea46-807d-b15c-c5bfe25a4af8" class=""><strong>åˆ›å»ºè™šæ‹Ÿå±æ€§ï¼š</strong></p><ul id="1f6694d5-ea46-80e7-ae19-c207b609c56a" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/models/bookinstance.jsï¼Œ</li></ul><ul id="1f6694d5-ea46-802d-853e-f9e22c0bcecd" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ–‡ä»¶æœ€ä¸Šæ–¹å¼•å…¥luxon<ul id="1f6694d5-ea46-803a-8ae6-c210934b73dd" class="bulleted-list"><li style="list-style-type:circle">const {DateTime} = require(â€luxonâ€)</li></ul></li></ul><ul id="1f6694d5-ea46-801e-b705-ee1404553f0c" class="bulleted-list"><li style="list-style-type:disc">åœ¨URLå±æ€§åé¢åŠ å…¥è™šæ‹Ÿå±æ€§due_back_formatted<ul id="1f6694d5-ea46-80d0-bdc5-c2b780b93546" class="bulleted-list"><li style="list-style-type:circle">BookInstanceSchema.virtual(&quot;due_back_formatted&quot;).get(function () {<br/>return DateTime.fromJSDate(this.due_back).toLocaleString(DateTime.DATE_MED);<br/>});<br/></li></ul></li></ul><p id="1f6694d5-ea46-802c-9715-ece5091cd09d" class=""><strong>æ›´æ–°è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-807a-98d9-fb8afdcf1140" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/views/bookinstance_list.pugï¼Œç„¶åç”¨due_back_formattedå–ä»£due_back<ul id="1f6694d5-ea46-80df-a1c9-ca45330e8570" class="bulleted-list"><li style="list-style-type:circle">if val.status != &#x27;Available&#x27;<br/>//span  (Due: #{val.due_back} )<br/>span  (Due: #{val.due_back_formatted} )<br/></li></ul></li></ul><p id="1f6694d5-ea46-800a-9d1a-f71aea106147" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹</strong></p><figure id="1f6694d5-ea46-8082-8c6a-e0388b8c639b" class="image"><a href="image%208.png"><img style="width:561.1875px" src="image%208.png"/></a></figure><p id="1f6694d5-ea46-8035-94e4-e2faa5d46c37" class=""><strong><span style="border-bottom:0.05em solid">006-ä½œè€…æ¸…å•é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-8095-b801-e62e5a65e5bc" class="bulleted-list"><li style="list-style-type:disc">ä½œè€…åˆ—è¡¨é¡µé¢ï¼Œéœ€è¦å‘ˆç°æ•°æ®åº“ä¸­æ‰€æœ‰ä½œè€…çš„åˆ—è¡¨ï¼Œæœ‰æ¯ä½ä½œè€…çš„åå­—ï¼Œå¹¶è¿æ¥åˆ°ä½œè€…è¯¦ç»†å†…å®¹é¡µé¢ï¼Œå‡ºç”Ÿä¸æ­»äº¡æ—¥æœŸåœ¨æ¯å‘¨æœ«ï¼Œå¹¶ä¸”åœ¨åŒä¸€åˆ—</li></ul><p id="1f6694d5-ea46-809f-9d09-c3abca6143e3" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-807b-a0f2-dfe14011cb7b" class="bulleted-list"><li style="list-style-type:disc">ä½œè€…åˆ—è¡¨æ§åˆ¶å™¨å‡½æ•°ï¼Œéœ€è¦è·å–æ‰€æœ‰ä½œè€…å®ä¾‹çš„åˆ—è¡¨ï¼Œç„¶åå°†è¿™äº›å®åŠ›ä¼ é€’ç»™æ¨¡æ¿è¿›è¡Œæ¸²æŸ“</li></ul><ul id="1f6694d5-ea46-8002-9574-c72844730f79" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/authorController.jsï¼Œæ–‡ä»¶é¡¶éƒ¨é™„è¿‘ï¼Œæ‰¾åˆ°å¯¼å‡ºçš„author_listæ§åˆ¶å™¨æ–¹æ³•ï¼Œå¹¶å°†å…¶æ›¿æ¢ä¸ºä¸‹é¢ä»£ç <ul id="1f6694d5-ea46-8038-bf5b-dded5c430e51" class="bulleted-list"><li style="list-style-type:circle">// Display list of all Authors.<br/>exports.author_list = function (req, res, next) {<br/>Author.find()<br/>.sort([[&quot;family_name&quot;, &quot;ascending&quot;]])<br/>.exec(function (err, list_authors) {<br/>if (err) {<br/>return next(err);<br/>}<br/>//Successful, so render<br/>res.render(&quot;author_list&quot;, {<br/>title: &quot;Author List&quot;,<br/>author_list: list_authors,<br/>});<br/>});<br/>};<br/></li></ul></li></ul><ul id="1f6694d5-ea46-80d5-a698-e03ace56de3e" class="bulleted-list"><li style="list-style-type:disc">è¯¥æ–¹æ³•ä½¿ç”¨æ¨¡å‹çš„findï¼ˆï¼‰ã€sortï¼ˆï¼‰ã€execï¼ˆï¼‰å‡½æ•°ï¼Œä»¥è¿”å›æ‰€æœ‰Authorå¯¹è±¡ï¼Œå¹¶æŒ‰family_nameçš„å­—ç¬¦é¡ºåºæ’åˆ—ï¼Œä¼ é€’ç»™execï¼ˆï¼‰æ–¹æ³•çš„å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œå¹¶å°†ä¼ å…¥ä»»ä½•é”™è¯¯ï¼ˆnullï¼‰ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæˆåŠŸæ—¶ï¼Œä¼ å…¥æ‰€æœ‰ä½œè€…åˆ—è¡¨ï¼Œå¦‚æœå‡ºç°é”™è¯¯ï¼Œåˆ™è°ƒç”¨å¸¦æœ‰é”™è¯¯å€¼çš„ä¸‹ä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼Œå¦‚æœæ²¡æœ‰é”™è¯¯ï¼Œå‘ˆç°author_listï¼ˆ.pugï¼‰æ¨¡æ¿ï¼Œä¼ é€’é¡µé¢æ ‡é¢˜titleï¼Œå’Œä½œè€…åˆ—è¡¨author_list</li></ul><p id="1f6694d5-ea46-80b5-b9ec-d56e5fd2bdec" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80f8-8463-c1af52606a1e" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/views/author_list.pugï¼Œä½¿ç”¨ä¸‹é¢æ–‡å­—æ›¿æ¢å†…å®¹<ul id="1f6694d5-ea46-803f-96c2-de3639881591" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-80d1-97ef-cd014da79c22" class="">block content<br/>h1= title<br/></p><p id="1f6694d5-ea46-8052-9feb-d0c53e2900de" class="">ul<br/>each author in author_list<br/>li<br/>a(href=author.url) #{<br/><a href="http://author.name/">author.name</a>}<br/>| (#{author.date_of_birth} - #{author.date_of_death})<br/></p><p id="1f6694d5-ea46-8030-8c90-dffd2c5e2892" class="">else<br/>li There are no authors.<br/></p></li></ul></li></ul><p id="1f6694d5-ea46-80b4-8c2f-c840602cca6e" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼š</strong></p><figure id="1f6694d5-ea46-801f-8cdc-cded3a56f5ca" class="image"><a href="image%209.png"><img style="width:561.1875px" src="image%209.png"/></a></figure><p id="1f6694d5-ea46-804b-8e78-c468b0a2bb7e" class=""><strong><span style="border-bottom:0.05em solid">åŒç†ï¼Œå®ç°ç§ç±»åˆ—è¡¨é¡µé¢</span></strong></p><p id="1f6694d5-ea46-806a-a2f2-d8dda1d764f3" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><p id="1f6694d5-ea46-8098-bc4e-ce3b17fdc3f6" class="">
</p><ul id="1f6694d5-ea46-8061-8195-c43da1ea3b63" class="bulleted-list"><li style="list-style-type:disc"><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f6694d5-ea46-80f4-b8b3-e35e5d5afd86" class="code"><code class="language-undefined">
exports.genre_list = async function (req, res, next) {
  try {
    // æŸ¥è¯¢æ‰€æœ‰ Genreï¼Œå¹¶æŒ‰åç§°å‡åºæ’åˆ—
    const genre_list = await genre.find().sort({ name: 1 }).exec();

    // æ¸²æŸ“æ¨¡æ¿å¹¶ä¼ é€’æ•°æ®
    res.render(&quot;genre_list&quot;, {
      title: &quot;Genre List&quot;,
      genre_list: genre_list,
    });
  } catch (err) {
    next(err);
  }
};</code></pre></li></ul><p id="1f6694d5-ea46-8010-88f2-eb44d042c596" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80bb-ae96-eb2bc13e9313" class="bulleted-list"><li style="list-style-type:disc"></li></ul><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f6694d5-ea46-80e2-8eda-c8971299a763" class="code"><code class="language-undefined">extends layout

block content
  h1= title
  
  if genre_list.length
    ul
      each genre in genre_list
        li 
          a(href=`/catalog/genre/${genre._id}`)= genre.name
  else
    p No genres found.
</code></pre><p id="1f6694d5-ea46-802a-837d-d8b94a68a1e6" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼š</strong></p><figure id="1f6694d5-ea46-806c-8a58-c6762fbd71d4" class="image"><a href="image%2010.png"><img style="width:561.1875px" src="image%2010.png"/></a></figure><p id="1f6694d5-ea46-80ad-b572-deee7e552942" class=""><strong><span style="border-bottom:0.05em solid">007-ç§ç±»ç»†èŠ‚é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-80c9-87fa-e2ee750f09bc" class="bulleted-list"><li style="list-style-type:disc">ç§ç±»ç»†èŠ‚é¡µé¢ï¼Œéœ€è¦åˆ©ç”¨_idå­—æ®µå€¼è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæ¥å‘ˆç°ç‰¹å®šç§ç±»å®ä¾‹çš„ä¿¡æ¯ï¼Œè¯¥é¡µé¢åº”è¯¥å‘ˆç°ç§ç±»åç§°ï¼Œå„ä¸ªç§ç±»çš„æ‰€æœ‰ä¹¦æœ¬åˆ—è¡¨ï¼ˆæ¯æœ¬ä¹¦éƒ½è¿æ¥åˆ°ä¹¦æœ¬çš„ç»†èŠ‚é¡µé¢ï¼‰</li></ul><p id="1f6694d5-ea46-800d-868c-f19918b4d017" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-80ee-ba32-d588d6583c0c" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/genreController.jsï¼Œå¼•å…¥asyncå’ŒBookæ¨¡ç»„<ul id="1f6694d5-ea46-8050-b45a-f8e41b64d275" class="bulleted-list"><li style="list-style-type:circle">var Book = requireï¼ˆâ€../models/bookâ€œï¼‰</li></ul><ul id="1f6694d5-ea46-800a-b9b9-d8cfb2bd5581" class="bulleted-list"><li style="list-style-type:circle">var async = requireï¼ˆâ€asyncâ€œï¼‰</li></ul></li></ul><ul id="1f6694d5-ea46-8070-b582-e62baa696840" class="bulleted-list"><li style="list-style-type:disc">æ‰¾åˆ°å¯¼å‡ºçš„genre_detailï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ›¿æ¢ä¸ºä¸‹é¢ä»£ç <ul id="1f6694d5-ea46-8049-95f5-d549b94fad20" class="bulleted-list"><li style="list-style-type:circle">// Display detail page for a specific Genre.<br/>exports.genre_detail = function (req, res, next) {<br/>async.parallel(<br/>{<br/>genre: function (callback) {<br/>Genre.findById(<br/><a href="http://req.params.id/">req.params.id</a>).exec(callback);<br/>},<br/><p id="1f6694d5-ea46-802e-b8a2-c931f8f462f6" class="">  genre_books: function (callback) {<br/>    Book.find({ genre: req.params.id }).exec(callback);<br/>  },<br/>},<br/>function (err, results) {<br/>  if (err) {<br/>    return next(err);<br/>  }<br/>  if (results.genre == null) {<br/>    // No results.<br/>    var err = new Error(&quot;Genre not found&quot;);<br/>    err.status = 404;<br/>    return next(err);<br/>  }<br/>  // Successful, so render<br/>  res.render(&quot;genre_detail&quot;, {<br/>    title: &quot;Genre Detail&quot;,<br/>    genre: results.genre,<br/>    genre_books: results.genre_books,<br/>  });<br/>},<br/><br/></p><p id="1f6694d5-ea46-80f8-89cf-c9cfa8e70503" class="">);<br/>};<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80ef-8aae-e2f29eeb837b" class="bulleted-list"><li style="list-style-type:disc">è¯¥æ–¹æ³•ä½¿ç”¨async.parallelï¼ˆï¼‰ï¼Œå¹¶è¡ŒæŸ¥è¯¢ç±»å‹åç§°ä»¥åŠç›¸å…³è”çš„ä¹¦æœ¬ï¼Œå¹¶åœ¨ä¸¤ä¸ªè¯·æ±‚å®Œæˆæ—¶å›è°ƒå‘ˆç°é¡µé¢</li></ul><ul id="1f6694d5-ea46-8066-8f0c-e0c0ef7dfd1a" class="bulleted-list"><li style="list-style-type:disc">æ‰€éœ€ç§ç±»è®°å½•çš„IDï¼Œåœ¨URLçš„æœ«å°¾ç¼–ç ï¼Œå¹¶æ ¹æ®è·¯ç”±å®šä¹‰ï¼ˆ/genre/ï¼šidï¼‰è‡ªåŠ¨æå–ï¼Œé€šè¿‡è¯·æ±‚å‚æ•°ï¼ˆreq.params.idï¼‰åœ¨æ§åˆ¶å™¨å†…è®¿é—®IDï¼Œåœ¨Genre.findByIdï¼ˆï¼‰ä¸­ç”¨äºè·å–å½“å‰ç§ç±»ï¼Œä»–è¿˜ç”¨äºè·å–ç¬¦åˆå½“å‰ç§ç±»çš„æ‰€æœ‰Bookå¯¹è±¡ï¼Œå°±æ˜¯åœ¨ç§ç±»å­—æ®µä¸­å…·æœ‰ç§ç±»IDçš„å“ªäº›Book.findï¼ˆ{â€˜genreâ€™ï¼šreq.params.id}ï¼‰</li></ul><ul id="1f6694d5-ea46-8037-871e-feca52e27d54" class="bulleted-list"><li style="list-style-type:disc">æ¸²æŸ“çš„è§†å›¾ä¸ºgenre_detailï¼Œä»–ä¼ é€’çš„è¯¥ç±»å‹çš„æ ‡é¢˜titleï¼Œç§ç±»genreå’Œä¹¦æœ¬åˆ—è¡¨çš„å˜é‡ï¼ˆgenre_booksï¼‰</li></ul><p id="1f6694d5-ea46-80a1-b716-dc87068385ce" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-8080-83bf-eec9763f8569" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/genre_detail.pugï¼Œå¹¶å†™å…¥ä¸‹é¢ä»£ç <ul id="1f6694d5-ea46-8083-bd25-ff499888bde1" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-80b0-944a-df98943cd824" class="">block content</p><p id="1f6694d5-ea46-8082-89ce-f2648f50f678" class="">h1 Genre: #{<a href="http://genre.name/">genre.name</a>}</p><p id="1f6694d5-ea46-80a8-9b30-d9a02a3e5fd9" class="">div(style=&#x27;margin-left:20px;margin-top:20px&#x27;)</p><p id="1f6694d5-ea46-80df-8b39-e648aeb1071e" class="">h4 Books<br/><br/>dl<br/>each book in genre_books<br/>  dt<br/>    a(href=book.url) #{book.title}<br/>  dd #{book.summary}<br/><br/>else<br/>  p This genre has no books<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80dd-92d2-ca25733c8fb1" class="bulleted-list"><li style="list-style-type:disc">ä¸å…¶ä»–çš„æ¨¡æ¿å”¯ä¸€åŒºåˆ«æ˜¯ï¼Œä½¿ç”¨titleä¼ é€ç¬¬ä¸€ä¸ªæ ‡é¢˜</li></ul><p id="1f6694d5-ea46-8011-bc87-cd4d20834c2b" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹</strong></p><figure id="1f6694d5-ea46-80a6-9b92-c8dba4b4dc55" class="image"><a href="image%2011.png"><img style="width:561.1875px" src="image%2011.png"/></a></figure><p id="1f6694d5-ea46-80bd-bab3-e455e5eec4e6" class=""><strong><span style="border-bottom:0.05em solid">008-ä¹¦æœ¬è¯¦ç»†ä¿¡æ¯é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-802e-b423-ef0708aa2d2f" class="bulleted-list"><li style="list-style-type:disc">ä¹¦ç±è¯¦ç»†ä¿¡æ¯é¡µé¢éœ€è¦å‘ˆç°æŒ‡å®šä¹¦ç±ï¼ˆBookï¼Œä½¿ç”¨è‡ªåŠ¨ç”Ÿæˆçš„_idå­—æ®µå€¼è¿›è¡Œæ ‡è¯†ï¼‰çš„ä¿¡æ¯ï¼Œä»¥åŠå›¾ä¹¦é¦†ä¸­çš„æ¯ä¸€ä¸ªå…³è”çš„å‰¯æœ¬ï¼ˆBookInstanceï¼‰çš„ä¿¡æ¯ï¼Œæ— è®ºåœ¨å“ªé‡Œå‘ˆç°ä½œè€…ã€ç§ç±»ã€ä¹¦ç±å®ä¾‹ï¼Œéƒ½åº”è¯¥è¿æ¥åˆ°å…³è”çš„è¯¦ç»†ä¿¡æ¯é¡µé¢</li></ul><p id="1f6694d5-ea46-8064-8294-d215a874682e" class=""><strong>æ§åˆ¶å™¨ï¼š</strong></p><ul id="1f6694d5-ea46-802c-a003-ce7581746629" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€/controllers/bookController.jsï¼Œæ‰¾åˆ°book _detailï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ›¿æ¢ä¸ºä»¥ä¸‹ä»£ç <ul id="1f6694d5-ea46-8075-9bf8-d3c1001ad293" class="bulleted-list"><li style="list-style-type:circle">const Book = require(&quot;../models/book&quot;);<br/>const BookInstance = require(&quot;../models/bookinstance&quot;);<br/>const asyncHandler = require(&quot;express-async-handler&quot;);<br/><p id="1f6694d5-ea46-80c9-b097-f331f299759b" class="">// æ˜¾ç¤ºç‰¹å®šä¹¦ç±çš„è¯¦ç»†ä¿¡æ¯é¡µé¢ã€‚<br/>exports.book_detail = asyncHandler(async (req, res, next) =&gt; {<br/>try {<br/>const bookId = <br/><a href="http://req.params.id/">req.params.id</a>;</p><p id="1f6694d5-ea46-808c-9c47-ee70c89956ee" class="">// ä½¿ç”¨ Promise.all å¹¶è¡ŒæŸ¥è¯¢<br/>const [book, bookInstances] = await Promise.all([<br/>  Book.findById(bookId).populate(&quot;author&quot;).populate(&quot;genre&quot;).exec(),<br/>  BookInstance.find({ book: bookId }).exec(),<br/>]);<br/><br/>// å¦‚æœæ²¡æœ‰æ‰¾åˆ°ä¹¦ç±ï¼ŒæŠ›å‡º 404 é”™è¯¯<br/>if (!book) {<br/>  const err = new Error(&quot;Book not found&quot;);<br/>  err.status = 404;<br/>  return next(err);<br/>}<br/><br/>// æ¸²æŸ“æ¨¡æ¿<br/>res.render(&quot;book_detail&quot;, {<br/>  title: book.title,<br/>  book,<br/>  book_instances: bookInstances,<br/>});<br/><br/></p><p id="1f6694d5-ea46-8026-95e7-fdb9fc003dfd" class="">} catch (err) {<br/>next(err);<br/>}<br/>});<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80ea-b177-f71f9eb20963" class="bulleted-list"><li style="list-style-type:disc">æ­¤æ–¹æ³•ä¸ç±»åˆ«è¯¦ç»†ä¿¡æ¯é¡µé¢æè¿°çš„æ–¹æ³•ç›¸åŒï¼Œè·¯ç”±æ§åˆ¶å™¨å‡½æ•°ä½¿ç”¨Promise.allï¼ˆï¼‰å¹¶è¡ŒæŸ¥è¯¢æŒ‡å®šçš„ä¹¦ç±Bookä»¥åŠä»–çš„ç›¸å…³å‰¯æœ¬BookInstanceï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ä¹¦ç±ç¾é…’ä¼šè¿”å›ä¸€ä¸ªå¸¦æœ‰404not foundçš„é”™è¯¯å¯¹è±¡ï¼Œå¦‚æœæ‰¾åˆ°äº†ä¹¦ç±å°±ä¼šä½¿ç”¨Book_detailæ¨¡æ¿å‘ˆç°æ£€ç´¢åˆ°çš„æ•°æ®åº“ä¿¡æ¯ï¼Œç”±äºtitleé”®ç”¨äºç»™ç½‘é¡µå‘½åï¼ˆå¦‚layout.pugä¸­å®šä¹‰çš„æ ‡é¢˜ï¼‰ï¼Œæ‰€æœ‰è¿™æ¬¡åœ¨æ¸²æŸ“ç½‘é¡µæ—¶ä¼ é€’äº†results.book.title</li></ul><p id="1f6694d5-ea46-803e-a521-ebb97d60f69c" class=""><strong>è§†å›¾ï¼š</strong></p><p id="1f6694d5-ea46-8071-8b96-d34bb8314e5c" class="">åˆ›å»º/views/book_detail.pugï¼Œå¹¶æ·»åŠ ä»¥ä¸‹ä»£ç </p><ul id="1f6694d5-ea46-8016-9244-c31faa4e85d6" class="bulleted-list"><li style="list-style-type:disc">extends layout<p id="1f6694d5-ea46-8032-95e6-f00e2d63db5e" class="">block content<br/>h1 Title: #{book.title}<br/></p><p id="1f6694d5-ea46-80df-b789-cfb27dedf63f" class="">p #[strong Author:]<br/>a(href=book.author.url) #{<br/><a href="http://book.author.name/">book.author.name</a>}<br/>p #[strong Summary:] #{book.summary}<br/>p #[strong ISBN:] #{book.isbn}<br/>p #[strong Genre:]<br/>each val, index in book.genre<br/>a(href=val.url) #{<br/><a href="http://val.name/">val.name</a>}<br/>if index &lt; book.genre.length - 1<br/>|,<br/></p><p id="1f6694d5-ea46-805a-90d3-c9b253046c19" class="">div(style=&#x27;margin-left:20px;margin-top:20px&#x27;)<br/>h4 Copies<br/></p><p id="1f6694d5-ea46-8082-a09d-fe30d03c1590" class="">each val in book_instances<br/>  hr<br/>  if val.status==&#x27;Available&#x27;<br/>    p.text-success #{val.status}<br/>  else if val.status==&#x27;Maintenance&#x27;<br/>    p.text-danger #{val.status}<br/>  else<br/>    p.text-warning #{val.status}<br/>  p #[strong Imprint:] #{val.imprint}<br/>  if val.status!=&#x27;Available&#x27;<br/>    p #[strong Due back:] #{val.due_back}<br/>  p #[strong Id:]<br/>    a(href=val.url) #{val._id}<br/><br/>else<br/>  p There are no copies of this book in the library.<br/></p></li></ul><p id="1f6694d5-ea46-8031-87a8-cc9d5a7e2086" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f6694d5-ea46-80fb-bbd7-eef1b00b33ee" class="image"><a href="image%2012.png"><img style="width:561.1875px" src="image%2012.png"/></a></figure><p id="1f6694d5-ea46-80fa-802b-fccaa54693cd" class=""><strong><span style="border-bottom:0.05em solid">009-ä½œè€…è¯¦æƒ…é¡µé¢ï¼š</span></strong></p><ul id="1f6694d5-ea46-8027-8946-ff0a77434262" class="bulleted-list"><li style="list-style-type:disc">æ§åˆ¶å™¨/controllers/authorController.js<ul id="1f6694d5-ea46-80f5-95ed-cd96985ebc74" class="bulleted-list"><li style="list-style-type:circle">å¼•å…¥æ¨¡å—<ul id="1f6694d5-ea46-80be-b2e1-d693ac517686" class="bulleted-list"><li style="list-style-type:square">const Book = require(&quot;../models/book&quot;);</li></ul></li></ul><ul id="1f6694d5-ea46-8062-bd2b-d21c4357ce2e" class="bulleted-list"><li style="list-style-type:circle">author_detailï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ›¿æ¢ä»£ç <ul id="1f6694d5-ea46-80ad-84b9-c50751c4844e" class="bulleted-list"><li style="list-style-type:square">// å‘ˆç°æŒ‡å®šä½œè€…çš„è¯¦æƒ…é¡µã€‚<br/>exports.author_detail = asyncHandler(async (req, res, next) =&gt; {<br/>// ï¼ˆå¹¶è¡Œåœ°ï¼‰è·å–ä½œè€…çš„è¯¦ç»†ä¿¡æ¯åŠå…¶æ‰€æœ‰ä½œå“<br/>const [author, allBooksByAuthor] = await Promise.all([<br/>Author.findById(<br/><a href="http://req.params.id/">req.params.id</a>).exec(),<br/>Book.find({ author: <br/><a href="http://req.params.id/">req.params.id</a> }, &quot;title summary&quot;).exec(),<br/>]);<br/><p id="1f6694d5-ea46-803f-9e80-c740947d2323" class="">if (author === null) {<br/>// æ²¡æœ‰ç»“æœã€‚<br/>const err = new Error(&quot;Author not found&quot;);<br/>err.status = 404;<br/>return next(err);<br/>}<br/></p><p id="1f6694d5-ea46-8028-8e1a-ed493fa048a7" class="">res.render(&quot;author_detail&quot;, {<br/>title: &quot;Author Detail&quot;,<br/>author: author,<br/>author_books: allBooksByAuthor,<br/>});<br/>});<br/></p></li></ul></li></ul></li></ul><ul id="1f6694d5-ea46-80ad-ad51-f474a0eb490d" class="bulleted-list"><li style="list-style-type:disc">è¯¥æ–¹æ³•ä¸<a href="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Extensions/Server-side/Express_Nodejs/Displaying_data/Genre_detail_page">ç§ç±»è¯¦æƒ…é¡µé¢</a>ä¸­æè¿°çš„æ–¹æ³•å®Œå…¨ç›¸åŒã€‚è·¯ç”±æ§åˆ¶å™¨å‡½æ•°ä½¿ç”¨Â <code>Promise.all()</code>Â å¹¶è¡Œåœ°æŸ¥è¯¢æŒ‡å®šçš„ä½œè€…ï¼ˆ<code>Author</code>ï¼‰åŠå…¶å…³è”çš„Â <code>Book</code>Â å®ä¾‹ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„ä½œè€…ï¼Œåˆ™ä¼šå°†é”™è¯¯ï¼ˆErrorï¼‰å¯¹è±¡å‘é€åˆ° Express é”™è¯¯å¤„ç†ä¸­é—´ä»¶ã€‚å¦‚æœæ‰¾åˆ°ä½œè€…ï¼Œåˆ™ä½¿ç”¨â€œauthor_detailâ€æ¨¡æ¿å‘ˆç°æ£€ç´¢åˆ°çš„æ•°æ®åº“ä¿¡æ¯ã€‚</li></ul><p id="1f6694d5-ea46-8006-8b3f-fea95d550aa4" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80ff-9048-d81d85b85c49" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/author_detail.pug<ul id="1f6694d5-ea46-8085-a68f-f6675aa6b293" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-80c3-8d55-f539268dd5f7" class="">block content</p><p id="1f6694d5-ea46-808b-8222-c9d5c95a1afd" class="">h1 Author: #{<a href="http://author.name/">author.name</a>}<br/>p #{author.date_of_birth} - #{author.date_of_death}<br/></p><p id="1f6694d5-ea46-80a0-bb1b-f1955823672d" class="">div(style=&#x27;margin-left:20px;margin-top:20px&#x27;)</p><p id="1f6694d5-ea46-80af-aedb-df8ab800aa67" class="">h2(style=&#x27;font-size: 1.5rem;&#x27;) Books<br/>if author_books.length<br/>  dl<br/>    each book in author_books<br/>      dt<br/>        a(href=book.url) #{book.title}<br/>      dd #{book.summary}<br/>else<br/>  p This author has no books.<br/></p></li></ul></li></ul><p id="1f6694d5-ea46-8089-ba6d-ccbc843a6db8" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f6694d5-ea46-80fc-8c3e-cbd62de09018" class="image"><a href="image%2013.png"><img style="width:561.1875px" src="image%2013.png"/></a></figure><p id="1f6694d5-ea46-8042-89a3-ed7f35f5b551" class=""><strong>010-ä¹¦æœ¬å®ä¾‹è¯¦æƒ…é¡µé¢ï¼š</strong></p><ul id="1f6694d5-ea46-8051-a987-c92c801f057a" class="bulleted-list"><li style="list-style-type:disc"><code>BookInstance</code>Â è¯¦æƒ…é¡µé¢éœ€è¦å±•ç¤ºæ¯ä¸€ä¸ªÂ <code>BookInstance</code>Â çš„ä¿¡æ¯ï¼Œä½¿ç”¨å…¶ï¼ˆè‡ªåŠ¨ç”Ÿæˆçš„ï¼‰<code>_id</code>Â å­—æ®µå€¼è¿›è¡Œæ ‡è¯†ã€‚å®ƒåŒ…å«äº†Â <code>Book</code>Â åç§°ï¼ˆä½œä¸º<em>ä¹¦æœ¬ç»†èŠ‚é¡µé¢</em>çš„é“¾æ¥ï¼‰ä»¥åŠè®°å½•ä¸­çš„å…¶ä»–ä¿¡æ¯ã€‚</li></ul><p id="1f6694d5-ea46-8086-9e1f-e92c865d2699" class=""><strong>æ§åˆ¶å™¨</strong></p><ul id="1f6694d5-ea46-806c-9325-dc842c00ccf8" class="bulleted-list"><li style="list-style-type:disc">/controllers/bookinstanceController.jsï¼Œæ‰¾å‡ºbook instance_detailï¼ˆï¼‰æ–¹æ³•<ul id="1f6694d5-ea46-8027-af6e-d7626675b8dc" class="bulleted-list"><li style="list-style-type:circle">// å±•ç¤ºç‰¹å®š BookInstance çš„è¯¦æƒ…é¡µã€‚<br/>exports.bookinstance_detail = asyncHandler(async (req, res, next) =&gt; {<br/>const bookInstance = await BookInstance.findById(<br/><a href="http://req.params.id/">req.params.id</a>)<br/>.populate(&quot;book&quot;)<br/>.exec();<br/><p id="1f6694d5-ea46-8049-9cfd-d37a88035c99" class="">if (bookInstance === null) {<br/>// æ²¡æœ‰ç»“æœã€‚<br/>const err = new Error(&quot;Book copy not found&quot;);<br/>err.status = 404;<br/>return next(err);<br/>}<br/></p><p id="1f6694d5-ea46-8024-9f9b-d0cffb3e4a92" class="">res.render(&quot;bookinstance_detail&quot;, {<br/>title: &quot;Book:&quot;,<br/>bookinstance: bookInstance,<br/>});<br/>});<br/></p></li></ul></li></ul><ul id="1f6694d5-ea46-80c2-9371-dee60c1dea0c" class="bulleted-list"><li style="list-style-type:disc">è¯¥å®ç°ä¸å…¶ä»–æ¨¡å‹è¯¦ç»†ä¿¡æ¯é¡µé¢æ‰€ä½¿ç”¨çš„éå¸¸ç›¸ä¼¼ã€‚è·¯ç”±æ§åˆ¶å™¨å‡½æ•°ä½¿ç”¨ä» URLï¼ˆä½¿ç”¨è·¯ç”±ï¼‰ä¸­æå–çš„ç‰¹å®šçš„ä¹¦ç±å®ä¾‹çš„ ID æ¥è°ƒç”¨Â <code>BookInstance.findById()</code>ï¼Œå¹¶é€šè¿‡è¯·æ±‚å‚æ•°Â <code>req.params.id</code>Â åœ¨æ§åˆ¶å™¨ä¸­è®¿é—®ã€‚ç„¶åè°ƒç”¨Â <code>populate()</code>Â æ¥è·å–ä¸Â <code>Book</code>Â ç›¸å…³çš„è¯¦ç»†ä¿¡æ¯ã€‚å¦‚æœæ²¡æœ‰æ‰¾åˆ°åŒ¹é…çš„Â <code>BookInstance</code>ï¼Œåˆ™å°†é”™è¯¯ä¼ é€’ç»™ Express çš„ä¸­é—´ä»¶ã€‚å¦åˆ™å°±å°†è¿”å›çš„æ•°æ®ä¼ é€’ç»™Â <strong>bookinstance_detail.pug</strong>Â è§†å›¾å‘ˆç°ã€‚</li></ul><p id="1f6694d5-ea46-8010-a15c-e1325a63ccd2" class=""><strong>è§†å›¾ï¼š</strong></p><ul id="1f6694d5-ea46-80c9-9506-cad88f9b00cb" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/bookinstance_detail.pug<ul id="1f6694d5-ea46-8036-9023-df6146608767" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f6694d5-ea46-8031-b06c-c2a325d984a2" class="">block content</p><p id="1f6694d5-ea46-803f-8539-d58cceeb3d4f" class="">h1 ID: #{bookinstance._id}</p><p id="1f6694d5-ea46-8099-84ff-e434c4f52556" class="">p #[strong Title: ]<br/>a(href=bookinstance.book.url) #{bookinstance.book.title}<br/>p #[strong Imprint:] #{bookinstance.imprint}<br/></p><p id="1f6694d5-ea46-8059-9ab7-f44fb4387eb4" class="">p #[strong Status: ]<br/>if bookinstance.status==&#x27;Available&#x27;<br/>span.text-success #{bookinstance.status}<br/>else if bookinstance.status==&#x27;Maintenance&#x27;<br/>span.text-danger #{bookinstance.status}<br/>else<br/>span.text-warning #{bookinstance.status}<br/></p><p id="1f6694d5-ea46-80b4-9e0b-ebcde2eada06" class="">if bookinstance.status!=&#x27;Available&#x27;<br/>p #[strong Due back:] #{bookinstance.due_back}<br/></p></li></ul></li></ul><p id="1f6694d5-ea46-8002-a517-ffb2747d26fe" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f7694d5-ea46-801a-babb-db9b4735b7a6" class="image"><a href="image%2014.png"><img style="width:561.1749877929688px" src="image%2014.png"/></a></figure><p id="1f7694d5-ea46-80b3-80d8-d9648a727dea" class="">
</p><p id="1f7694d5-ea46-808d-a54b-d8dd4f7953b9" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬äº”æ­¥-ä½¿ç”¨è¡¨å•ã€‘ï¼š</span></strong></p><ul id="1f7694d5-ea46-80b3-8aa0-c60c0cf0e09e" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨Expressç»“åˆPugæ¥å®ç°HTMLè¡¨å•ï¼Œä»æ•°æ®åº“ä¸­åˆ›å»ºã€æ›´æ–°ã€åˆ é™¤æ–‡æ¡£ã€‚</li></ul><p id="1f7694d5-ea46-80db-af1f-c380a426e9c7" class="">
</p><p id="1f7694d5-ea46-8014-b1f6-d131cdb22488" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f7694d5-ea46-80e7-a40f-e6faf7b16963" class="bulleted-list"><li style="list-style-type:disc">HTMLè¡¨å•åœ¨ç½‘é¡µä¸­ä½¿ç”¨ä¸€ä¸ªæˆ–å¤šä¸ªå­—æ®µ/å°å·¥å…·çš„é›†åˆï¼Œå®ƒè¢«ç”¨æ¥æ”¶é›†ç”¨æˆ·ä¿¡æ¯ï¼Œå¹¶å°†ä¿¡æ¯ä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œè¡¨å•ä½œä¸ºä¸€ç§ç”¨æ¥æ”¶é›†ç”¨æˆ·çš„æœºåˆ¶ï¼Œçµæ´»ï¼Œæœ‰å„ç§å„æ ·çš„è¾“å…¥æ¡†æ¥å—å„ç§ç±»å‹çš„æ•°æ®-æ–‡æœ¬æ¡†ã€å¤é€‰æ¡†ã€å•é€‰æŒ‰é’®ã€æ—¶é—´é€‰æ‹©å™¨ã€‚è¡¨å•å’ŒæœåŠ¡å™¨äº¤äº’æ•°æ®ç›¸å¯¹å®‰å…¨ï¼Œä½¿ç”¨POSTè¯·æ±‚å‘é€æ•°æ®ï¼Œä¿æŠ¤ä¸å—è·¨ç«™ç‚¹è¯·æ±‚ä¼ªé€ æ”»å‡»çš„å¨èƒã€‚</li></ul><ul id="1f7694d5-ea46-807b-9288-e26cc3df4c90" class="bulleted-list"><li style="list-style-type:disc">è¡¨å•åŒæ ·å¤æ‚ï¼Œå¼€å‘è€…éœ€è¦ä¸ºè¡¨å•ç¼–å†™HTMLï¼Œåœ¨æœåŠ¡å™¨ä¸ŠéªŒè¯ï¼Œå¹¶ä¸”æ­£ç¡®å»é™¤æœ‰å®³çš„æ•°æ®ï¼Œå¯¹äºä¸åˆæ³•çš„å­—æ®µï¼Œéœ€è¦ä¼ ç»™ç”¨æˆ·å“åº”çš„é”™è¯¯ä¿¡æ¯ï¼Œå½“æ•°æ®æˆåŠŸæäº¤åï¼Œå¤„ç†æ•°æ®ï¼Œå¹¶è®¾æ³•é€šçŸ¥ç”¨æˆ·æäº¤æˆåŠŸ</li></ul><ul id="1f7694d5-ea46-80cf-ac22-eb8beff1dd25" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢è¿‡ç¨‹å±•ç¤ºï¼Œåœ¨Expressä¸­å®ç°ï¼Œæ‰©å±•å›¾ä¹¦é¦†ä¸‹é¢ï¼Œå…è®¸ç”¨æˆ·åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤å›¾ä¹¦é¦†ä¸­çš„é¡¹ç›®</li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f7694d5-ea46-805b-9789-c10d534cd0eb"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f7694d5-ea46-80a3-b8e8-f4337df1d015" class="">æ²¡æœ‰ä½¿ç”¨ç‰¹å®šè·¯ç”±é™åˆ¶èº«ä»½éªŒè¯æˆ–æˆæƒçš„ç”¨æˆ·ï¼Œä»»ä½•ç”¨æˆ·éƒ½å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œä¿®æ”¹</p></div></figure><p id="1f7694d5-ea46-8033-80ac-df02774cf1bd" class="">
</p><p id="1f7694d5-ea46-80a7-957f-ef116c8de319" class=""><strong>HTMLè¡¨å•ï¼š</strong></p><ul id="1f7694d5-ea46-8016-87d1-d06861345126" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆè€ƒè™‘ä¸€ä¸ªç®€å•çš„HTMLè¡¨å•ï¼Œå…¶ä¸­åŒ…å«ä¸€ä¸ªæ–‡æœ¬å­—æ®µï¼Œç”¨äºè¾“å…¥å›¢é˜Ÿçš„åç§°ä»¥åŠç›¸å…³æ ‡ç­¾<ul id="1f7694d5-ea46-8081-86f9-e9bc9558658e" class="bulleted-list"><li style="list-style-type:circle">è¡¨å•åœ¨HTMLä¸­ï¼Œå®šä¹‰ä¸º&lt;form&gt;  æ ‡ç­¾ä¸­ï¼Œè‡³å°‘åŒ…å«ä¸€ä¸ªtype=â€˜submitâ€™çš„inputè¾“å…¥å…ƒç´ ã€‚</li></ul></li></ul><ul id="1f7694d5-ea46-80e3-9632-fd53e350063e" class="bulleted-list"><li style="list-style-type:disc">è¿™é‡Œä½¿ç”¨inputçš„submitè€Œä¸æ˜¯buttonã€‚<ul id="1f7694d5-ea46-8001-bc19-c185b62a022b" class="bulleted-list"><li style="list-style-type:circle">&lt;form action=&quot;/team_name_url/&quot; method=&quot;post&quot;&gt;<br/>&lt;label for=&quot;team_name&quot;&gt;Enter name: &lt;/label&gt;<br/>&lt;input<br/>id=&quot;team_name&quot;<br/>type=&quot;text&quot;<br/>name=&quot;name_field&quot;<br/>value=&quot;Default name for team.&quot; /&gt;<br/>&lt;input type=&quot;submit&quot; value=&quot;OK&quot; /&gt;<br/>&lt;/form&gt;<br/></li></ul></li></ul><ul id="1f7694d5-ea46-8090-900d-ed5916ba52d7" class="bulleted-list"><li style="list-style-type:disc">è¿™é‡ŒåªåŒ…å«ä¸€ä¸ªæ–‡æœ¬å­—æ®µï¼Œç”¨äºè¾“å…¥å›¢é˜Ÿåç§°ï¼Œä½†è¡¨å•å¯èƒ½åŒ…å«ä»»æ„æ•°é‡çš„å…¶ä»–è¾“å…¥å…ƒç´ ï¼ŒåŠå…¶ç›¸å…³æ ‡ç­¾ã€‚å­—æ®µçš„typeå±æ€§ï¼Œå®šä¹‰æ˜¾ç¤ºå“ªç§çª—å£å°éƒ¨ä»¶ï¼Œè¯¥å­—æ®µçš„nameå’Œidï¼Œç”¨äºè¡¨ç¤ºJS/CSS/HTMLçš„å­—æ®µï¼Œå„¿valueå®šä¹‰å­—æ®µé¦–æ¬¡æ˜¾ç¤ºæ—¶çš„åˆå§‹å€¼ï¼ŒåŒ¹é…å›¢é˜Ÿæ ‡ç­¾æ˜¯ç”¨labelæ ‡ç­¾ï¼ŒæŒ‡å®šforå­—æ®µï¼ŒåŒ…å«inputç›¸å…³è¾“å…¥çš„idå€¼</li></ul><ul id="1f7694d5-ea46-80cc-aee8-e48888d278af" class="bulleted-list"><li style="list-style-type:disc">HTMLçš„formè¡¨å•é»˜è®¤æ˜¯postæäº¤çš„ï¼Œä»–æ¯”getæ–¹å¼å­˜å‚¨é‡æ›´å¤§ã€ä¼ è¾“æ›´å®‰å…¨</li></ul><ul id="1f7694d5-ea46-80dc-b8ea-d20aa194f2d4" class="bulleted-list"><li style="list-style-type:disc">æäº¤è¾“å…¥submitå°†æ˜¾ç¤ºä¸ºæŒ‰é’®ã€‚ç”¨æˆ·å¯ä»¥ç‚¹å‡»æ­¤æŒ‰é’®å°†å…¶ä»–è¾“å…¥å…ƒç´ æ€’åŒ…å«çš„æ•°æ®ï¼Œä¸Šä¼ åˆ°æœåŠ¡å™¨ï¼Œæœ¬é¡¹ç›®ä¸­åªæœ‰team_nameï¼Œè¡¨å•å±æ€§ï¼Œå®šä¹‰ç”¨äºå‘é€æ•°æ®çš„HTTP methodæ–¹æ³•ï¼Œå’ŒæœåŠ¡å™¨ä¸Šæ•°æ®çš„ç›®æ ‡<ul id="1f7694d5-ea46-80b7-9fac-fb74b75d013b" class="bulleted-list"><li style="list-style-type:circle">actionï¼šæäº¤è¡¨å•æ—¶ï¼Œè¦å‘é€æ•°æ®ä»¥è¿›è¡Œå¤„ç†çš„èµ„æº/URLï¼Œå¦‚æœæœªè®¾ç½®ï¼ˆæˆ–è®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰ï¼Œè¡¨å•å°†æäº¤å›å½“å‰é¡µé¢URL</li></ul><ul id="1f7694d5-ea46-8054-af77-e63cbc51db97" class="bulleted-list"><li style="list-style-type:circle">methodï¼šç”¨äºå‘é€æ•°æ®çš„HTTPæ–¹æ³• POSTæˆ–GET<ul id="1f7694d5-ea46-8095-8221-fb9d35ae0e95" class="bulleted-list"><li style="list-style-type:square">å¦‚æœæ•°æ®å°†å¯¼è‡´æœåŠ¡å™¨æ•°æ®åº“çš„æ›´æ”¹ï¼Œåˆ™å§‹ç»ˆåº”è¯¥ä½¿ç”¨POSTæ–¹æ³•ï¼Œå› æ­¤è¿™æ›´åŠ å¯ä»¥æŠµæŠ—è·¨ç«™ç‚¹ä¼ªé€ è¯·æ±‚æ”»å‡»</li></ul><ul id="1f7694d5-ea46-80bd-a660-d833206ec369" class="bulleted-list"><li style="list-style-type:square">GETæ–¹æ³•åªåº”ç”¨äºä¸æ›´æ”¹ç”¨æˆ·æ•°æ®çš„è¡¨å•ï¼Œä¾‹å¦‚æœç´¢è¡¨å•ï¼Œå¸Œæœ›èƒ½å¤Ÿä¸ºURLæ·»åŠ ä¹¦ç­¾æˆ–è€…å…±äº«æ—¶ï¼Œå»ºè®®ä½¿ç”¨æ­¤é€‰é¡¹</li></ul></li></ul></li></ul><p id="1f7694d5-ea46-801f-83bf-e9ad2314325b" class="">
</p><p id="1f7694d5-ea46-8055-80b3-c857f2241f6d" class=""><strong>è¡¨å•å¤„ç†æµç¨‹ï¼š</strong></p><ul id="1f7694d5-ea46-8058-870e-fe7e387707e3" class="bulleted-list"><li style="list-style-type:disc">è¡¨å•å¤„ç†ä½¿ç”¨çš„æŠ€æœ¯ï¼Œä¸æ˜¾ç¤ºç›¸å…³æ¨¡å‹çš„ä¿¡æ¯çš„æŠ€æœ¯æ˜¯ç›¸åŒçš„ï¼Œè·¯ç”±å°†æˆ‘ä»¬çš„è¯·æ±‚å‘é€åˆ°æ§åˆ¶å™¨å‡½æ•°ï¼Œè¯¥å‡½æ•°æ‰§è¡Œæ‰€éœ€çš„æ•°æ®åº“æ“ä½œï¼ŒåŒ…æ‹¬ä»æ¨¡å‹ä¸­è¯»å–æ•°æ®ï¼Œç”Ÿæˆå¹¶è¿”å›HTMLé¡µé¢ï¼Œæ›´å¤æ‚æƒ…å†µæ˜¯æœåŠ¡å™¨éœ€è¦èƒ½å¤Ÿå¤„ç†ç”¨æˆ·æä¾›çš„æ•°æ®ï¼Œå¹¶åœ¨å‡ºç°é—®é¢˜æ—¶ï¼Œé‡æ–°æ˜¾ç¤ºå¸¦æœ‰é”™è¯¯ä¿¡æ¯çš„è¡¨å•ã€‚<ul id="1f7694d5-ea46-8045-8234-d078b2ec6f03" class="bulleted-list"><li style="list-style-type:circle">ä¸‹é¢ä¸ºå¤„ç†è¡¨å•è¯·æ±‚çš„æµç¨‹å›¾ï¼Œä»åŒ…å«è¡¨å•çš„é¡µé¢è¯·æ±‚å¼€å§‹</li></ul><figure id="1f7694d5-ea46-80ef-848c-f04bda4190c7" class="image"><a href="image%2015.png"><img style="width:531.1625366210938px" src="image%2015.png"/></a></figure></li></ul><ul id="1f7694d5-ea46-8090-9ae8-d8b6d0a19208" class="bulleted-list"><li style="list-style-type:disc">åœ¨ç”¨æˆ·ç¬¬ä¸€æ¬¡è¯·æ±‚æ—¶æ˜¾ç¤ºé»˜è®¤è¡¨å•<ul id="1f7694d5-ea46-80d5-a8ba-dbc3856f846b" class="bulleted-list"><li style="list-style-type:circle">è¡¨å•å¯èƒ½åŒ…å«ç©ºç™½å­—æ®µï¼ˆä¾‹å¦‚ï¼Œæ­£åœ¨åˆ›å»ºæ–°è®°å½•ï¼‰ï¼Œæˆ–è€…é¢„å…ˆå¡«å……äº†åˆå§‹å€¼ï¼ˆä¾‹å¦‚ï¼Œè¦æ›´æ”¹è®°å½•æˆ–åˆ™å…·æœ‰æœ‰ç”¨çš„é»˜è®¤åˆå§‹å€¼ï¼‰</li></ul></li></ul><ul id="1f7694d5-ea46-8012-81d8-ef883845a35e" class="bulleted-list"><li style="list-style-type:disc">æ¥å—ç”¨æˆ·æäº¤çš„æ•°æ®ï¼Œé€šå¸¸åœ¨HTTP POSTè¯·æ±‚ä¸­</li></ul><ul id="1f7694d5-ea46-8040-8749-fa1a862f51e4" class="bulleted-list"><li style="list-style-type:disc">éªŒè¯å¹¶æ¸…ç†æ•°æ®</li></ul><ul id="1f7694d5-ea46-801d-b5e0-f414899ed904" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ•°æ®æ— æ•ˆï¼Œåˆ™é‡æ–°æ˜¾ç¤ºè¡¨å•ï¼Œè¿™æ¬¡ä½¿ç”¨ç”¨æˆ·å¡«å†™çš„ä»»ä½•å€¼ï¼Œå’Œé—®é¢˜å­—æ®µçš„é”™è¯¯æ¶ˆæ¯</li></ul><ul id="1f7694d5-ea46-8048-90e0-e1c816a23c57" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ‰€æœ‰æ•°æ®éƒ½æœ‰æ•ˆï¼Œæ‰§è¡Œæ‰€éœ€çš„æ­¥éª¤ï¼ˆä¾‹å¦‚ï¼Œå°†æ•°æ®ä¿å­˜åœ¨æ•°æ®åº“ä¸­ï¼Œå‘é€é€šçŸ¥ç”µå­é‚®ä»¶ã€è¿”å›æœç´¢ç»“æœã€ä¸Šä¼ æ–‡ä»¶ç­‰ï¼‰</li></ul><ul id="1f7694d5-ea46-804a-9256-d42b1c2f29ad" class="bulleted-list"><li style="list-style-type:disc">å®Œæˆæ‰€æœ‰æ“ä½œï¼Œå°†ç”¨æˆ·é‡å®šå‘åˆ°å¦ä¸€ä¸ªé¡µé¢</li></ul><p id="1f7694d5-ea46-8002-bff6-e253e469a5a9" class="">
</p><ul id="1f7694d5-ea46-8038-9880-e876c27f3666" class="bulleted-list"><li style="list-style-type:disc">è¡¨æ ¼å¤„ç†ä»£ç ï¼Œé€šå¸¸ä½¿ç”¨GETè·¯ç”±ï¼Œä»¥å®ç°è¡¨å•çš„åˆå§‹æ˜¾ç¤ºï¼Œä»¥åŠPOSTè·¯ç”±åˆ°åŒä¸€è·¯å¾„ï¼Œæ¥å¤„ç†è¡¨å•æ•°æ®çš„éªŒè¯å’Œå¤„ç†ã€‚</li></ul><ul id="1f7694d5-ea46-80fc-a1f9-eaf8f9188419" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°ä¸ºæœ¬é¡¹ç›®ä¸­ä½¿ç”¨çš„æ–¹æ³•ï¼ŒExpressæœ¬èº«ä¸æä¾›è¡¨å•å¤„ç†æ“ä½œä¸­çš„ä»»ä½•ç‰¹å®šæ”¯æŒï¼Œå®ƒå¯ä»¥ä½¿ç”¨ä¸­é—´ä»¶ï¼Œæ¥å¤„ç†è¡¨å•çš„POST å’ŒGETå‚æ•°ï¼Œå¹¶éªŒè¯/æ¸…ç†å®ƒä»¬çš„å€¼</li></ul><p id="1f7694d5-ea46-8099-8624-df12ff203e19" class="">
</p><p id="1f7694d5-ea46-80be-a036-da86a8ac0340" class=""><strong>éªŒè¯å’Œæ¸…ç†ï¼š</strong></p><ul id="1f7694d5-ea46-80a7-9eaa-ec406b24ddfe" class="bulleted-list"><li style="list-style-type:disc">åœ¨å­˜å‚¨è¡¨å•ä¸­çš„æ•°æ®ä¹‹å‰ï¼Œå°±å¿…é¡»è¦å¯¹ä»–è¿›è¡ŒéªŒè¯å’Œæ¸…ç†<ul id="1f7694d5-ea46-8055-af6f-d40a9671f42f" class="bulleted-list"><li style="list-style-type:circle">éªŒè¯æ£€æŸ¥è¾“å…¥çš„å€¼ï¼Œé€‚ç”¨äºæ¯ä¸ªå­—æ®µï¼ˆèŒƒå›´ã€æ ¼å¼ï¼‰ï¼Œå¹¶ä¸”ä¸ºæ‰€æœ‰å¿…å¡«å­—æ®µæä¾›äº†å€¼</li></ul><ul id="1f7694d5-ea46-8004-93eb-f7c9b2e9fe3c" class="bulleted-list"><li style="list-style-type:circle">æ¸…ç†åˆ é™¤/æ›¿æ¢æ•°æ®ä¸­çš„å­—ç¬¦ï¼Œå¯èƒ½ç”¨äºå°†æ¶æ„å†…å®¹å‘é€åˆ°æœåŠ¡å™¨</li></ul></li></ul><ul id="1f7694d5-ea46-804f-933b-c1ed2f6052d8" class="bulleted-list"><li style="list-style-type:disc">æœ¬é¡¹ç›®ä½¿ç”¨express-validatoræ¨¡å—ï¼Œæ¥æ‰§è¡Œè¡¨å•æ•°æ®çš„éªŒè¯å’Œæ¸…ç†</li></ul><p id="1f7694d5-ea46-8099-9e67-e3e89947a32e" class="">
</p><p id="1f7694d5-ea46-801d-b5ec-c3c7a49bf1a7" class=""><strong>å®‰è£…</strong></p><ul id="1f7694d5-ea46-8022-ba33-fbd9b912ae52" class="bulleted-list"><li style="list-style-type:disc">é¡¹ç›®å‘½ä»¤è¡Œæ‰§è¡Œå‘½ä»¤<ul id="1f7694d5-ea46-80be-b39b-e4c2453959b2" class="bulleted-list"><li style="list-style-type:circle">npm install express-validator â€”save</li></ul></li></ul><p id="1f7694d5-ea46-8054-8f47-cfb362a4d461" class="">
</p><p id="1f7694d5-ea46-8086-8d5a-cb56956b7be0" class=""><strong>ä½¿ç”¨express-validatorï¼š</strong></p><ul id="1f7694d5-ea46-80bc-b1bf-ed21081f2d9d" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ§åˆ¶å™¨ä¸­ä½¿ç”¨éªŒè¯ç ï¼Œå¿…é¡»ä»â€˜express-validator/checkâ€™å’Œâ€˜express-validator/filterâ€™æ¨¡å—ä¸­ï¼Œå¯¼å…¥æˆ‘ä»¬è¦ä½¿ç”¨çš„å‡½æ•°ã€‚<ul id="1f7694d5-ea46-8023-bbcc-f4c612f6b112" class="bulleted-list"><li style="list-style-type:circle">const { body, validationResult } = require(&quot;express-validator/check&quot;);<br/>const { sanitizeBody } = require(&quot;express-validator/filter&quot;);<br/></li></ul></li></ul><ul id="1f7694d5-ea46-806e-8103-f493810385ef" class="bulleted-list"><li style="list-style-type:disc">æœ‰è®¸å¤šå¯ç”¨çš„åŠŸèƒ½ï¼Œå…è®¸ä¸€æ¬¡æ£€æŸ¥å’Œæ¸…ç†è¯·æ±‚å‚æ•°ï¼Œæ­£æ–‡ã€æ ‡å¤´ã€cookieç­‰æ•°æ®ï¼Œæˆ–æ‰€æœ‰æ•°æ®ï¼Œå¯¹äºæœ¬é¡¹ç›®ï¼Œä¸»è¦ä½¿ç”¨bodyã€sanitizeBodyå’ŒvalidationResultï¼ŒåŠŸèƒ½å¦‚ä¸‹<ul id="1f7694d5-ea46-80a4-953f-c138248ce9ba" class="bulleted-list"><li style="list-style-type:circle">bodyï¼šï¼ˆfieldsã€ï¼Œmessageã€‘ï¼‰ï¼šæŒ‡å®šè¯·æ±‚æœ¬æ–‡ä¸­çš„ä¸€ç»„å­—æ®µï¼ˆPOSTå‚æ•°ï¼‰ä»¥åŠå¯é€‰çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚æœæµ‹è¯•å¤±è´¥ï¼Œåˆ™æ˜¾ç¤ºè¯¥å­—æ®µã€‚éªŒè¯æ ‡å‡†ä»¥èŠèŠ±é“¾å½¢å¼è¿æ¥åˆ°bodyï¼ˆï¼‰æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„ç¬¬ä¸€ä¸ªæ£€æŸ¥æµ‹è¯•ï¼Œnameå­—æ®µä¸ä¸ºç©ºï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è®¾ç½®é”™è¯¯æ¶ˆæ¯ä¸ºEmpty nameã€‚ç¬¬äºŒä¸ªæµ‹è¯•ï¼Œæ£€æŸ¥ageå­—æ®µæ˜¯å¦ä¸ºæœ‰æ•ˆæ—¥æœŸï¼Œå¹¶ä½¿ç”¨optionalï¼ˆï¼‰æŒ‡å®šnyullå’Œç©ºå­—ç¬¦ä¸²ä¸ä¼šéªŒè¯å¤±è´¥<ul id="1f7694d5-ea46-80ae-8442-c09abb9e63d9" class="bulleted-list"><li style="list-style-type:square">body(&#x27;name&#x27;, &#x27;Empty name&#x27;).isLength({ min: 1 }),<br/>body(&#x27;age&#x27;, &#x27;Invalid age&#x27;).optional({ checkFalsy: true }).isISO8601(),<br/></li></ul></li></ul><ul id="1f7694d5-ea46-80ef-a05b-ffe74d0252d4" class="bulleted-list"><li style="list-style-type:circle">è¿˜å¯ä»¥ç”¨èŠèŠ±é“¾å¼è¿æ¥ä¸åŒçš„éªŒè¯å…¶ï¼Œå¹¶æ·»åŠ å‰é¢éªŒè¯å™¨ä¸ºçœŸæ—¶æ˜¾ç¤ºçš„æ¶ˆæ¯<ul id="1f7694d5-ea46-8006-be52-f94cb018cd5a" class="bulleted-list"><li style="list-style-type:square">body(&#x27;name&#x27;).isLength({ min: 1 }).trim().withMessage(&#x27;Name empty.&#x27;)<br/>.isAlpha().withMessage(&#x27;Name must be alphabet letters.&#x27;),<br/></li></ul></li></ul></li></ul><ul id="1f7694d5-ea46-80e1-8973-e8713cfba076" class="bulleted-list"><li style="list-style-type:disc">ä¹Ÿå¯ä»¥æ·»åŠ å†…è”æ¸…ç†å™¨ï¼Œå¦‚trimï¼ˆï¼‰ï¼Œå¦‚ä¸Šæ‰€ç¤ºï¼Œæ­¤å¤„åº”ç”¨æ¸…ç†å™¨åªé€‚åˆç”¨äºéªŒè¯æ­¥éª¤ï¼Œå¦‚æœè¦å¯¹æœ€ç»ˆè¾“å‡ºè¿›è¡Œæ¸…ç†ï¼Œéœ€è¦å•ç‹¬çš„æ¸…ç†å™¨æ–¹æ³•ï¼Œå¦‚ä¸‹æ‰€ç¤º<ul id="1f7694d5-ea46-80df-8209-e54e2a4eca2e" class="bulleted-list"><li style="list-style-type:circle">sanitizeBodyï¼ˆfieldsï¼‰ï¼šæŒ‡å®šä¸€ä¸ªæ­£æ–‡è¦æ¸…ç†çš„å­—æ®µï¼Œç„¶åå°†æ¸…ç†æ“ä½œï¼Œä»¥èŠèŠ±é“¾å½¢å¼è¿æ¥åˆ°æ­¤æ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œä¸‹é¢çš„escapeï¼ˆï¼‰æ¸…ç†æ“ä½œï¼Œå›ä»åç§°å˜é‡ä¸­ï¼Œåˆ é™¤å¯èƒ½åœ¨JSè·¨ç«™ç‚¹è„šæœ¬æ”»å‡»ä¸­ä½¿ç”¨çš„HTMLå­—ç¬¦<ul id="1f7694d5-ea46-8088-8202-d9aa78366941" class="bulleted-list"><li style="list-style-type:square">sanitizeBody(&#x27;name&#x27;).trim().escape(),<br/>sanitizeBody(&#x27;date&#x27;).toDate(),<br/></li></ul></li></ul><ul id="1f7694d5-ea46-8087-b41f-e839bc6853b6" class="bulleted-list"><li style="list-style-type:circle">validationResultï¼ˆreqï¼‰ï¼šè¿è¡ŒéªŒè¯ï¼Œä»¥validationéªŒè¯ç»“æœå¯¹è±¡çš„å½¢å¼ï¼Œæä¾›é”™è¯¯ï¼Œè¿™æ˜¯åœ¨å•ç‹¬çš„å›è°ƒä¸­è°ƒç”¨çš„ã€‚<ul id="1f7694d5-ea46-805c-bf6c-c9dae4b81053" class="bulleted-list"><li style="list-style-type:square">(req, res, next) =&gt; {<br/>// Extract the validation errors from a request.<br/>const errors = validationResult(req);<br/><p id="1f7694d5-ea46-80e8-8880-f7e24fbc6de2" class="">if (!errors.isEmpty()) {<br/>// There are errors. Render form again with sanitized values/errors messages.<br/>// Error messages can be returned in an array using <br/><code>errors.array()</code>.<br/>} else {<br/>// Data from form is valid.<br/>}<br/>};<br/></p><ul id="1f7694d5-ea46-8076-9137-e37ea5982471" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨éªŒè¯ç»“æœçš„isEmptyï¼ˆï¼‰æ–¹æ³•ï¼Œæ¥æ£€æŸ¥æ˜¯å¦å­˜åœ¨é”™è¯¯ï¼Œå¹¶ä½¿ç”¨å…¶arrayï¼ˆï¼‰æ–¹æ³•ï¼Œæ¥è·å–é”™è¯¯æ¶ˆæ¯é›†åˆ</li></ul></li></ul></li></ul></li></ul><ul id="1f7694d5-ea46-8003-bde5-c38b8274ee5f" class="bulleted-list"><li style="list-style-type:disc">éªŒè¯å’Œæ¸…ç†é“¾ï¼Œæ˜¯åº”è¯¥ä¼ é€’ç»™Expressè·¯ç”±å¤„ç†ç¨‹åºçš„ä¸­é—´ä»¶ï¼ˆæˆ‘ä»¬é€šè¿‡æ§åˆ¶å™¨ï¼Œé—´æ¥çš„æ‰§è¡Œè¯¥æ“ä½œï¼‰ã€‚ä¸­é—´ä»¶è¿è¡Œæ—¶ï¼Œæ¯ä¸ªéªŒè¯å…¶/æ¸…ç†ç¨‹åºéƒ½æŒ‰æŒ‡å®šçš„é¡ºåºè¿è¡Œï¼Œ</li></ul><ul id="1f7694d5-ea46-80e4-bf64-c6b8fc458d56" class="bulleted-list"><li style="list-style-type:disc">ä¸‹é¢å®ç°æœ¬é¡¹ç›®è¡¨å•æ—¶ï¼Œä¸¾ä¾‹</li></ul><p id="1f7694d5-ea46-80e1-ab24-e1b9daee1565" class="">
</p><p id="1f7694d5-ea46-80f8-9a3b-fcbe9e252931" class=""><strong>è¡¨å•è®¾è®¡ï¼š</strong></p><ul id="1f7694d5-ea46-80a9-a6c0-d0723c81f526" class="bulleted-list"><li style="list-style-type:disc">å›¾ä¹¦é¦†ä¸­çš„è®¸å¤šæ¨¡å‹éƒ½æ˜¯ç›¸å…³/ä¾èµ–çš„ï¼Œä¾‹å¦‚ï¼Œä¸€æœ¬ä¹¦éœ€è¦ä¸€ä¸ªä½œè€…ï¼Œä¹Ÿæœ‰å¯èƒ½æœ‰ä¸€ä¸ªæˆ–å¤šä¸ªç§ç±»ã€‚ä¸‹é¢æ—¶å¦‚ä½•å¤„ç†ç”¨æˆ·å¸Œæœ›çš„æƒ…å†µ<ul id="1f7694d5-ea46-805b-8dc0-d812e31461d6" class="bulleted-list"><li style="list-style-type:circle">åœ¨å…¶ç›¸å…³å¯¹è±¡ä¸å­˜åœ¨æ—¶ï¼Œåˆ›å»ºå¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œå°šæœªå®šä¹‰ä½œè€…å¯¹è±¡çš„ä¹¦ï¼‰</li></ul><ul id="1f7694d5-ea46-80c5-8e59-e68dd9f744aa" class="bulleted-list"><li style="list-style-type:circle">åˆ é™¤å¦ä¸€ä¸ªå¯¹è±¡ä»åœ¨ä½¿ç”¨çš„å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œåˆ é™¤ä»æœ‰ä¹¦æœ¬ä½¿ç”¨çš„ç§ç±»ï¼‰</li></ul></li></ul><ul id="1f7694d5-ea46-8095-bd4c-cf727799c146" class="bulleted-list"><li style="list-style-type:disc">æœ¬é¡¹ç›®ä¸­ï¼Œç®€å•å£°æ˜è¡¨å•<ul id="1f7694d5-ea46-808e-bd16-cd07d2fdbaf7" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨å·²ç»å­˜åœ¨çš„å¯¹è±¡åˆ›å»ºå¯¹è±¡ï¼ˆå› æ­¤ç”¨æˆ·åœ¨å°è¯•åˆ›å»ºä»»ä½•Bookå¯¹è±¡ä¹‹å‰ï¼Œå¿…é¡»åˆ›å»ºæ‰€éœ€çš„Authorå’ŒGenreå®ä¾‹ï¼‰</li></ul><ul id="1f7694d5-ea46-806c-9282-dafc50a14051" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœå¯¹è±¡æœªè¢«å…¶ä»–å¯¹è±¡å¼•ç”¨ï¼Œåˆ™åˆ é™¤è¯¥å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œåœ¨åˆ é™¤æ‰€æœ‰å…³è”çš„BookInstanceçš„å¯¹è±¡ä¹‹å‰ï¼Œæ— æ³•åˆ é™¤è¯¥Bookï¼‰</li></ul></li></ul><ul id="1f7694d5-ea46-8084-a0bb-fcf3744169f2" class="bulleted-list"><li style="list-style-type:disc"><strong>è¿›é˜¶å†…å®¹</strong><ul id="1f7694d5-ea46-8065-877e-f720755db941" class="bulleted-list"><li style="list-style-type:circle">é€šå¸¸ä¼šåœ¨åå°æ¥æ”¶formè¡¨å•æäº¤çš„æ•°æ®ï¼Œè¿™é‡Œæ˜¯express</li></ul><ul id="1f7694d5-ea46-8076-b921-c822b9a63069" class="bulleted-list"><li style="list-style-type:circle">é¦–å…ˆå¼•å…¥express<ul id="1f7694d5-ea46-80b9-9ec0-e8d0e623d811" class="bulleted-list"><li style="list-style-type:square">const app = expressï¼ˆï¼‰</li></ul></li></ul><ul id="1f7694d5-ea46-807e-b95b-f803372735dc" class="bulleted-list"><li style="list-style-type:circle">POSTæäº¤ï¼Œè¿™é‡Œä½¿ç”¨body-parserä¸­é—´ä»¶ï¼Œå¤„ç†bodyæ•°æ®</li></ul><ul id="1f7694d5-ea46-804d-91a4-e7b65bfca7a9" class="bulleted-list"><li style="list-style-type:circle">è®¾è®¡æ–‡ä»¶ä¸Šä¼ ï¼Œéœ€è¦multerä¸­é—´ä»¶ã€‚</li></ul></li></ul><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f7694d5-ea46-804c-8ccc-de318642bd43"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f7694d5-ea46-809d-a666-c462c1747bbe" class="">æ›´å¸¸ç”¨çš„æ˜¯ï¼Œå…è®¸åœ¨åˆ›å»ºæ–°å¯¹è±¡æ—¶åˆ›å»ºä¾èµ–å¯¹è±¡ï¼Œå¹¶éšæ—¶åˆ é™¤ä»»ä½•å¯¹è±¡ï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡åˆ é™¤ä¾èµ–å¯¹è±¡ï¼Œä»æ•°æ®åº“ä¸­ï¼Œåˆ é™¤å·²åˆ é™¤å¯¹è±¡çš„å¼•ç”¨ï¼‰</p></div></figure><p id="1f7694d5-ea46-80e3-991d-c331e275fb3d" class="">
</p><p id="1f7694d5-ea46-8076-9f52-e6ff617d0273" class=""><strong>è·¯ç”±ï¼š</strong></p><ul id="1f7694d5-ea46-808f-a741-c14f5e08fbb2" class="bulleted-list"><li style="list-style-type:disc">å®ç°è¡¨å•å¤„ç†ä»£ç ï¼Œéœ€è¦ä¸¤ä¸ªå…·æœ‰ç›¸åŒURLæ¨¡å¼çš„è·¯ç”±<ul id="1f7694d5-ea46-80e7-9b76-dc1cdcadca12" class="bulleted-list"><li style="list-style-type:circle">ç¬¬ä¸€ä¸ªGETè·¯ç”±ï¼Œç”¨äºæ˜¾ç¤ºç”¨äºåˆ›å»ºå¯¹è±¡çš„æ–°ç©ºè¡¨å•</li></ul><ul id="1f7694d5-ea46-8018-a82f-fd53f764aa65" class="bulleted-list"><li style="list-style-type:circle">ç¬¬äºŒä¸ªPOSTè·¯ç”±ï¼Œç”¨äºéªŒè¯ç”¨æˆ·è¾“å…¥çš„æ•°æ®ï¼Œç„¶åä¿å­˜ä¿¡æ¯ï¼Œå¹¶é‡å®šå‘åˆ°è¯¦ç»†ä¿¡æ¯é¡µé¢ï¼ˆæ•°æ®æœ‰æ•ˆï¼‰ï¼Œæˆ–é‡æ–°æ˜¾ç¤ºæœ‰é”™è¯¯çš„è¡¨å•ï¼ˆæ•°æ®æ— æ•ˆï¼‰</li></ul></li></ul><ul id="1f7694d5-ea46-80a6-8c3e-c038f343ef84" class="bulleted-list"><li style="list-style-type:disc">åœ¨/routes/catalog.jsä¸­æœªæ¨¡å‹åˆ›å»ºäº†é¡µé¢ï¼Œåˆ›å»ºäº†è·¯å¾„<ul id="1f7694d5-ea46-8016-b73b-f97704025183" class="bulleted-list"><li style="list-style-type:circle">ç§ç±»è·¯ç”±å¦‚ä¸‹æ‰€ç¤º<ul id="1f7694d5-ea46-80c4-b219-f94b972cc5a6" class="bulleted-list"><li style="list-style-type:square">// GET request for creating a Genre. NOTE This must come before route that displays Genre (uses id).<br/>router.get(&quot;/genre/create&quot;, genre_controller.genre_create_get);<br/><p id="1f7694d5-ea46-809e-bc4c-f850dffae83f" class="">// POST request for creating Genre.<br/>router.post(&quot;/genre/create&quot;, genre_controller.genre_create_post);<br/></p></li></ul></li></ul></li></ul><p id="1f7694d5-ea46-8094-a113-dcec19fe2fde" class="">
</p><p id="1f7694d5-ea46-8091-bb12-e7cf2a6655e3" class=""><strong>Expressè¡¨å•å­æ–‡ä»¶ï¼šç±»ä¼¼äºä¸Šè¿°å„è¯¦æƒ…é¡µé¢ã€‚</strong></p><p id="1f7694d5-ea46-8064-86b4-d4f8059e4822" class="">
</p><p id="1f7694d5-ea46-80ff-93e8-c9090cd15f8d" class=""><strong>001-åˆ›å»ºç±»å‹è¡¨å•ï¼š</strong></p><ul id="1f7694d5-ea46-8037-bb93-f76b3f64e825" class="bulleted-list"><li style="list-style-type:disc">æ¼”ç¤ºå¦‚ä½•å®šä¹‰é¡µé¢æ¥åˆ›å»ºGenreå¯¹è±¡ã€‚å› ä¸ºGenreåªæœ‰ä¸€ä¸ªå­—æ®µnameï¼Œä¸”æ²¡æœ‰ä¾èµ–é¡¹ã€‚ä¸å…¶ä»–é¡µé¢ä¸€æ ·ï¼Œéœ€è¦è®¾ç½®è·¯ç”±ã€æ§åˆ¶å™¨ã€è§†å›¾</li></ul><p id="1f7694d5-ea46-8040-8de8-c4bcc0bcf789" class="">ã€å¯¼å…¥éªŒè¯å’Œæ¸…ç†ã€‘ï¼š</p><ul id="1f7694d5-ea46-808b-9ef5-d3ce9d5c06b0" class="bulleted-list"><li style="list-style-type:disc">æ§åˆ¶å™¨ä¸­ä½¿ç”¨express-validatorï¼Œä»â€˜express-validatorâ€™æ¨¡å—ä¸­requireä½¿ç”¨çš„å‡½æ•°<ul id="1f7694d5-ea46-80c6-88f3-f2c7d7565a07" class="bulleted-list"><li style="list-style-type:circle">/controllers/genreController.jsï¼Œå¼•å…¥å‡½æ•°<ul id="1f7694d5-ea46-80e8-af7d-df3454794907" class="bulleted-list"><li style="list-style-type:square">const { body, validationResult } = require(&quot;express-validator&quot;);</li></ul></li></ul></li></ul><p id="1f7694d5-ea46-8027-a724-c8f8e1afc3dd" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><ul id="1f7694d5-ea46-806c-9a87-c4e9883e0248" class="bulleted-list"><li style="list-style-type:disc">æ‰¾åˆ°genre_create_getï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ›¿æ¢ä¸ºä¸‹é¢ä»£ç ï¼Œæ¸²æŸ“genre_from.pugè§†å›¾<ul id="1f7694d5-ea46-8006-9a7c-f6ddcedacef4" class="bulleted-list"><li style="list-style-type:circle">// å‘ˆç° GET æ–¹æ³•è·å–çš„ Genre è¡¨å•<br/>exports.genre_create_get = (req, res, next) =&gt; {<br/>res.render(&quot;genre_form&quot;, { title: &quot;Create Genre&quot; });<br/>};<br/></li></ul></li></ul><ul id="1f7694d5-ea46-800d-8c56-ca9892516d16" class="bulleted-list"><li style="list-style-type:disc">è¯·æ³¨æ„ï¼Œè¿™é‡Œä½¿ç”¨ä¸€ä¸ªâ€œæ™®é€šâ€express è·¯ç”±å¤„ç†å™¨æ›¿æ¢æˆ‘ä»¬åœ¨Â <a href="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Extensions/Server-side/Express_Nodejs/routes">Express æ•™ç¨‹ 4ï¼šè·¯ç”±å’Œæ§åˆ¶å™¨</a>ä¸­æ·»åŠ çš„å ä½å¼‚æ­¥å¤„ç†å™¨ã€‚æˆ‘ä»¬ä¸éœ€è¦ä¸ºè¯¥è·¯ç”±æ·»åŠ Â <code>asyncHandler()</code>Â åŒ…è£…å™¨ï¼Œå› ä¸ºå®ƒä¸åŒ…å«ä»»ä½•å¯èƒ½å¼•å‘å¼‚å¸¸çš„ä»£ç ã€‚</li></ul><p id="1f7694d5-ea46-80e0-992e-fbb7128f44ed" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><ul id="1f7694d5-ea46-8053-9e20-e53cd542a0b6" class="bulleted-list"><li style="list-style-type:disc">æ‰¾åˆ°genre_create_postï¼ˆï¼‰æ§åˆ¶å™¨æ–¹æ³•ï¼Œæ›¿æ¢<ul id="1f7694d5-ea46-800a-b810-d1c2c5cd562e" class="bulleted-list"><li style="list-style-type:circle">// å¤„ç† POST æ–¹æ³•åˆ›å»ºçš„ Genre<br/>exports.genre_create_post = [<br/>// éªŒè¯åŠæ¸…ç†åç§°å­—æ®µ<br/>body(&quot;name&quot;, &quot;Genre name must contain at least 3 characters&quot;)<br/>.trim()<br/>.isLength({ min: 3 })<br/>.escape(),<br/><p id="1f7694d5-ea46-8058-931f-dac459c2b376" class="">// å¤„ç†éªŒè¯åŠæ¸…ç†è¿‡åçš„è¯·æ±‚<br/>asyncHandler(async (req, res, next) =&gt; {<br/>// ä»è¯·æ±‚ä¸­æå–éªŒè¯æ—¶äº§ç”Ÿçš„é”™è¯¯ä¿¡æ¯<br/>const errors = validationResult(req);<br/></p><p id="1f7694d5-ea46-8054-84f6-f79aaa3507f1" class="">// ä½¿ç”¨ç»å»é™¤ç©ºç™½å­—ç¬¦å’Œè½¬ä¹‰å¤„ç†çš„æ•°æ®åˆ›å»ºä¸€ä¸ªç±»å‹å¯¹è±¡<br/>const genre = new Genre({ name: req.body.name });<br/><br/>if (!errors.isEmpty()) {<br/>  // å‡ºç°é”™è¯¯ã€‚ä½¿ç”¨æ¸…ç†åçš„å€¼/é”™è¯¯ä¿¡æ¯é‡æ–°æ¸²æŸ“è¡¨å•<br/>  res.render(&quot;genre_form&quot;, {<br/>    title: &quot;Create Genre&quot;,<br/>    genre: genre,<br/>    errors: errors.array(),<br/>  });<br/>  return;<br/>} else {<br/>  // è¡¨æ ¼ä¸­çš„æ•°æ®æœ‰æ•ˆ<br/>  // æ£€æŸ¥æ˜¯å¦å­˜åœ¨åŒåçš„ Genre<br/>  const genreExists = await Genre.findOne({ name: req.body.name })<br/>    .collation({ locale: &quot;en&quot;, strength: 2 })<br/>    .exec();<br/>  if (genreExists) {<br/>    // å­˜åœ¨åŒåçš„ Genreï¼Œåˆ™é‡å®šå‘åˆ°è¯¦æƒ…é¡µé¢<br/>    res.redirect(genreExists.url);<br/>  } else {<br/>    await genre.save();<br/>    // ä¿å­˜æ–°åˆ›å»ºçš„ Genreï¼Œç„¶åé‡å®šå‘åˆ°ç±»å‹çš„è¯¦æƒ…é¡µé¢<br/>    res.redirect(genre.url);<br/>  }<br/>}<br/><br/></p><p id="1f7694d5-ea46-808e-a565-dbddf0725cd2" class="">}),<br/>];<br/></p></li></ul></li></ul><ul id="1f7694d5-ea46-8047-a4be-d713997c1d6c" class="bulleted-list"><li style="list-style-type:disc">å…ˆéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ§åˆ¶å™¨ä¸æ˜¯å•ä¸ªä¸­é—´ä»¶å‡½æ•°ï¼ˆå¸¦æœ‰å‚æ•°Â <code>(req, res, next)</code>ï¼‰ï¼Œè€Œæ˜¯æŒ‡å®šäº†ä¸­é—´ä»¶å‡½æ•°<em>æ•°ç»„</em>ã€‚è¯¥æ•°ç»„ä¼ é€’ç»™è·¯ç”±å™¨å‡½æ•°å¹¶ä¾æ¬¡æ‰§è¡Œå„ä¸ªæ–¹æ³•ã€‚</li></ul><ul id="1f7694d5-ea46-805e-96f6-ed3c4a03e209" class="bulleted-list"><li style="list-style-type:disc">æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªæ–¹æ³•å®šä¹‰äº†ä¸€ä¸ª body éªŒè¯å™¨ï¼ˆ<code>body()</code>ï¼‰ï¼Œç”¨äºéªŒè¯å’Œæ¸…ç†å­—æ®µã€‚è¿™ä¸ªæ–¹æ³•ä½¿ç”¨Â <code>trim()</code>Â åˆ é™¤æ‰€æœ‰çš„é¦–éƒ¨/å°¾éƒ¨ç©ºç™½ï¼Œæ£€æŸ¥Â <em>name</em>Â å­—æ®µæ˜¯å¦ä¸ºç©ºï¼Œç„¶åä½¿ç”¨Â <code>escape()</code>Â åˆ é™¤ä»»ä½•å±é™©çš„ HTML å­—ç¬¦ã€‚<ul id="1f7694d5-ea46-803b-bbec-d924c7e6dd32" class="bulleted-list"><li style="list-style-type:circle">[<br/>// æ£€éªŒ name å­—æ®µä¸ä¸ºç©º<br/>body(&quot;name&quot;, &quot;Genre name must contain at least 3 characters&quot;)<br/>.trim()<br/>.isLength({ min: 3 })<br/>.escape(),<br/>// â€¦<br/>];<br/></li></ul></li></ul><ul id="1f7694d5-ea46-8023-8988-ef83f0337a26" class="bulleted-list"><li style="list-style-type:disc">æŒ‡å®šéªŒè¯å™¨åï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªä¸­é—´ä»¶å‡½æ•°æ¥æå–ä»»ä½•éªŒè¯é”™è¯¯ã€‚æˆ‘ä»¬ä½¿ç”¨Â <code>isEmpty()</code>Â æ¥æ£€æŸ¥éªŒè¯ç»“æœæ˜¯å¦æœ‰é”™è¯¯ã€‚å¦‚æœæœ‰ï¼Œæˆ‘ä»¬å°±å†æ¬¡æ¸²æŸ“è¡¨å•ï¼Œä¼ å…¥ç»è¿‡æ¸…ç†çš„ç±»å‹å¯¹è±¡å’Œé”™è¯¯æ¶ˆæ¯æ•°ç»„ï¼ˆ<code>errors.array()</code>ï¼‰ã€‚<ul id="1f7694d5-ea46-809f-933c-f01bc11f0752" class="bulleted-list"><li style="list-style-type:circle">// å¤„ç†éªŒè¯å’Œæ¸…ç†ä¹‹åçš„è¯·æ±‚<br/>asyncHandler(async (req, res, next) =&gt; {<br/>// ä»è¯·æ±‚ä¸­æå–éªŒè¯é”™è¯¯<br/>const errors = validationResult(req);<br/><p id="1f7694d5-ea46-80f2-a57f-f211ce323a04" class="">// ä½¿ç”¨ç»å»é™¤ç©ºç™½å­—ç¬¦å’Œè½¬ä¹‰å¤„ç†çš„æ•°æ®åˆ›å»ºä¸€ä¸ªç±»å‹å¯¹è±¡<br/>const genre = new Genre({ name: <br/><a href="http://req.body.name/">req.body.name</a> });</p><p id="1f7694d5-ea46-80e6-bc39-ecad0a90cf46" class="">if (!errors.isEmpty()) {<br/>// å‡ºç°é”™è¯¯ã€‚ä½¿ç”¨æ¸…ç†åçš„å€¼/é”™è¯¯ä¿¡æ¯é‡æ–°æ¸²æŸ“è¡¨å•<br/>res.render(&quot;genre_form&quot;, {<br/>title: &quot;Create Genre&quot;,<br/>genre: genre,<br/>errors: errors.array(),<br/>});<br/>return;<br/>} else {<br/>// è¡¨å•ä¸­çš„æ•°æ®æœ‰æ•ˆ<br/>// â€¦<br/>}<br/>});<br/></p></li></ul></li></ul><ul id="1f7694d5-ea46-80c7-a851-dc1d8e29e26f" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœç±»å‹åç§°æ•°æ®æœ‰æ•ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬æ‰§è¡Œä¸åŒºåˆ†å¤§å°å†™çš„æœç´¢ï¼Œä»¥æŸ¥çœ‹æ˜¯å¦å­˜åœ¨å…·æœ‰ç›¸åŒåç§°çš„Â <code>Genre</code>ï¼ˆå› ä¸ºæˆ‘ä»¬ä¸æƒ³åˆ›å»ºä»…å­—æ¯å¤§å°å†™ä¸åŒçš„é‡å¤æˆ–è¿‡äºè¿‘ä¼¼çš„è®°å½•ï¼Œä¾‹å¦‚â€œFantasyâ€ã€â€œfantasyâ€ã€â€œFaNtAsYâ€ç­‰ç­‰ï¼‰ã€‚ä¸ºäº†åœ¨æœç´¢æ—¶å¿½ç•¥æ‰å¤§å°å†™å’Œé‡éŸ³ï¼Œæˆ‘ä»¬é“¾å¼è°ƒç”¨äº†Â <code><a href="https://mongoosejs.com/docs/api/query.html#Query.prototype.collation()">collation()</a></code>Â æ–¹æ³•ï¼ŒæŒ‡å®šâ€œenâ€çš„åŒºåŸŸè®¾ç½®å’Œ 2 çš„å¼ºåº¦</li></ul><ul id="1f7694d5-ea46-80b3-959e-f39364f79d4c" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœåŒ¹é…åç§°çš„Â <code>Genre</code>Â å·²ç»å­˜åœ¨ï¼Œæˆ‘ä»¬å°†é‡å®šå‘åˆ°å…¶è¯¦æƒ…é¡µé¢ã€‚å¦‚æœä¸å­˜åœ¨ï¼Œæˆ‘ä»¬åˆ™ä¿å­˜æ–°ç§ç±»å¹¶é‡å®šå‘åˆ°å…¶è¯¦æƒ…é¡µé¢ã€‚è¯·æ³¨æ„ï¼Œè¿™é‡Œæˆ‘ä»¬Â <code>await</code>Â æ•°æ®åº“çš„æŸ¥è¯¢ç»“æœï¼Œéµå¾ªä¸å…¶ä»–è·¯ç”±å¤„ç†å™¨ç›¸åŒçš„æ¨¡å¼<ul id="1f7694d5-ea46-8083-9bf8-fcffb0f18638" class="bulleted-list"><li style="list-style-type:circle">// æ£€æŸ¥æ˜¯å¦å­˜åœ¨åŒåçš„ Genre<br/>const genreExists = await Genre.findOne({ name: <br/><a href="http://req.body.name/">req.body.name</a> })<br/>.collation({ locale: &quot;en&quot;, strength: 2 })<br/>.exec();<br/>if (genreExists) {<br/>// å­˜åœ¨åŒåçš„ Genreï¼Œåˆ™é‡å®šå‘åˆ°è¯¦æƒ…é¡µé¢<br/>res.redirect(genreExists.url);<br/>} else {<br/>await genre.save();<br/>// ä¿å­˜æ–°åˆ›å»ºçš„ Genreï¼Œç„¶åé‡å®šå‘åˆ°è¯¦æƒ…é¡µé¢<br/>res.redirect(genre.url);<br/>}<br/></li></ul></li></ul><ul id="1f7694d5-ea46-80f4-b17c-e808d92da94d" class="bulleted-list"><li style="list-style-type:disc">æˆ‘ä»¬æ‰€æœ‰çš„ post æ§åˆ¶å™¨ä¸­éƒ½ä½¿ç”¨äº†ç›¸åŒçš„æ¨¡å¼ï¼šè¿è¡ŒéªŒè¯å™¨ï¼ˆå¸¦æœ‰æ¸…ç†åŠŸèƒ½ï¼‰ï¼Œç„¶åæ£€æŸ¥é”™è¯¯å¹¶é‡æ–°æ¸²æŸ“å¸¦æœ‰é”™è¯¯ä¿¡æ¯çš„è¡¨å•æˆ–ä¿å­˜æ•°æ®</li></ul><p id="1f7694d5-ea46-805a-bf3d-c5f5b274975c" class="">ã€è§†å›¾ã€‘</p><ul id="1f7694d5-ea46-8090-84a3-c485ebb7b1e3" class="bulleted-list"><li style="list-style-type:disc">å½“æˆ‘ä»¬åˆ›å»ºæ–°çš„ç§ç±»Â <code>Genre</code>Â æ—¶ï¼Œä¼šåœ¨Â <code>GET</code>Â å’ŒÂ <code>POST</code>Â æ§åˆ¶å™¨/è·¯ç”±ä¸­æ¸²æŸ“ç›¸åŒçš„è§†å›¾ï¼ˆç¨åå½“æˆ‘ä»¬<em>æ›´æ–°</em>ç§ç±»æ—¶ä¹Ÿä¼šä½¿ç”¨å®ƒï¼‰ï¼Œåœ¨Â <code>GET</code>Â æƒ…å†µä¸‹ï¼Œè¡¨å•ä¸ºç©ºï¼Œæˆ‘ä»¬åªä¼ é€’ä¸€ä¸ªæ ‡é¢˜å˜é‡ã€‚åœ¨Â <code>POST</code>Â æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¹‹å‰è¾“å…¥äº†æ— æ•ˆæ•°æ®â€”â€”å¯¹äºÂ <code>genre</code>Â å˜é‡ï¼Œæˆ‘ä»¬å›ä¼ ç»æ¸…ç†åçš„è¾“å…¥æ•°æ®ï¼Œå¯¹äºé”™è¯¯å˜é‡ï¼Œåˆ™å›ä¼ ä¸€ç»„é”™è¯¯æ¶ˆæ¯ã€‚ä¸‹é¢çš„ä»£ç æ˜¾ç¤ºäº†åœ¨ä¸¤ç§æƒ…å†µä¸‹æ¸²æŸ“æ¨¡æ¿çš„æ§åˆ¶å™¨ä»£ç <ul id="1f7694d5-ea46-804d-b8a9-ee562958a9e5" class="bulleted-list"><li style="list-style-type:circle">// æ¸²æŸ“ GET è·¯ç”±<br/>res.render(&quot;genre_form&quot;, { title: &quot;Create Genre&quot; });<br/><p id="1f7694d5-ea46-8055-8c6f-c80c552a5bb6" class="">// æ¸²æŸ“ POST è·¯ç”±<br/>res.render(&quot;genre_form&quot;, {<br/>title: &quot;Create Genre&quot;,<br/>genre,<br/>errors: errors.array(),<br/>});<br/></p></li></ul></li></ul><ul id="1f7694d5-ea46-80ec-a127-c063f4a577ca" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/genre_from.pugï¼Œå†™å…¥ä¸‹é¢ä»£ç <ul id="1f7694d5-ea46-809c-97ba-fb21f74902c7" class="bulleted-list"><li style="list-style-type:circle">extends layout<p id="1f7694d5-ea46-8077-bb70-eab9d6a7d3ce" class="">block content</p><p id="1f7694d5-ea46-80d8-9166-da77490f76ed" class="">h1 #{title}</p><p id="1f7694d5-ea46-8077-8e05-d2b3c85a4471" class="">form(method=&#x27;POST&#x27;)<br/>div.form-group<br/>label(for=&#x27;name&#x27;) Genre:<br/>input#name.form-control(type=&#x27;text&#x27;, placeholder=&#x27;Fantasy, Poetry etc.&#x27; name=&#x27;name&#x27; required value=(undefined===genre ? &#x27;&#x27; : <br/><a href="http://genre.name/">genre.name</a>) )<br/>button.btn.btn-primary(type=&#x27;submit&#x27;) Submit<br/></p><p id="1f7694d5-ea46-80a5-bc93-f805c1087dbd" class="">if errors<br/>ul<br/>for error in errors<br/>li!= error.msg<br/></p></li></ul></li></ul><ul id="1f7694d5-ea46-80ce-8c40-e9f27415086a" class="bulleted-list"><li style="list-style-type:disc">ä»æˆ‘ä»¬ä¹‹å‰çš„æ•™ç¨‹ä¸­å¯ä»¥å¾ˆå¥½åœ°ç†è§£è¿™ä¸ªæ¨¡æ¿çš„å¤§éƒ¨åˆ†å†…å®¹ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ‰©å±•Â <strong>layout.pug</strong>Â åŸºæœ¬æ¨¡æ¿å¹¶è¦†ç›–åä¸ºâ€œ<strong>content</strong>â€çš„Â <code>block</code>ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨ä»æ§åˆ¶å™¨ä¼ å…¥Â <code>title</code>ï¼ˆé€šè¿‡Â <code>render()</code>Â æ–¹æ³•ï¼‰åˆ›å»ºäº†ä¸€ä¸ªæ ‡é¢˜ã€‚</li></ul><ul id="1f7694d5-ea46-80e5-ba41-c3198301e3eb" class="bulleted-list"><li style="list-style-type:disc">æ¥ä¸‹æ¥ï¼Œpug ä»£ç ä¸­çš„ HTML è¡¨å•éƒ¨åˆ†åˆ™ä¼šä½¿ç”¨Â <code>method=&quot;POST&quot;</code>Â æ–¹æ³•å°†æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”ç”±äºÂ <code>action</code>Â æ˜¯ç©ºå­—ç¬¦ä¸²ï¼Œå› æ­¤ä¼šå°†æ•°æ®å‘é€åˆ°ä¸é¡µé¢ç›¸åŒçš„ URLã€‚</li></ul><ul id="1f7694d5-ea46-8016-912a-ef84448981c1" class="bulleted-list"><li style="list-style-type:disc">è¯¥è¡¨å•å®šä¹‰äº†ä¸€ä¸ªåä¸ºâ€œnameâ€çš„â€œtextâ€ç±»å‹çš„å¿…å¡«å­—æ®µã€‚è¯¥å­—æ®µçš„é»˜è®¤å€¼å–å†³äºæ˜¯å¦å®šä¹‰äº†ç§ç±»Â <code>genre</code>Â å˜é‡ã€‚å¦‚æœä»Â <code>GET</code>Â è·¯ç”±è°ƒç”¨ï¼Œå®ƒå°†ä¸ºç©ºï¼Œå› ä¸ºè¿™æ˜¯ä¸€ä¸ªæ–°è¡¨å•ã€‚å¦‚æœä»Â <code>POST</code>Â è·¯ç”±è°ƒç”¨ï¼Œå®ƒå°†åŒ…å«ç”¨æˆ·æœ€åˆè¾“å…¥çš„ï¼ˆæ— æ•ˆï¼‰å€¼ã€‚<p id="1f7694d5-ea46-8012-8642-e87db385bc02" class="">è¯¥é¡µé¢çš„æœ€åä¸€éƒ¨åˆ†æ˜¯é”™è¯¯ä»£ç ã€‚å¦‚æœå·²å®šä¹‰é”™è¯¯å˜é‡ï¼Œåˆ™åªä¼šæ‰“å°é”™è¯¯åˆ—è¡¨ï¼ˆæ¢å¥è¯è¯´ï¼Œå½“æ¨¡æ¿åœ¨Â <code>GET</code>Â è·¯ç”±ä¸Šå‘ˆç°æ—¶ï¼Œæ­¤éƒ¨åˆ†å°†ä¸ä¼šå‡ºç°ï¼‰</p></li></ul><p id="1f7694d5-ea46-8055-8cea-f7ed43044c3e" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹ï¼š</strong></p><figure id="1f7694d5-ea46-8022-b787-e6c52bff7eab" class="image"><a href="image%2016.png"><img style="width:561.1875px" src="image%2016.png"/></a></figure><p id="1f7694d5-ea46-806e-9fd1-f7940d3eda25" class=""><strong>002-åˆ›å»ºä½œè€…è¡¨å•ï¼šï¼ˆæ–¹æ³•åŒä¸Šï¼Œä¸è¿‡å¤šè®²è¿°ï¼‰</strong></p><p id="1f7694d5-ea46-807a-8487-efa1d033f21d" class="">ã€å¯¼å…¥éªŒè¯å’Œæ¸…ç†æ–¹æ³•ã€‘</p><ul id="1f7694d5-ea46-8011-a960-f04a72385e57" class="bulleted-list"><li style="list-style-type:disc">æ‰“å¼€Â <strong>/controllers/authorController.js</strong>ï¼Œå¹¶å°†ä»¥ä¸‹ä»£ç æ·»åŠ åˆ°æ–‡ä»¶é¡¶éƒ¨<ul id="1f7694d5-ea46-805f-a564-d1cc1111cd8b" class="bulleted-list"><li style="list-style-type:circle">const { body, validationResult } = require(&quot;express-validator&quot;);</li></ul></li></ul><p id="1f7694d5-ea46-8069-9886-e3a9f1fd8d7d" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><ul id="1f7694d5-ea46-806e-9333-e7ccfe335e6e" class="bulleted-list"><li style="list-style-type:disc">æ‰¾åˆ°å¯¼å‡ºçš„Â <code>author_create_get()</code>Â æ§åˆ¶å™¨æ–¹æ³•å¹¶ç”¨ä»¥ä¸‹ä»£ç æ›¿æ¢<ul id="1f7694d5-ea46-8063-912e-f16d8b8b57cd" class="bulleted-list"><li style="list-style-type:circle">// å±•ç¤º GET æ–¹æ³•è·å–çš„åˆ›å»ºä½œè€…è¡¨å•<br/>exports.author_create_get = (req, res, next) =&gt; {<br/>res.render(&quot;author_form&quot;, { title: &quot;Create Author&quot; });<br/>};<br/></li></ul></li></ul><p id="1f7694d5-ea46-8047-8519-fb9ba0548c71" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><ul id="1f7694d5-ea46-8040-84ce-d105bed58c5c" class="bulleted-list"><li style="list-style-type:disc">// å¤„ç† POST æ–¹æ³•æäº¤çš„åˆ›å»ºä½œè€…è¡¨å•<br/>exports.author_create_post = [<br/>// éªŒè¯å¹¶ä¸”æ¸…ç†å­—æ®µ<br/>body(&quot;first_name&quot;)<br/>.trim()<br/>.isLength({ min: 1 })<br/>.escape()<br/>.withMessage(&quot;First name must be specified.&quot;)<br/>.isAlphanumeric()<br/>.withMessage(&quot;First name has non-alphanumeric characters.&quot;),<br/>body(&quot;family_name&quot;)<br/>.trim()<br/>.isLength({ min: 1 })<br/>.escape()<br/>.withMessage(&quot;Family name must be specified.&quot;)<br/>.isAlphanumeric()<br/>.withMessage(&quot;Family name has non-alphanumeric characters.&quot;),<br/>body(&quot;date_of_birth&quot;, &quot;Invalid date of birth&quot;)<br/>.optional({ values: &quot;falsy&quot; })<br/>.isISO8601()<br/>.toDate(),<br/>body(&quot;date_of_death&quot;, &quot;Invalid date of death&quot;)<br/>.optional({ values: &quot;falsy&quot; })<br/>.isISO8601()<br/>.toDate(),<br/><p id="1f7694d5-ea46-8053-aedd-d3bdfaf97c69" class="">// åœ¨éªŒè¯å’Œä¿®æ•´å®Œå­—æ®µåå¤„ç†è¯·æ±‚<br/>asyncHandler(async (req, res, next) =&gt; {<br/>// ä»è¯·æ±‚ä¸­æå–éªŒè¯é”™è¯¯<br/>const errors = validationResult(req);<br/></p><p id="1f7694d5-ea46-80f9-aaae-f7643de4f657" class="">// ä½¿ç”¨ç»è½¬ä¹‰å’Œå»é™¤ç©ºç™½å­—ç¬¦å¤„ç†çš„æ•°æ®åˆ›å»ºä½œè€…å¯¹è±¡<br/>const author = new Author({<br/>  first_name: req.body.first_name,<br/>  family_name: req.body.family_name,<br/>  date_of_birth: req.body.date_of_birth,<br/>  date_of_death: req.body.date_of_death,<br/>});<br/><br/>if (!errors.isEmpty()) {<br/>  // å‡ºç°é”™è¯¯ã€‚ä½¿ç”¨æ¸…ç†åçš„å€¼/é”™è¯¯ä¿¡æ¯é‡æ–°æ¸²æŸ“è¡¨å•<br/>  res.render(&quot;author_form&quot;, {<br/>    title: &quot;Create Author&quot;,<br/>    author: author,<br/>    errors: errors.array(),<br/>  });<br/>  return;<br/>} else {<br/>  // è¡¨æ ¼ä¸­çš„æ•°æ®æœ‰æ•ˆ<br/><br/>  // ä¿å­˜ä½œè€…ä¿¡æ¯<br/>  await author.save();<br/>  // é‡å®šå‘åˆ°æ–°çš„ä½œè€…è®°å½•<br/>  res.redirect(author.url);<br/>}<br/><br/></p><p id="1f7694d5-ea46-80bf-b129-f2369f4a25b4" class="">}),<br/>];<br/></p></li></ul><ul id="1f7694d5-ea46-8054-994e-ca78f1bdcab3" class="bulleted-list"><li style="list-style-type:disc">æ­¤ä»£ç çš„ç»“æ„å’Œè¡Œä¸ºå‡ ä¹ä¸åˆ›å»ºÂ <code>Genre</code>Â å¯¹è±¡ä¸€è‡´ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éªŒè¯å¹¶æ¸…ç†æ•°æ®ã€‚å¦‚æœæ•°æ®æ— æ•ˆï¼Œæˆ‘ä»¬å°†é‡æ–°æ˜¾ç¤ºè¡¨å•ä»¥åŠç”¨æˆ·æœ€åˆè¾“å…¥çš„æ•°æ®å’Œé”™è¯¯æ¶ˆæ¯åˆ—è¡¨ã€‚å¦‚æœæ•°æ®æœ‰æ•ˆï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¿å­˜æ–°çš„ä½œè€…è®°å½•å¹¶å°†ç”¨æˆ·é‡å®šå‘åˆ°ä½œè€…è¯¦æƒ…é¡µé¢ã€‚<p id="1f7694d5-ea46-8048-a12d-e1c081964cde" class="">ä¸Â <code>Genre</code>Â çš„ post å¤„ç†å™¨ä¸åŒï¼Œæˆ‘ä»¬ä¸ä¼šåœ¨ä¿å­˜Â <code>Author</code>Â å¯¹è±¡ä¹‹å‰æ£€æŸ¥å…¶æ˜¯å¦å·²ç»å­˜åœ¨ã€‚ä»æŸç§ç¨‹åº¦ä¸Šè¯´æˆ‘ä»¬åº”è¯¥è¿™æ ·åšï¼Œä½†ç›®å‰æˆ‘ä»¬å¯èƒ½ä¼šæœ‰å¤šä¸ªåŒåä½œè€…ã€‚</p></li></ul><ul id="1f7694d5-ea46-803e-89e6-e9848ef27616" class="bulleted-list"><li style="list-style-type:disc">éªŒè¯ä»£ç ä¸­ä½¿ç”¨äº†æ–°ç‰¹æ€§<ul id="1f7694d5-ea46-80fc-9460-e544ffd26dd0" class="bulleted-list"><li style="list-style-type:circle">é“¾å¼è°ƒç”¨éªŒè¯å…¶ï¼Œä½¿ç”¨withMessageï¼ˆï¼‰æŒ‡å®šåœ¨å…ˆå‰çš„éªŒè¯æ–¹æ³•å¤±è´¥æ—¶éœ€è¦æ˜¾ç¤ºçš„é”™è¯¯æ¶ˆæ¯ï¼Œè¿™ä½¿å¾—åœ¨æ²¡æœ‰å¤§é‡ä»£ç é‡å¤çš„æƒ…å†µä¸‹ï¼Œæä¾›ç‰¹å®šçš„é”™è¯¯æ¶ˆæ¯å˜å¾—å®¹æ˜“<p id="1f7694d5-ea46-8077-87fc-e97bb46fdb4c" class="">[<br/>// éªŒè¯å¹¶ä¿®æ•´å­—æ®µ<br/>body(&quot;first_name&quot;)<br/>.trim()<br/>.isLength({ min: 1 })<br/>.escape()<br/>.withMessage(&quot;First name must be specified.&quot;)<br/>.isAlphanumeric()<br/>.withMessage(&quot;First name has non-alphanumeric characters.&quot;),<br/>// â€¦<br/>];<br/></p></li></ul><ul id="1f7694d5-ea46-806a-9053-dac0860abb6d" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨optionalï¼ˆï¼‰å‡½æ•°ï¼Œä¿è¯ä»…æœ‰å­—æ®µè¾“å…¥æ—¶æ‰ä¼šå»è¿è¡Œåç»­çš„éªŒè¯ï¼ˆå…è®¸éªŒè¯å¯é€‰å­—æ®µï¼‰ï¼Œä¾‹å¦‚è¥¿é¢æ£€æŸ¥å¯é€‰çš„å‡ºç”Ÿæ—¥æœŸæ˜¯å¦ç¬¦åˆISO8601æ ‡å‡†ï¼ˆä¼ é€’{valuesï¼šâ€œfalsyâ€}ï¼‰å¯¹è±¡æ„å‘³ç€å°†æ¥å—ç©ºå­—ç¬¦ä¸²æˆ–nullä½œä¸ºç©ºå€¼<p id="1f7694d5-ea46-80df-843b-eda1823a390b" class="">[<br/>body(&quot;date_of_birth&quot;, &quot;Invalid date of birth&quot;)<br/>.optional({ values: &quot;falsy&quot; })<br/>.isISO8601()<br/>.toDate(),<br/>];<br/></p></li></ul><ul id="1f7694d5-ea46-806a-9880-dbd6a4230e17" class="bulleted-list"><li style="list-style-type:circle">å‚æ•°ä»¥å­—ç¬¦ä¸²å½¢å¼ä»è¯·æ±‚ä¸­æ¥å—ï¼Œå¯ä»¥ä½¿ç”¨toDateï¼ˆï¼‰æˆ–toBooleanï¼ˆï¼‰å°†å®ƒä»¬è½¬æ¢ä¸ºæ­£ç¡®çš„JSç±»å‹</li></ul></li></ul><p id="1f7694d5-ea46-8094-84bb-fe9520f451bb" class="">ã€è§†å›¾ã€‘</p><ul id="1f7694d5-ea46-80ad-bd90-f7daeb2b8718" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»º/views/author_from.pug<ul id="1f7694d5-ea46-80c1-b194-c0e21d1fe4cc" class="bulleted-list"><li style="list-style-type:circle"></li></ul><p id="1f7694d5-ea46-80c3-872a-c74dfc2076de" class="">extends layout</p><p id="1f7694d5-ea46-80d2-b84e-edf5b5c84afb" class="">block content<br/>h1=title<br/></p><p id="1f7694d5-ea46-8021-bb55-e9ffb0c10045" class="">form(method=&#x27;POST&#x27;)<br/>div.form-group<br/>label(for=&#x27;first_name&#x27;) First Name:<br/>input#first_name.form-control(type=&#x27;text&#x27;, placeholder=&#x27;First name (Christian)&#x27; name=&#x27;first_name&#x27; required value=(undefined===author ? &#x27;&#x27; : author.first_name) )<br/>label(for=&#x27;family_name&#x27;) Family Name:<br/>input#family_name.form-control(type=&#x27;text&#x27;, placeholder=&#x27;Family name (Surname)&#x27; name=&#x27;family_name&#x27; required value=(undefined===author ? &#x27;&#x27; : author.family_name))<br/>div.form-group<br/>label(for=&#x27;date_of_birth&#x27;) Date of birth:<br/>input#date_of_birth.form-control(type=&#x27;date&#x27; name=&#x27;date_of_birth&#x27; value=(undefined===author ? &#x27;&#x27; : author.date_of_birth) )<br/>button.btn.btn-primary(type=&#x27;submit&#x27;) Submit<br/></p><p id="1f7694d5-ea46-8038-8393-f8e003388122" class="">if errors<br/>ul<br/>for error in errors<br/>li!= error.msg<br/></p></li></ul><p id="1f7694d5-ea46-80d6-9076-e6c5226b8b44" class=""><strong>ç»“æœæ˜¾ç¤ºå¦‚ä¸‹</strong><div class="indented"><figure id="1f7694d5-ea46-80fc-9110-f72ecbc95dd7" class="image"><a href="image%2017.png"><img style="width:535.1749877929688px" src="image%2017.png"/></a></figure></div></p><p id="1f7694d5-ea46-8043-928c-ee5623f5858f" class=""><strong>003-åˆ›å»ºä¹¦æœ¬è¡¨å•ï¼š</strong></p><p id="1f7694d5-ea46-8049-bdb9-f39611a2b1bf" class="">ã€å¯¼å…¥éªŒè¯å’Œæ¸…ç†æ–¹æ³•ã€‘ï¼š</p><p id="1f7694d5-ea46-8020-b967-d279b182e6aa" class="">const { body, validationResult } = require(&quot;express-validator/check&quot;);<br/>const { sanitizeBody } = require(&quot;express-validator/filter&quot;);<br/></p><p id="1f7694d5-ea46-8067-aea8-d0999802527a" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-808c-a357-d97d4b4698b7" class="">// Display book create form on GET.<br/>exports.book_create_get = function (req, res, next) {<br/>// Get all authors and genres, which we can use for adding to our book.<br/>async.parallel(<br/>{<br/>authors: function (callback) {<br/>Author.find(callback);<br/>},<br/>genres: function (callback) {<br/>Genre.find(callback);<br/>},<br/>},<br/>function (err, results) {<br/>if (err) {<br/>return next(err);<br/>}<br/>res.render(&quot;book_form&quot;, {<br/>title: &quot;Create Book&quot;,<br/>authors: results.authors,<br/>genres: results.genres,<br/>});<br/>},<br/>);<br/>};<br/></p><p id="1f7694d5-ea46-8051-912d-df69ccdb605c" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-8021-acce-e3c98e7fe3f4" class="">// Handle book create on POST.<br/>exports.book_create_post = [<br/>// Convert the genre to an array.<br/>(req, res, next) =&gt; {<br/>if (!(req.body.genre instanceof Array)) {<br/>if (typeof req.body.genre === &quot;undefined&quot;) req.body.genre = [];<br/>else req.body.genre = new Array(req.body.genre);<br/>}<br/>next();<br/>},<br/></p><p id="1f7694d5-ea46-80b4-81ad-ffcc8654a205" class="">// Validate fields.<br/>body(&quot;title&quot;, &quot;Title must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;author&quot;, &quot;Author must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;summary&quot;, &quot;Summary must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;isbn&quot;, &quot;ISBN must not be empty&quot;).isLength({ min: 1 }).trim(),<br/></p><p id="1f7694d5-ea46-80e3-b931-caf129742205" class="">// Sanitize fields (using wildcard).<br/>sanitizeBody(&quot;<br/><em>&quot;).trim().escape(),<br/>sanitizeBody(&quot;genre.<br/></em>&quot;).escape(),<br/>// Process request after validation and sanitization.<br/>(req, res, next) =&gt; {<br/>// Extract the validation errors from a request.<br/>const errors = validationResult(req);<br/></p><p id="1f7694d5-ea46-809d-ac7c-f18f729d16bc" class="">// Create a Book object with escaped and trimmed data.<br/>var book = new Book({<br/>  title: req.body.title,<br/>  author: req.body.author,<br/>  summary: req.body.summary,<br/>  isbn: req.body.isbn,<br/>  genre: req.body.genre,<br/>});<br/><br/>if (!errors.isEmpty()) {<br/>  // There are errors. Render form again with sanitized values/error messages.<br/><br/>  // Get all authors and genres for form.<br/>  async.parallel(<br/>    {<br/>      authors: function (callback) {<br/>        Author.find(callback);<br/>      },<br/>      genres: function (callback) {<br/>        Genre.find(callback);<br/>      },<br/>    },<br/>    function (err, results) {<br/>      if (err) {<br/>        return next(err);<br/>      }<br/><br/>      // Mark our selected genres as checked.<br/>      for (let i = 0; i &lt; results.genres.length; i++) {<br/>        if (book.genre.indexOf(results.genres[i]._id) &gt; -1) {<br/>          results.genres[i].checked = &quot;true&quot;;<br/>        }<br/>      }<br/>      res.render(&quot;book_form&quot;, {<br/>        title: &quot;Create Book&quot;,<br/>        authors: results.authors,<br/>        genres: results.genres,<br/>        book: book,<br/>        errors: errors.array(),<br/>      });<br/>    },<br/>  );<br/>  return;<br/>} else {<br/>  // Data from form is valid. Save book.<br/>  book.save(function (err) {<br/>    if (err) {<br/>      return next(err);<br/>    }<br/>    //successful - redirect to new book record.<br/>    res.redirect(book.url);<br/>  });<br/>}<br/><br/></p><p id="1f7694d5-ea46-80a6-89a1-c77a1a5f3898" class="">},<br/>];<br/></p><p id="1f7694d5-ea46-80fb-80df-eda6f3dc3450" class="">ã€è§†å›¾ã€‘</p><p id="1f7694d5-ea46-800c-9c1a-fb6d2601ab4e" class="">extends layout<br/><br/>block content<br/>  h1= title<br/><br/>  form(method=&#x27;POST&#x27; action=&#x27;&#x27;)<br/>    div.form-group<br/>      label(for=&#x27;title&#x27;) Title:<br/>      input#title.form-control(type=&#x27;text&#x27;, placeholder=&#x27;Name of book&#x27; name=&#x27;title&#x27; required=&#x27;true&#x27; value=(undefined===book ? &#x27;&#x27; : book.title) )<br/>    div.form-group<br/>      label(for=&#x27;author&#x27;) Author:<br/>      select#author.form-control(type=&#x27;select&#x27;, placeholder=&#x27;Select author&#x27; name=&#x27;author&#x27; required=&#x27;true&#x27; )<br/>        for author in authors<br/>          if book<br/>            option(value=author._id selected=(author._id.toString()==book.author ? &#x27;selected&#x27; : false) ) #{author.name}<br/>          else<br/>            option(value=author._id) #{author.name}<br/>    div.form-group<br/>      label(for=&#x27;summary&#x27;) Summary:<br/>      input#summary.form-control(type=&#x27;textarea&#x27;, placeholder=&#x27;Summary&#x27; name=&#x27;summary&#x27; value=(undefined===book ? &#x27;&#x27; : book.summary) required=&#x27;true&#x27;)<br/>    div.form-group<br/>      label(for=&#x27;isbn&#x27;) ISBN:<br/>      input#isbn.form-control(type=&#x27;text&#x27;, placeholder=&#x27;ISBN13&#x27; name=&#x27;isbn&#x27; value=(undefined===book ? &#x27;&#x27; : book.isbn) required=&#x27;true&#x27;)<br/>    div.form-group<br/>      label Genre:<br/>      div<br/>        for genre in genres<br/>          div(style=&#x27;display: inline; padding-right:10px;&#x27;)<br/>            input.checkbox-input(type=&#x27;checkbox&#x27;, name=&#x27;genre&#x27;, id=genre._id, value=genre._id, checked=genre.checked )<br/>            label(for=genre._id) #{genre.name}<br/>    button.btn.btn-primary(type=&#x27;submit&#x27;) Submit<br/><br/>  if errors<br/>    ul<br/>      for error in errors<br/>        li!= error.msg<br/></p><p id="1f7694d5-ea46-8039-9fd0-e447162d159a" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f7694d5-ea46-800e-9fd0-e56e79c6a0d6" class="image"><a href="image%2018.png"><img style="width:561.1875px" src="image%2018.png"/></a></figure><p id="1f7694d5-ea46-80b6-99d2-e68f1c660c5c" class=""><strong>004-åˆ›å»ºä¹¦æœ¬å®ä¾‹è¡¨å•ï¼š</strong></p><p id="1f7694d5-ea46-807d-b8d8-f1790f592d7d" class="">ã€å¯¼å…¥éªŒè¯å’Œæ¸…ç†ã€‘</p><p id="1f7694d5-ea46-8056-97e9-cd192108fa15" class="">const { body, validationResult } = require(&quot;express-validator/check&quot;);<br/>const { sanitizeBody } = require(&quot;express-validator/filter&quot;);<br/></p><p id="1f7694d5-ea46-802f-b9b9-cd91068eaa7b" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-8086-a057-cc0f0946bf18" class="">var Book = require(&quot;../models/book&quot;);</p><p id="1f7694d5-ea46-8096-be91-c3ab10bfacfc" class="">
</p><p id="1f7694d5-ea46-802f-96a4-c635f2d03deb" class="">// Display BookInstance create form on GET.<br/>exports.bookinstance_create_get = function (req, res, next) {<br/>Book.find({}, &quot;title&quot;).exec(function (err, books) {<br/>if (err) {<br/>return next(err);<br/>}<br/>// Successful, so render.<br/>res.render(&quot;bookinstance_form&quot;, {<br/>title: &quot;Create BookInstance&quot;,<br/>book_list: books,<br/>});<br/>});<br/>};<br/></p><p id="1f7694d5-ea46-8028-81a0-e9e9dba9ecc3" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-806a-b034-d69fef2d0a11" class="">// Handle BookInstance create on POST.<br/>exports.bookinstance_create_post = [<br/>// Validate fields.<br/>body(&quot;book&quot;, &quot;Book must be specified&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;imprint&quot;, &quot;Imprint must be specified&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;due_back&quot;, &quot;Invalid date&quot;).optional({ checkFalsy: true }).isISO8601(),<br/></p><p id="1f7694d5-ea46-80e8-a1ab-e1d8f0050449" class="">// Sanitize fields.<br/>sanitizeBody(&quot;book&quot;).trim().escape(),<br/>sanitizeBody(&quot;imprint&quot;).trim().escape(),<br/>sanitizeBody(&quot;status&quot;).trim().escape(),<br/>sanitizeBody(&quot;due_back&quot;).toDate(),<br/></p><p id="1f7694d5-ea46-8096-89c7-e77d3e969552" class="">// Process request after validation and sanitization.<br/>(req, res, next) =&gt; {<br/>// Extract the validation errors from a request.<br/>const errors = validationResult(req);<br/></p><p id="1f7694d5-ea46-80aa-b2e6-d0b8e689e2cb" class="">// Create a BookInstance object with escaped and trimmed data.<br/>var bookinstance = new BookInstance({<br/>  book: req.body.book,<br/>  imprint: req.body.imprint,<br/>  status: req.body.status,<br/>  due_back: req.body.due_back,<br/>});<br/><br/>if (!errors.isEmpty()) {<br/>  // There are errors. Render form again with sanitized values and error messages.<br/>  Book.find({}, &quot;title&quot;).exec(function (err, books) {<br/>    if (err) {<br/>      return next(err);<br/>    }<br/>    // Successful, so render.<br/>    res.render(&quot;bookinstance_form&quot;, {<br/>      title: &quot;Create BookInstance&quot;,<br/>      book_list: books,<br/>      selected_book: bookinstance.book._id,<br/>      errors: errors.array(),<br/>      bookinstance: bookinstance,<br/>    });<br/>  });<br/>  return;<br/>} else {<br/>  // Data from form is valid.<br/>  bookinstance.save(function (err) {<br/>    if (err) {<br/>      return next(err);<br/>    }<br/>    // Successful - redirect to new record.<br/>    res.redirect(bookinstance.url);<br/>  });<br/>}<br/><br/></p><p id="1f7694d5-ea46-8057-8537-c5720378f5e4" class="">},<br/>];<br/></p><p id="1f7694d5-ea46-8071-8a8d-e56cd53afc81" class="">ã€è§†å›¾ã€‘</p><p id="1f7694d5-ea46-8033-bcf8-e5a8375cc3b5" class="">extends layout<br/><br/>block content<br/>  h1=title<br/><br/>  form(method=&#x27;POST&#x27; action=&#x27;&#x27;)<br/>    div.form-group<br/>      label(for=&#x27;book&#x27;) Book:<br/>      select#book.form-control(type=&#x27;select&#x27; placeholder=&#x27;Select book&#x27; name=&#x27;book&#x27; required=&#x27;true&#x27;)<br/>        for book in book_list<br/>          if bookinstance<br/>            option(value=book._id selected=(bookinstance.book.toString()==book._id.toString() ? &#x27;selected&#x27; : false)) #{book.title}<br/>          else<br/>            option(value=book._id) #{book.title}<br/><br/>    div.form-group<br/>      label(for=&#x27;imprint&#x27;) Imprint:<br/>      input#imprint.form-control(type=&#x27;text&#x27; placeholder=&#x27;Publisher and date information&#x27; name=&#x27;imprint&#x27; required=&#x27;true&#x27; value=(undefined===bookinstance ? &#x27;&#x27; : bookinstance.imprint))<br/>    div.form-group<br/>      label(for=&#x27;due_back&#x27;) Date when book available:<br/>      input#due_back.form-control(type=&#x27;date&#x27; name=&#x27;due_back&#x27; value=(undefined===bookinstance ? &#x27;&#x27; : bookinstance.due_back))<br/><br/>    div.form-group<br/>      label(for=&#x27;status&#x27;) Status:<br/>      select#status.form-control(type=&#x27;select&#x27; placeholder=&#x27;Select status&#x27; name=&#x27;status&#x27; required=&#x27;true&#x27;)<br/>        option(value=&#x27;Maintenance&#x27;) Maintenance<br/>        option(value=&#x27;Available&#x27;) Available<br/>        option(value=&#x27;Loaned&#x27;) Loaned<br/>        option(value=&#x27;Reserved&#x27;) Reserved<br/><br/>    button.btn.btn-primary(type=&#x27;submit&#x27;) Submit<br/><br/>  if errors<br/>    ul<br/>      for error in errors<br/>        li!= error.msg<br/></p><p id="1f7694d5-ea46-8019-888b-f6d71cf97787" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f7694d5-ea46-80ce-bd66-e958bc828960" class="image"><a href="image%2019.png"><img style="width:561.1875px" src="image%2019.png"/></a></figure><p id="1f7694d5-ea46-8002-b7ec-cabacd658d5a" class="">
</p><p id="1f7694d5-ea46-80d9-8508-e1b4e02a142b" class=""><strong>005-åˆ é™¤ä½œè€…è¡¨å•</strong></p><p id="1f7694d5-ea46-8009-834a-c84fa9a9b958" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-807b-9243-dae8c437d60f" class="">// Display Author delete form on GET.<br/>exports.author_delete_get = function (req, res, next) {<br/>async.parallel(<br/>{<br/>author: function (callback) {<br/>Author.findById(<br/><a href="http://req.params.id/">req.params.id</a>).exec(callback);<br/>},<br/>authors_books: function (callback) {<br/>Book.find({ author: <br/><a href="http://req.params.id/">req.params.id</a> }).exec(callback);<br/>},<br/>},<br/>function (err, results) {<br/>if (err) {<br/>return next(err);<br/>}<br/>if (results.author == null) {<br/>// No results.<br/>res.redirect(&quot;/catalog/authors&quot;);<br/>}<br/>// Successful, so render.<br/>res.render(&quot;author_delete&quot;, {<br/>title: &quot;Delete Author&quot;,<br/>author: results.author,<br/>author_books: results.authors_books,<br/>});<br/>},<br/>);<br/>};<br/></p><ul id="1f7694d5-ea46-8014-a138-e5e76ba1f181" class="bulleted-list"><li style="list-style-type:disc">æ§åˆ¶å™¨ä» URL å‚æ•°ï¼ˆ<code>req.params.id</code>ï¼‰ä¸­ï¼Œè·å–è¦åˆ é™¤çš„Â <code>Author</code>Â å®ä¾‹çš„ idã€‚å®ƒä½¿ç”¨Â <code>async.parallel()</code>Â æ–¹æ³•ï¼Œå¹¶è¡Œè·å–ä½œè€…è®°å½•å’Œæ‰€æœ‰ç›¸å…³ä¹¦æœ¬ã€‚å½“ä¸¤ä¸ªæ“ä½œéƒ½å®Œæˆåï¼Œå®ƒå°†å‘ˆç°Â <strong>author_delete.pug</strong>Â è§†å›¾ï¼Œä¸ºÂ <code>title</code>ã€<code>author</code>Â å’ŒÂ <code>author_books</code>Â ä¼ é€’å˜é‡ã€‚</li></ul><p id="1f7694d5-ea46-80af-b7ae-de2cd828a8a5" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-80c5-b71f-f7ba903985db" class="">// Handle Author delete on POST.<br/>exports.author_delete_post = function (req, res, next) {<br/>async.parallel(<br/>{<br/>author: function (callback) {<br/>Author.findById(req.body.authorid).exec(callback);<br/>},<br/>authors_books: function (callback) {<br/>Book.find({ author: req.body.authorid }).exec(callback);<br/>},<br/>},<br/>function (err, results) {<br/>if (err) {<br/>return next(err);<br/>}<br/>// Success<br/>if (results.authors_books.length &gt; 0) {<br/>// Author has books. Render in same way as for GET route.<br/>res.render(&quot;author_delete&quot;, {<br/>title: &quot;Delete Author&quot;,<br/>author: results.author,<br/>author_books: results.authors_books,<br/>});<br/>return;<br/>} else {<br/>// Author has no books. Delete object and redirect to the list of authors.<br/>Author.findByIdAndRemove(req.body.authorid, function deleteAuthor(err) {<br/>if (err) {<br/>return next(err);<br/>}<br/>// Success - go to author list<br/>res.redirect(&quot;/catalog/authors&quot;);<br/>});<br/>}<br/>},<br/>);<br/>};<br/></p><ul id="1f7694d5-ea46-8006-a51e-ec2ede667206" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆï¼Œæˆ‘ä»¬éªŒè¯æ˜¯å¦å·²æä¾› idï¼ˆè¿™æ˜¯é€šè¿‡è¡¨å•ä¸»ä½“å‚æ•°å‘é€çš„ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ URL ä¸­çš„ç‰ˆæœ¬ï¼‰ã€‚ç„¶åæˆ‘ä»¬ä»¥ä¸Â <code>GET</code>Â è·¯ç”±ç›¸åŒçš„æ–¹å¼ï¼Œè·å¾—ä½œè€…åŠå…¶ç›¸å…³ä¹¦æœ¬ã€‚å¦‚æœæ²¡æœ‰ä¹¦æœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åˆ é™¤ä½œè€…å¯¹è±¡ï¼Œå¹¶é‡å®šå‘åˆ°æ‰€æœ‰ä½œè€…çš„åˆ—è¡¨ã€‚å¦‚æœè¿˜æœ‰ä¹¦æœ¬ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€é‡æ–°å‘ˆç°è¡¨æ ¼ï¼Œä¼ é€’ä½œè€…å’Œè¦åˆ é™¤çš„ä¹¦æœ¬åˆ—è¡¨ã€‚</li></ul><p id="1f7694d5-ea46-8031-a02c-e9408c7886f1" class="">ã€è§†å›¾ã€‘</p><ul id="1f7694d5-ea46-8048-a200-ce0d5f4640e0" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºviews/author_delete.pug<ul id="1f7694d5-ea46-80d4-ae92-e8ef60de4e8c" class="bulleted-list"><li style="list-style-type:circle"></li></ul><p id="1f7694d5-ea46-8038-9e78-e6e8cc6f8654" class="">extends layout<br/><br/>block content<br/>  h1 #{title}: #{author.name}<br/>  p= author.lifespan<br/><br/>  if author_books.length<br/><br/>    p #[strong Delete the following books before attempting to delete this author.]<br/><br/>    div(style=&#x27;margin-left:20px;margin-top:20px&#x27;)<br/><br/>      h4 Books<br/><br/>      dl<br/>      each book in author_books<br/>        dt<br/>          a(href=book.url) #{book.title}<br/>        dd #{book.summary}<br/><br/>  else<br/>    p Do you really want to delete this Author?<br/><br/>    form(method=&#x27;POST&#x27; action=&#x27;&#x27;)<br/>      div.form-group<br/>        input#authorid.form-control(type=&#x27;hidden&#x27;,name=&#x27;authorid&#x27;, required=&#x27;true&#x27;, value=author._id )<br/><br/>      button.btn.btn-primary(type=&#x27;submit&#x27;) Delete<br/></p></li></ul><p id="1f7694d5-ea46-804c-9727-fbbf4cb32057" class="">è§†å›¾æ‰©å±•äº†å¸ƒå±€æ¨¡æ¿ï¼Œè¦†ç›–äº†åä¸ºÂ <code>content</code>Â çš„åŒºå—ã€‚åœ¨é¡¶éƒ¨æ˜¾ç¤ºä½œè€…è¯¦ç»†ä¿¡æ¯ã€‚ç„¶åå®ƒåŒ…å«ä¸€ä¸ªï¼ŒåŸºäºÂ <code>author_books</code>ï¼ˆ<code>if</code>Â å’ŒÂ <code>else</code>Â å­å¥ï¼‰æ•°é‡çš„æ¡ä»¶è¯­å¥ã€‚</p><ul id="1f7694d5-ea46-80db-9217-f50ae888aa7e" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœå­˜åœ¨ä¸ä½œè€…ç›¸å…³è”çš„ä¹¦æœ¬ï¼Œåˆ™è¯¥é¡µé¢åˆ—å‡ºä¹¦æœ¬ï¼Œå¹¶è¯´æ˜åœ¨åˆ é™¤è¯¥ä½œè€…Â <code>Author</code>Â ä¹‹å‰ï¼Œå¿…é¡»åˆ é™¤è¿™äº›ä¹¦ç±ã€‚</li></ul><ul id="1f7694d5-ea46-8067-8c6d-c88068d2e1cb" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ²¡æœ‰ä¹¦æœ¬ï¼Œåˆ™é¡µé¢ä¼šæ˜¾ç¤ºç¡®è®¤æç¤ºã€‚å¦‚æœå•å‡»â€œåˆ é™¤â€æŒ‰é’®ï¼Œåˆ™ä¼šåœ¨Â <code>POST</code>Â è¯·æ±‚ä¸­ï¼Œå°†ä½œè€… ID å‘é€åˆ°æœåŠ¡å™¨ï¼Œå¹¶ä¸”å°†åˆ é™¤è¯¥ä½œè€…çš„è®°å½•ã€‚</li></ul><p id="1f7694d5-ea46-806e-a1af-df81bdb3e0fa" class=""><strong>006-æ›´æ–°ä¹¦æœ¬è¡¨å•ï¼š</strong></p><p id="1f7694d5-ea46-80ef-9d90-c3e19c571832" class="">ã€æ§åˆ¶å™¨-getè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-80b1-a105-f382e8661f43" class="">// Display book update form on GET.<br/>exports.book_update_get = function (req, res, next) {<br/>// Get book, authors and genres for form.<br/>async.parallel(<br/>{<br/>book: function (callback) {<br/>Book.findById(<br/><a href="http://req.params.id/">req.params.id</a>)<br/>.populate(&quot;author&quot;)<br/>.populate(&quot;genre&quot;)<br/>.exec(callback);<br/>},<br/>authors: function (callback) {<br/>Author.find(callback);<br/>},<br/>genres: function (callback) {<br/>Genre.find(callback);<br/>},<br/>},<br/>function (err, results) {<br/>if (err) {<br/>return next(err);<br/>}<br/>if (results.book == null) {<br/>// No results.<br/>var err = new Error(&quot;Book not found&quot;);<br/>err.status = 404;<br/>return next(err);<br/>}<br/>// Success.<br/>// Mark our selected genres as checked.<br/>for (<br/>var all_g_iter = 0;<br/>all_g_iter &lt; results.genres.length;<br/>all_g_iter++<br/>) {<br/>for (<br/>var book_g_iter = 0;<br/>book_g_iter &lt; results.book.genre.length;<br/>book_g_iter++<br/>) {<br/>if (<br/>results.genres[all_g_iter]._id.toString() ==<br/>results.book.genre[book_g_iter]._id.toString()<br/>) {<br/>results.genres[all_g_iter].checked = &quot;true&quot;;<br/>}<br/>}<br/>}<br/>res.render(&quot;book_form&quot;, {<br/>title: &quot;Update Book&quot;,<br/>authors: results.authors,<br/>genres: results.genres,<br/>book: results.book,<br/>});<br/>},<br/>);<br/>};<br/></p><p id="1f7694d5-ea46-80cf-a756-c3fe8624056e" class="">ã€æ§åˆ¶å™¨-postè·¯ç”±ã€‘</p><p id="1f7694d5-ea46-80fe-8b81-dcc44e50a23c" class="">// Handle book update on POST.<br/>exports.book_update_post = [<br/>// Convert the genre to an array<br/>(req, res, next) =&gt; {<br/>if (!(req.body.genre instanceof Array)) {<br/>if (typeof req.body.genre === &quot;undefined&quot;) req.body.genre = [];<br/>else req.body.genre = new Array(req.body.genre);<br/>}<br/>next();<br/>},<br/></p><p id="1f7694d5-ea46-80a3-a226-f917903e30ab" class="">// Validate fields.<br/>body(&quot;title&quot;, &quot;Title must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;author&quot;, &quot;Author must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;summary&quot;, &quot;Summary must not be empty.&quot;).isLength({ min: 1 }).trim(),<br/>body(&quot;isbn&quot;, &quot;ISBN must not be empty&quot;).isLength({ min: 1 }).trim(),<br/></p><p id="1f7694d5-ea46-807b-be7d-cafb9f374c91" class="">// Sanitize fields.<br/>sanitizeBody(&quot;title&quot;).trim().escape(),<br/>sanitizeBody(&quot;author&quot;).trim().escape(),<br/>sanitizeBody(&quot;summary&quot;).trim().escape(),<br/>sanitizeBody(&quot;isbn&quot;).trim().escape(),<br/>sanitizeBody(&quot;genre.*&quot;).trim().escape(),<br/></p><p id="1f7694d5-ea46-80fe-9555-de3808fe211e" class="">// Process request after validation and sanitization.<br/>(req, res, next) =&gt; {<br/>// Extract the validation errors from a request.<br/>const errors = validationResult(req);<br/></p><p id="1f7694d5-ea46-80e5-b0c8-dbaf922dfd12" class="">// Create a Book object with escaped/trimmed data and old id.<br/>var book = new Book({<br/>  title: req.body.title,<br/>  author: req.body.author,<br/>  summary: req.body.summary,<br/>  isbn: req.body.isbn,<br/>  genre: typeof req.body.genre === &quot;undefined&quot; ? [] : req.body.genre,<br/>  _id: req.params.id, //This is required, or a new ID will be assigned!<br/>});<br/><br/>if (!errors.isEmpty()) {<br/>  // There are errors. Render form again with sanitized values/error messages.<br/><br/>  // Get all authors and genres for form.<br/>  async.parallel(<br/>    {<br/>      authors: function (callback) {<br/>        Author.find(callback);<br/>      },<br/>      genres: function (callback) {<br/>        Genre.find(callback);<br/>      },<br/>    },<br/>    function (err, results) {<br/>      if (err) {<br/>        return next(err);<br/>      }<br/><br/>      // Mark our selected genres as checked.<br/>      for (let i = 0; i &lt; results.genres.length; i++) {<br/>        if (book.genre.indexOf(results.genres[i]._id) &gt; -1) {<br/>          results.genres[i].checked = &quot;true&quot;;<br/>        }<br/>      }<br/>      res.render(&quot;book_form&quot;, {<br/>        title: &quot;Update Book&quot;,<br/>        authors: results.authors,<br/>        genres: results.genres,<br/>        book: book,<br/>        errors: errors.array(),<br/>      });<br/>    },<br/>  );<br/>  return;<br/>} else {<br/>  // Data from form is valid. Update the record.<br/>  Book.findByIdAndUpdate(req.params.id, book, {}, function (err, thebook) {<br/>    if (err) {<br/>      return next(err);<br/>    }<br/>    // Successful - redirect to book detail page.<br/>    res.redirect(thebook.url);<br/>  });<br/>}<br/><br/></p><p id="1f7694d5-ea46-8003-b716-e27f88562d86" class="">},<br/>];<br/></p><p id="1f7694d5-ea46-802b-bf9b-de46cf530cff" class="">ã€è§†å›¾ã€‘</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f7694d5-ea46-8094-8ad2-c729ec19ac1b" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">iv.form-group
      label(for=&#x27;author&#x27;) Author:
      select#author.form-control(type=&#x27;select&#x27; placeholder=&#x27;Select author&#x27; name=&#x27;author&#x27; required=&#x27;true&#x27; )
        for author in authors
          if book
            //- Handle GET form, where book.author is an object, and POST form, where it is a string.
            option(
              value=author._id
              selected=(
                author._id.toString()==book.author._id
                || author._id.toString()==book.author
              ) ? &#x27;selected&#x27; : false
            ) #{author.name}
          else
            option(value=author._id) #{author.name}</code></pre><p id="1f7694d5-ea46-80a0-aed8-d0c618a3f898" class=""><strong>ç»“æœå±•ç¤ºå¦‚ä¸‹</strong></p><figure id="1f7694d5-ea46-80f8-a563-d82211e9f5e0" class="image"><a href="image%2020.png"><img style="width:561.2000122070312px" src="image%2020.png"/></a></figure><p id="1f8694d5-ea46-80fa-ace6-e25ef95a3447" class="">
</p><p id="1f8694d5-ea46-80dd-8e8d-d9bcf725d567" class=""><strong><span style="border-bottom:0.05em solid">ã€ç¬¬å…­æ­¥-éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‘</span></strong></p><p id="1f8694d5-ea46-80ef-bac4-c7095fc4edeb" class="">ç°åœ¨ä»¥åŠåˆ›å»ºä¸€ä¸ªæœ¬åœ°å›¾ä¹¦é¦†ç½‘ç«™ï¼Œå¯ä»¥å°†å…¶å‘å¸ƒåˆ°å…¬å…±ç½‘ç»œæœåŠ¡å™¨ï¼Œç½‘ç»œä¸Šå…¶ä»–æˆå‘˜å¯ä»¥è®¿é—®ã€‚</p><p id="1f8694d5-ea46-80ab-833d-c56e705f5a90" class="">è¯¥æ­¥éª¤æ€»ç»“äº†å¦‚ä½•ä½¿ç”¨ä¸€å°ä¸»æœºéƒ¨ç½²ç½‘ç«™</p><p id="1f8694d5-ea46-80a5-995f-f872117e07b8" class="">
</p><p id="1f8694d5-ea46-8067-bfbe-c0a654fbf898" class=""><strong>æ¦‚è§ˆï¼š</strong></p><ul id="1f8694d5-ea46-809d-91bc-e6232afcdd87" class="bulleted-list"><li style="list-style-type:disc">ç«™ç‚¹å®Œæˆä¹‹åï¼Œå¯ä»¥å°†å…¶æ‰˜ç®¡åœ¨æ¯”ä¸ªäººå¼€å‘è®¡ç®—æœºæ›´å…¬å¼€å¯è®¿é—®çš„åœ°æ–¹</li></ul><ul id="1f8694d5-ea46-800b-ada6-f3765bba4db4" class="bulleted-list"><li style="list-style-type:disc">ç›®å‰ä¸ºæ­¢ï¼Œä¸€ç›´åœ¨å¼€å‘ç¯å¢ƒä¸­å·¥ä½œï¼Œä½¿ç”¨Express/Nodeä½œä¸ºwebæœåŠ¡å™¨ï¼Œå°†ç½‘ç«™å…±äº«åˆ°æœ¬åœ°æµè§ˆå™¨ä¸­ï¼Œä½¿ç”¨ä¸å®‰å…¨çš„å¼€å‘è®¾ç½®è¿è¡Œç½‘ç«™ï¼Œæ¥æ˜¾ç¤ºè°ƒè¯•å’Œå…¶ä»–ç§äººä¿¡æ¯ã€‚åœ¨å¤–éƒ¨æ‰˜ç®¡ç½‘ç«™ä¹‹å‰ï¼Œå¿…é¡»è¦<ul id="1f8694d5-ea46-8003-9f94-d74882c55f99" class="bulleted-list"><li style="list-style-type:circle">é€‰æ‹©æ‰˜ç®¡Expressåº”ç”¨ç¨‹åºçš„ç¯èŠ‚</li></ul><ul id="1f8694d5-ea46-8040-83e6-e52348d5fcb4" class="bulleted-list"><li style="list-style-type:circle">å¯¹é¡¹ç›®è®¾ç½®è¿›è¡Œæ›´æ”¹</li></ul><ul id="1f8694d5-ea46-808b-aa5e-ea3193d0cb23" class="bulleted-list"><li style="list-style-type:circle">è®¾ç½®ç”Ÿäº§çº§åˆ«çš„åŸºç¡€æ¶æ„ï¼Œæ¥æœåŠ¡ç½‘ç«™</li></ul></li></ul><ul id="1f8694d5-ea46-8000-b189-f82024881c1a" class="bulleted-list"><li style="list-style-type:disc">æœ¬æ­¥éª¤ä»‹ç»æœ‰å…³æ‰˜ç®¡ç«™ç‚¹é€‰é¡¹çš„æŒ‡å¯¼ï¼Œç®€è¦æ¦‚è¿°äº†æœªExpressåº”ç”¨ç¨‹åºå‡†å¤‡å¥½ç”Ÿäº§æ‰€éœ€æ‰§è¡Œçš„æ“ä½œï¼Œä»¥åŠå°†å›¾ä¹¦é¦†ç½‘ç«™å®‰è£…åˆ°Herokuäº‘æ‰˜ç®¡å•†çš„å·¥ä½œå®ä¾‹</li></ul><ul id="1f8694d5-ea46-804f-b7d5-e8ee1a464aee" class="bulleted-list"><li style="list-style-type:disc">è¿™é‡Œä½¿ç”¨Herokuï¼Œä¸å¿…é¡»ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–æ‰˜ç®¡æœåŠ¡ã€‚</li></ul><p id="1f8694d5-ea46-802b-a171-c1efc0f16e42" class="">
</p><p id="1f8694d5-ea46-80eb-b698-f5c83adb85cf" class=""><strong>ä»€ä¹ˆç”Ÿäº§ç¯å¢ƒï¼š</strong></p><ul id="1f8694d5-ea46-80bf-bc9d-d7bda7105904" class="bulleted-list"><li style="list-style-type:disc">ç”Ÿäº§ç¯å¢ƒæ˜¯æœåŠ¡å™¨è®¡ç®—æœºæä¾›çš„ç¯å¢ƒï¼Œå¯ä»¥åœ¨å…¶ä¸­è¿è¡Œç½‘ç«™ï¼Œä¾›å¤–éƒ¨ä½¿ç”¨ã€‚ç¯å¢ƒåŒ…æ‹¬<ul id="1f8694d5-ea46-80eb-9db7-f3d806a77907" class="bulleted-list"><li style="list-style-type:circle">ç½‘ç«™è¿è¡Œçš„è®¡ç®—æœºç¡¬ä»¶</li></ul><ul id="1f8694d5-ea46-8076-973b-db8833a96278" class="bulleted-list"><li style="list-style-type:circle">æ“ä½œç³»ç»Ÿï¼Œwindows</li></ul><ul id="1f8694d5-ea46-808a-9dfd-cfd3e916d1c0" class="bulleted-list"><li style="list-style-type:circle">ç¼–ç¨‹è¯­è¨€è¿è¡Œåº“å’Œæ¡†æ¶åº“ï¼Œåœ¨ä¸Šé¢ç¼–å†™ç½‘ç«™</li></ul><ul id="1f8694d5-ea46-8081-acf1-e4150348e4cb" class="bulleted-list"><li style="list-style-type:circle">WebæœåŠ¡å™¨åŸºç¡€ç»“æ„ï¼Œå¯èƒ½åŒ…å«WebæœåŠ¡å™¨ï¼Œåå‘ä»£ç†ï¼Œè´Ÿè½½å¹³è¡¡å™¨ç­‰</li></ul><ul id="1f8694d5-ea46-8034-b3a3-e86c25a13321" class="bulleted-list"><li style="list-style-type:circle">ç½‘ç«™æ‰€ä¾èµ–çš„æ•°æ®åº“</li></ul></li></ul><ul id="1f8694d5-ea46-80dc-9400-fd2eb7e11c5f" class="bulleted-list"><li style="list-style-type:disc">æœåŠ¡è®¡ç®—æœºï¼Œå¯ä»¥ä½äºåœºæ‰€ï¼Œä½¿ç”¨æ¬¾è‹é“¾æ¥ï¼Œè¿æ¥åˆ°internetï¼Œä½¿ç”¨æ‰˜ç®¡åœ¨äº‘æœåŠ¡å™¨ä¸Šçš„è®¡ç®—æœºæ›´ä¸ºå¸¸è§ã€‚è¿™æ„å‘³ç€ï¼Œä»£ç è¿è¡Œåœ¨æ‰˜ç®¡å…¬å¸çš„æ•°æ®ä¸­å¿ƒçš„æŸå°è¿œç¨‹è®¡ç®—æœºæˆ–è™šæ‹Ÿè®¡ç®—æœºä¸Šã€‚è¿œç¨‹æœåŠ¡å™¨ä¼šä»¥ç‰¹å®šä»·æ ¼æä¾›äº’è”ç½‘è¿æ¥ï¼Œå’Œä¸€äº›ä¿è¯çº§åˆ«çš„è®¡ç®—èµ„æºï¼Œä¾‹å¦‚CPU RAM å­˜å‚¨å™¨ç­‰</li></ul><ul id="1f8694d5-ea46-80c1-900b-c91dfbdbf458" class="bulleted-list"><li style="list-style-type:disc">è¿™ç§å¯ä»¥è¿œç¨‹è®¿é—®çš„è®¡ç®—/ç½‘ç»œç¡¬ä»¶ï¼Œè¢«ç§°ä¸ºåŸºç¡€æ¶æ„å³æœåŠ¡laaSã€‚è®¸å¤šlaaSä¾›åº”å•†æä¾›é¡¹ç›®å®‰è£…ç‰¹å®šæ“ä½œç³»ç»Ÿçš„é€‰é¡¹ï¼Œåœ¨å¿…é¡»ä¸Šé¢å®‰è£…ç”Ÿäº§ç¯å¢ƒçš„å…¶ä»–ç»„ä»¶ï¼Œå…¶ä»–ä¾›åº”å•†å…è®¸é€‰æ‹©åŠŸèƒ½æ›´å…¨é¢çš„ç¯å¢ƒï¼ŒåŒ…æ‹¬å®Œæ•´çš„nodeè®¾ç½®ã€‚</li></ul><ul id="1f8694d5-ea46-8042-bfcb-df6fd90d427d" class="bulleted-list"><li style="list-style-type:disc">å…¶ä»–æ‰˜ç®¡æœåŠ¡å™¨æä¾›å•†ï¼Œæ”¯æŒExpressä½œä¸ºå¹³å°å³æœåŠ¡PaaSäº§å“çš„ä¸€éƒ¨åˆ†ï¼Œä½¿ç”¨æ­¤ç±»æ‰˜ç®¡æ—¶ï¼Œä¸å¿…æ‹…å¿ƒå¤§å¤šæ•°ç”Ÿäº§ç¯å¢ƒã€‚å› ä¸ºä¸»æœºå¹³å°ä¼šçŸ—ç«‹ç€æ–°é—®é¢˜ï¼Œè¿™ä½¿å¾—éƒ¨ç½²éå¸¸ç®€å•ï¼Œå› ä¸ºåªéœ€è¦ä¸“æ³¨äºWebåº”ç”¨ç¨‹åºï¼Œè€Œä¸æ˜¯ä»»ä½•å…¶ä»–æœåŠ¡å™¨åŸºç¡€ç»“æ„</li></ul><ul id="1f8694d5-ea46-8094-844e-eb11e3fe0925" class="bulleted-list"><li style="list-style-type:disc">ä¸€äº›å¼€å‘äººå‘˜é€‰æ‹©laaSï¼Œç›¸å¯¹äºPaaSï¼ŒlaaSæä¾›æ›´çµæ´»ï¼Œè€Œå…¶ä»–å¼€å‘äººå‘˜åå¥½PaaSé™ä½ç»´æŠ¤å¼€é”€å’Œæ›´è½»æ¾åœ°æ‰©å±•æ€§ã€‚ä¸€å¼€å§‹ä½¿ç”¨æ—¶ï¼Œåœ¨PaaSç³»ç»Ÿä¸Šè®¾ç½®ç½‘ç«™ï¼Œè¦æ›´å®¹æ˜“</li></ul><p id="1f8694d5-ea46-801e-97cd-f288ea80cae0" class="">
</p><p id="1f8694d5-ea46-8012-a6c4-ffba4cbf0d22" class=""><strong>é€‰æ‹©ä¸»æœºä¾›åº”å•†ï¼š</strong></p><ul id="1f8694d5-ea46-80af-8dd9-d0de9cbdfaac" class="bulleted-list"><li style="list-style-type:disc">ä¼—å¤šæ‰˜ç®¡æœåŠ¡æä¾›å•†ï¼Œéƒ½ç§¯ææ”¯æŒä¸Nodeåˆä½œï¼Œæä¾›ä¸åŒç±»å‹çš„ç¯å¢ƒLaaS\PaaSï¼Œä¸åŒçš„ä»·æ ¼ä¸åŒç•Œåˆ«çš„è®¡ç®—å’Œç½‘ç»œèµ„æº</li></ul><ul id="1f8694d5-ea46-804b-8d2c-db48b23ad6b1" class="bulleted-list"><li style="list-style-type:disc">é€‰æ‹©ä¸»æœºæ—¶è€ƒè™‘çš„äº‹é¡¹<ul id="1f8694d5-ea46-808b-a88d-f73736c88287" class="bulleted-list"><li style="list-style-type:circle">ç½‘ç«™å¯èƒ½æœ‰å¤šå¿™ï¼Œä»¥åŠæ»¡è¶³è¯¥éœ€æ±‚æ‰€éœ€çš„æ•°æ®ï¼Œå’Œè®¡ç®—èµ„æºçš„æˆæœ¬</li></ul><ul id="1f8694d5-ea46-8029-bd7d-c876ae352ec1" class="bulleted-list"><li style="list-style-type:circle">æ°´å¹³æ‰©å±•ï¼ˆæ·»åŠ æ›´å¤šæœºå™¨ï¼‰ï¼Œå‚ç›´æ‰©å±•ï¼ˆå‡çº§æ›´å¼ºå¤§æœºå™¨ï¼‰çš„æ”¯æŒçº§åˆ«ï¼Œä»¥åŠè¿™æ ·åšçš„æˆæœ¬</li></ul><ul id="1f8694d5-ea46-80cb-be11-ef80e74d7dcf" class="bulleted-list"><li style="list-style-type:circle">ä¾›åº”å•†æœ‰æ•°æ®ä¸­å¿ƒçš„åœ°æ–¹ï¼Œè®¿é—®æ›´å¿«</li></ul><ul id="1f8694d5-ea46-80da-b96b-e46641d36afb" class="bulleted-list"><li style="list-style-type:circle">æ³¨æ„æ­£å¸¸è¿è¡Œæ—¶é—´å’Œåœæœºæ—¶é—´çš„å†å²è¡¨ç°</li></ul><ul id="1f8694d5-ea46-8054-8b31-f9116f1b9eb2" class="bulleted-list"><li style="list-style-type:circle">ç”¨äºç®¡ç†ç«™ç‚¹çš„å·¥å…·-æ˜“äºä½¿ç”¨ä¸”å®‰å…¨ï¼Œä¾‹å¦‚SFTPå’ŒFTP</li></ul><ul id="1f8694d5-ea46-8089-86f0-fec7fdd35bf6" class="bulleted-list"><li style="list-style-type:circle">ç”¨äºç›‘æ§æœåŠ¡å™¨çš„å†…ç½®æ¡†æ¶</li></ul><ul id="1f8694d5-ea46-8064-bcf5-e68a142cfc87" class="bulleted-list"><li style="list-style-type:circle">å·²çŸ¥é™åˆ¶ã€‚æœ‰äº›ä¸»æœºä¼šæ•…æ„é˜»æ­¢æŸäº›æœåŠ¡ï¼Œä¾‹å¦‚ç”µå­é‚®ä»¶ã€‚å…¶ä»–åœ¨æŸäº›ä»·æ ¼å±‚ä¸­ï¼Œä»…æä¾›ä¸€å®šå°æ—¶çš„äº‹ä»¶ï¼Œæˆ–ä»…æä¾›å°‘é‡å­˜å‚¨ç©ºé—´</li></ul><ul id="1f8694d5-ea46-80da-b311-fec9e31924a0" class="bulleted-list"><li style="list-style-type:circle">é¢å¤–çš„å¥½å¤„ï¼Œä¸€äº›æä¾›å•†ä¼šæä¾›å…è´¹åŸŸåå’ŒSSLè¯ä¹¦æ”¯æŒï¼Œå¦åˆ™å°†ä¸å¾—ä¸ä¸ºæ­¤å¦å¤–æ”¯ä»˜è´¹ç”¨</li></ul><ul id="1f8694d5-ea46-80a4-98e9-fe3940586a44" class="bulleted-list"><li style="list-style-type:circle">æ‰€ä¾èµ–çš„å…è´¹ç­‰çº§ï¼Œæ˜¯å¦ä¼šéšæ—¶é—´æ¨ç§»è€Œè¿‡æœŸï¼Œä»¥åŠè¿ç§»åˆ°æ›´æ˜‚è´µçš„æˆæœ¬ï¼Œæ˜¯å¦æ„å‘³ç€æœ€å¥½åœ¨ä¸€å¼€å§‹å°±ä½¿ç”¨å…¶ä»–æœåŠ¡</li></ul></li></ul><ul id="1f8694d5-ea46-80cf-b0b4-f24befc68b49" class="bulleted-list"><li style="list-style-type:disc">å½“ä½ åˆšå¼€å§‹æ—¶ï¼Œå¥½æ¶ˆæ¯æ˜¯æœ‰å¾ˆå¤šç½‘ç«™æä¾›â€œå…è´¹â€çš„è®¡ç®—ç¯å¢ƒï¼Œå°½ç®¡æœ‰ä¸€äº›æ¡ä»¶ã€‚ä¾‹å¦‚ï¼ŒÂ <a href="https://www.heroku.com/">Heroku</a>Â â€œæ°¸è¿œâ€æä¾›å…è´¹ä½†èµ„æºæœ‰é™çš„ PaaS ç¯å¢ƒï¼Œè€ŒÂ <a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/billing-free-tier.html">Amazon Web Services</a>,Â <a href="https://azure.microsoft.com/en-us/pricing/details/app-service/">Microsoft Azure</a>Â å’Œå¼€æºé€‰é¡¹Â PWS/Cloud FoundryÂ åœ¨ä½ ç¬¬ä¸€æ¬¡åŠ å…¥æ—¶ï¼Œæä¾›å…è´¹ä¿¡ç”¨é¢åº¦ã€‚<p id="1f8694d5-ea46-80cb-8df2-ca409ef07360" class="">è®¸å¤šæä¾›å•†è¿˜æ‹¥æœ‰â€œåŸºæœ¬â€å±‚ï¼Œå¯æä¾›æ›´å¤šæœ‰ç”¨çš„è®¡ç®—èƒ½åŠ›ï¼Œå’Œæ›´å°‘çš„é™åˆ¶ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒÂ <a href="https://www.digitalocean.com/">Digital Ocean</a>Â æ˜¯ä¸€ä¸ªæµè¡Œçš„æ‰˜ç®¡æœåŠ¡æä¾›å•†ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªç›¸å¯¹ä¾¿å®œçš„åŸºæœ¬è®¡ç®—å±‚ï¼ˆåœ¨æœ¬æ•™ç¨‹å†™ä½œæ—¶ï¼Œæ˜¯æ¯æœˆ 5 ç¾å…ƒçš„è¾ƒä½èŒƒå›´ï¼‰ã€‚</p></li></ul><ul id="1f8694d5-ea46-8087-a677-ff64eb190eb5" class="bulleted-list"><li style="list-style-type:disc">æ³¨æ„ï¼Œä»·æ ¼ä¸æ˜¯å”¯ä¸€é€‰æ‹©æ ‡å‡†ï¼Œç½‘ç«™æˆåŠŸï¼Œå¯èƒ½ä¼šå‘ç°å¯æ‰©å±•æ€§æ˜¯æœ€é‡è¦çš„è€ƒè™‘å› ç´ </li></ul><p id="1f8694d5-ea46-8089-a34e-d56a8d0b3681" class="">
</p><p id="1f8694d5-ea46-802b-b758-df63d19443ef" class=""><strong>å‡†å¤‡å¥½å‘å¸ƒçš„ç½‘ç«™ï¼š</strong></p><ul id="1f8694d5-ea46-80b7-974a-e3c1f9b1b43d" class="bulleted-list"><li style="list-style-type:disc">å‘å¸ƒç½‘ç«™æ—¶ï¼Œè¦è€ƒè™‘çš„ä¸»è¦é—®é¢˜æ—¶ç½‘ç»œå®‰å…¨æ€§å’Œæ€§èƒ½ï¼Œè‡³å°‘ï¼Œéœ€è¦åˆ é™¤å¼€å‘æœŸé—´ï¼Œé”™è¯¯é¡µé¢ä¸ŠåŒ…å«çš„å †æ ˆè·Ÿè¸ªï¼Œæ•´ç†æ—¥å¿—è®°å½•ï¼Œè®¾ç½®é€‚å½“çš„æ ‡å¤´ï¼Œé¿å…è®¸å¤šå¸¸è§çš„å®‰å…¨å¨èƒ</li></ul><ul id="1f8694d5-ea46-8011-a035-d2709b4af03d" class="bulleted-list"><li style="list-style-type:disc">ä»¥ä¸‹æ˜¯å¯¹åº”ç”¨è¿›è¡Œæœ€é‡è¦çš„ä¿®æ”¹<ul id="1f8694d5-ea46-80d2-9c1a-d60c33f7e9ec" class="bulleted-list"><li style="list-style-type:circle">è®¾ç½®NODE_DEVä¸ºproduction</li></ul><ul id="1f8694d5-ea46-80eb-8b6b-da9e70f96e53" class="bulleted-list"><li style="list-style-type:circle">Log appropriately</li></ul><ul id="1f8694d5-ea46-8015-b31d-cfc829041dfe" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨gzip/deflateå‹ç¼©å“åº”æ–‡ä»¶</li></ul><ul id="1f8694d5-ea46-8086-a0eb-d5792d1d8c3c" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨Helmeté¿å…è¢«å¸¸è§æ¼æ´ä¾µè¢­</li></ul></li></ul><p id="1f8694d5-ea46-8003-8177-fd2877e5a23c" class="">
</p><p id="1f8694d5-ea46-806d-b4ea-f92b7bb6c99f" class="">ã€è®¾ç½®NODE_dEVä¸ºproductionã€‘</p><ul id="1f8694d5-ea46-80de-9d07-e8e813b5768b" class="bulleted-list"><li style="list-style-type:disc">å°†NODE_ENVç¯å¢ƒå˜é‡è®¾ç½®ä¸ºproductionï¼Œæ¥åˆ é™¤é”™è¯¯é¡µé¢ä¸­çš„å †æ ˆè·Ÿè¸ªï¼ˆé»˜è®¤è®¾ç½®ä¸ºdevelopmentï¼‰ï¼Œå¤„ç†ç”Ÿæˆè¾ƒä¸ºä¸è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜è¦å°†å˜é‡è®¾ç½®ä¸ºç”Ÿäº§ç¼“å­˜è§†å›¾æ¨¡æ¿ï¼Œå’Œä»CSSæ‰©å±•ç”Ÿæˆçš„CSSæ–‡ä»¶ã€‚</li></ul><ul id="1f8694d5-ea46-80f8-bcb2-fae4477f7101" class="bulleted-list"><li style="list-style-type:disc">æµ‹è¯•è¡¨æ˜å°†NODE_DEVè®¾ç½®ä¸ºç”Ÿäº§productionï¼Œå¯ä»¥å°†åº”ç”¨æ€§èƒ½æé«˜ä¸‰å€ã€‚</li></ul><ul id="1f8694d5-ea46-8077-a111-cbf259b4009e" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨å¯¼å‡ºæˆ–ç¯å¢ƒæ–‡ä»¶ï¼Œæˆ–ä½¿ç”¨OSåˆå§‹åŒ–ç³»ç»Ÿï¼Œä»¥è¿›è¡Œä¿®æ”¹<figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="1f8694d5-ea46-80e7-a63c-eea316af0b87"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%"><p id="1f8694d5-ea46-8072-a348-fc516839814d" class="">è¿™é‡Œå®é™…æ˜¯åœ¨ç¯å¢ƒè®¾ç½®ï¼Œè€Œä¸æ˜¯åº”ç”¨ä¸­çš„æ›´æ”¹ï¼Œä½†é‡è¦çš„æ˜¯ï¼Œè¦æ³¨æ„ä¸‹é¢å¦‚ä½•ä¸ºæ‰˜ç®¡è®¾ç½®</p></div></figure></li></ul><p id="1f8694d5-ea46-801f-ade8-d73cabfb599d" class="">
</p><p id="1f8694d5-ea46-8027-a44f-c0743846e161" class="">ã€Log appropriatelyã€‘</p><ul id="1f8694d5-ea46-806d-81e7-ca0580544c77" class="bulleted-list"><li style="list-style-type:disc">è®°å½•å‘¼å«ä¼šå¯¹é«˜æµé‡ç½‘ç«™äº§ç”Ÿå½±å“ï¼Œåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¯èƒ½éœ€è¦è®°å½•ç½‘ç«™æ´»åŠ¨ï¼ˆä¾‹å¦‚è·Ÿè¸ªæµé‡ï¼Œæˆ–è®°å½•APIè°ƒç”¨ã€‚ï¼‰ï¼Œåº”è¯¥å°è¯•æœ€å°åŒ–ä¸ºè°ƒè¯•ç›®çš„è€Œæ·»åŠ çš„æ—¥å¿—è®°å½•é‡</li></ul><ul id="1f8694d5-ea46-80ca-94c1-e6328c7953be" class="bulleted-list"><li style="list-style-type:disc">åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œæœ€å°åŒ–è°ƒè¯•æ—¥å¿—è®°å½•æ˜¯ä¸€ç§æ–¹æ³•ï¼Œä½¿ç”¨ç±»ä¼¼è°ƒè¯•debugçš„æ¨¡å—ï¼Œå…è®¸é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡ï¼Œæ¥æ§åˆ¶æ‰§è¡Œçš„æ—¥å¿—è®°å½•ã€‚<ul id="1f8694d5-ea46-80ea-88e4-d0ef0137ef7c" class="bulleted-list"><li style="list-style-type:circle">ä¾‹å¦‚ï¼Œä¸‹é¢çš„ä»£ç ç‰‡æ®µï¼Œæ˜¾ç¤ºäº†å¦‚ä½•è®¾ç½®authoræ—¥å¿—è®°å½•ï¼Œè°ƒè¯•å˜é‡ä½¿ç”¨åç§°authorå£°æ˜ï¼Œè‡ªåŠ¨æ˜¾ç¤ºåæ¥è‡ªæ­¤å¯¹è±¡çš„æ‰€æœ‰æ—¥å¿—å‰ç¼€author<ul id="1f8694d5-ea46-80d9-a1fa-d5ce42088a94" class="bulleted-list"><li style="list-style-type:square"></li></ul><p id="1f8694d5-ea46-809e-9986-d8fa31391a40" class="">var debug = require(&quot;debug&quot;)(&quot;author&quot;);</p><p id="1f8694d5-ea46-808d-91ab-f9ae9cbd4d49" class="">// Display Author update form on GET<br/>exports.author_update_get = function (req, res, next) {<br/>req.sanitize(&quot;id&quot;).escape().trim();<br/>Author.findById(<br/><a href="http://req.params.id/">req.params.id</a>, function (err, author) {<br/>if (err) {<br/>debug(&quot;update error:&quot; + err);<br/>return next(err);<br/>}<br/>//On success<br/>res.render(&quot;author_form&quot;, { title: &quot;Update Author&quot;, author: author });<br/>});<br/>};<br/></p></li></ul><ul id="1f8694d5-ea46-807b-9f20-c16b2bcfc628" class="bulleted-list"><li style="list-style-type:circle">å¯ä»¥é€šè¿‡åœ¨DEBUGç¯å¢ƒå˜é‡ä¸­ï¼Œå°†ä»–ä»¬æŒ‡å®šä¸ºé€—å·åˆ†éš”åˆ—è¡¨ï¼Œæ¥å¯ç”¨ç‰¹å®šæ—¥å¿—é›†ï¼Œå¯ä»¥è®¾ç½®æ˜¾ç¤ºä½œè€…å’Œä¹¦ç±æ—¥å¿—çš„å˜é‡ï¼Œå¦‚å›¾æ‰€ç¤ºï¼Œä¹Ÿæ”¯æŒé€šé…ç¬¦<ul id="1f8694d5-ea46-8011-acea-ec879fd0fb59" class="bulleted-list"><li style="list-style-type:square"></li></ul><p id="1f8694d5-ea46-805a-bae9-ffe46f0940bd" class="">#Windows<br/>set DEBUG=author,book<br/></p><p id="1f8694d5-ea46-80d1-89ff-d0b921b6c89c" class="">#Linux<br/>export DEBUG=&quot;author,book&quot;<br/></p></li></ul></li></ul><ul id="1f8694d5-ea46-8041-a3d3-c8a303ecd531" class="bulleted-list"><li style="list-style-type:disc">è°ƒç”¨<code>debug</code>å¯ä»¥æ›¿æ¢ä½ ä»¥å‰ä½¿ç”¨<code>console.log()</code>æˆ–<code>console.error()</code>æ‰§è¡Œçš„æ—¥å¿—è®°å½•ã€‚é€šè¿‡è°ƒè¯•æ¨¡å—<a href="https://www.npmjs.com/package/debug">debug</a>è¿›è¡Œæ—¥å¿—è®°å½•ï¼Œæ›¿æ¢ä»£ç ä¸­çš„æ‰€æœ‰<code>console.log()</code>è°ƒç”¨ã€‚é€šè¿‡è®¾ç½® DEBUG å˜é‡ï¼Œå¹¶åœ¨å…¶ä¸­è®°å½•å¯¹æ—¥å¿—è®°å½•çš„å½±å“ï¼Œåœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œæ‰“å¼€å’Œå…³é—­æ—¥å¿—è®°å½•ã€‚</li></ul><p id="1f8694d5-ea46-80f4-8011-c37c4d70e5cc" class="">
</p><p id="1f8694d5-ea46-80ec-81af-c11f75aedcad" class="">ã€ä½¿ç”¨gzip/deflateå‹ç¼©å“åº”æ–‡ä»¶ã€‘</p><ul id="1f8694d5-ea46-80f5-b013-fa06556954ad" class="bulleted-list"><li style="list-style-type:disc">WebæœåŠ¡å™¨ï¼Œé€šå¸¸å¯ä»¥å‹ç¼©å‘é€ç»™å›å®¢æˆ·ç«¯çš„HTTPå“åº”ï¼Œä»è€Œå‡å°‘å®¢æˆ·ç«¯è·å–å’ŒåŠ è½½é¡µé¢æ‰€éœ€è¦çš„æ—¶é—´ï¼Œä½¿ç”¨çš„å‹ç¼©æ–¹æ³•ï¼Œå–å†³äºå®¢æˆ·ç«¯åœ¨è¯·æ±‚ä¸­æ”¯æŒçš„è§£å‹ç¼©æ–¹æ³•ã€‚å¦‚æœä¸æ”¯æŒå‹ç¼©æ–¹æ³•ï¼Œå“åº”å°†ä»¥æœªå‹ç¼©çš„æ–¹å¼å‘é€<ul id="1f8694d5-ea46-8090-b381-ef13334b04a3" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨å‹ç¼©ä¸­é—´ä»¶compressionï¼Œå°†å…¶æ·»åŠ åˆ°ç«™ç‚¹ï¼Œåœ¨æ ¹ç›®å½•å‘½ä»¤è¡Œå®‰è£…<ul id="1f8694d5-ea46-8023-bbed-d2ca9705677f" class="bulleted-list"><li style="list-style-type:square">npm install compression</li></ul></li></ul><ul id="1f8694d5-ea46-8069-a82a-dfa47abc9201" class="bulleted-list"><li style="list-style-type:circle">æ‰“å¼€./app.jsï¼Œå¯¼å…¥å‹ç¼©è£¤ï¼Œä½¿ç”¨useæ–¹æ³•ï¼Œå°†å‹ç¼©åº“æ·»åŠ åˆ°ä¸­é—´ä»¶é“¾<ul id="1f8694d5-ea46-807a-9b98-ee7cd5764cd4" class="bulleted-list"><li style="list-style-type:square">è¿™ä¸ªä¼šå‡ºç°åœ¨æƒ³è¦å‹ç¼©çš„ä»»ä½•è·¯ç”±ä¹‹å‰ã€‚</li></ul><p id="1f8694d5-ea46-801a-99bd-c51b7e4e3170" class="">var catalogRouter = require(&#x27;./routes/catalog&#x27;); //Import routes for &quot;catalog&quot; area of site<br/>var compression = require(&#x27;compression&#x27;);<br/></p><p id="1f8694d5-ea46-807c-8ea9-d8a0bdb3cb3e" class="">// Create the Express application object<br/>var app = express();<br/></p><p id="1f8694d5-ea46-80eb-8209-de813c5c5763" class="">...</p><p id="1f8694d5-ea46-8081-ae09-d5b328fd846c" class="">app.use(compression()); //Compress all routes</p><p id="1f8694d5-ea46-8078-a76a-ed31b308f2a7" class="">app.use(express.static(path.join(__dirname, &#x27;public&#x27;)));</p><p id="1f8694d5-ea46-801d-98a3-e68ab848fae9" class="">app.use(&#x27;/&#x27;, indexRouter);<br/>app.use(&#x27;/users&#x27;, usersRouter);<br/>app.use(&#x27;/catalog&#x27;, catalogRouter);  // Add catalog routes to middleware chain.<br/></p><p id="1f8694d5-ea46-8037-bf27-fd90e61a59a5" class="">...</p></li></ul></li></ul><ul id="1f8694d5-ea46-80ab-a3bd-ec5471da2647" class="bulleted-list"><li style="list-style-type:disc">å¯¹äºç”Ÿäº§ä¸­æµé‡è¾ƒå¤§çš„ç½‘ç«™ï¼Œä¸ä¼šä½¿ç”¨æ­¤ä¸­é—´ä»¶ï¼Œä¼šä½¿ç”¨Nginxç±»ä¼¼çš„åå‘ä»£ç†</li></ul><p id="1f8694d5-ea46-8090-a963-d66e9373b082" class="">
</p><p id="1f8694d5-ea46-806e-9e31-d938eb2f0414" class="">ã€ä½¿ç”¨Helmeté¿å…è¢«å¸¸è§æ¼æ´ä¾µè¢­ã€‘</p><ul id="1f8694d5-ea46-80d6-9775-f0286f856eca" class="bulleted-list"><li style="list-style-type:disc">Helmetæ˜¯ä¸€ä¸ªä¸­é—´ä»¶åŒ…ï¼Œå¯ä»¥é€šè¿‡è®¾ç½®é€‚å½“çš„HTTPæ ‡å¤´ï¼Œä¿æŠ¤åº”ç”¨ï¼Œå…å—Webæ¼æ´çš„å½±å“<ul id="1f8694d5-ea46-80a4-83ec-ee2bcd646219" class="bulleted-list"><li style="list-style-type:circle">åœ¨é¡¹ç›®æ ¹ç›®å½•å‘½ä»¤è¡Œå®‰è£…<ul id="1f8694d5-ea46-8024-b3c5-e10e7fa29f57" class="bulleted-list"><li style="list-style-type:square">npm install helmet</li></ul></li></ul><ul id="1f8694d5-ea46-8003-919a-e0137a64efa8" class="bulleted-list"><li style="list-style-type:circle">app.jså¯¼å…¥helmetåº“ï¼Œä½¿ç”¨useï¼ˆï¼‰æ–¹æ³•å°†æ¨¡å—æ·»åŠ åˆ°ä¸­é—´ä»¶é“¾ä¸­<ul id="1f8694d5-ea46-8028-b5de-dcbf01212446" class="bulleted-list"><li style="list-style-type:square"></li></ul><p id="1f8694d5-ea46-800c-aa93-dedea3313c61" class="">var compression = require(&#x27;compression&#x27;);<br/>var helmet = require(&#x27;helmet&#x27;);<br/></p><p id="1f8694d5-ea46-8009-bf44-daeef502781d" class="">// Create the Express application object<br/>var app = express();<br/></p><p id="1f8694d5-ea46-802a-b088-c6a5139d952c" class="">app.use(helmet());<br/>...<br/></p></li></ul></li></ul><ul id="1f8694d5-ea46-80aa-8e04-c0fc1454c1cd" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°å‘½ä»¤æ·»åŠ ç±»å¯¹å¤§å¤šæ•°ç«™ç‚¹æœ‰æ„ä¹‰çš„å¯ç”¨æ ‡å¤´å­é›†ï¼Œå¯ç”¨æŒ‰ç…§npmçš„è¯´æ˜ï¼Œæ ¹æ®éœ€è¦æ·»åŠ /ç¦ç”¨ç‰¹å®šæ ‡å¤´</li></ul><p id="1f8694d5-ea46-8087-aafb-e40377bcbbc5" class="">
</p><p id="1f8694d5-ea46-8096-9732-ec73760bec7a" class=""><strong><span style="border-bottom:0.05em solid">åœ¨Heroä¸Šéƒ¨ç½²å›¾ä¹¦é¦†é¡¹ç›®ï¼š</span></strong></p><ul id="1f8694d5-ea46-8088-baca-e2b638d376b7" class="bulleted-list"><li style="list-style-type:disc">æœ¬èŠ‚å±•ç¤ºåœ¨Heroku PaaS cloudäº‘å®‰è£…å›¾ä¹¦é¦†é¡¹ç›®</li></ul><p id="1f8694d5-ea46-805c-84bb-e2e909d4f9a5" class="">ã€ä¸ºä»€ä¹ˆé€‰æ‹©Herkuã€‘</p><p id="1f8694d5-ea46-80e7-b308-c42a0c281a84" class="">Heroku æ˜¯è¿è¡Œæ—¶é—´æœ€é•¿ï¼Œä¸”æœ€å—æ¬¢è¿çš„åŸºäºäº‘çš„ PaaS æœåŠ¡ä¹‹ä¸€ã€‚å®ƒæœ€åˆåªæ”¯æŒ Ruby åº”ç”¨ç¨‹åºï¼Œä½†ç°åœ¨å¯ç”¨äºæ‰˜ç®¡æ¥è‡ªè®¸å¤šç¼–ç¨‹ç¯å¢ƒçš„åº”ç”¨ç¨‹åºï¼ŒåŒ…æ‹¬ Nodeï¼ˆä»¥åŠ Expressï¼‰ï¼</p><p id="1f8694d5-ea46-80a4-a9df-d03d1d7423e5" class="">æˆ‘ä»¬é€‰æ‹©ä½¿ç”¨ Heroku æœ‰ä»¥ä¸‹å‡ ä¸ªåŸå› ï¼š</p><ul id="1f8694d5-ea46-80c4-8ddf-fcbd33f39adf" class="bulleted-list"><li style="list-style-type:disc">Heroku æœ‰ä¸€ä¸ª<a href="https://www.heroku.com/pricing">å…è´¹å¥—é¤</a>ï¼ˆå°½ç®¡æœ‰ä¸€äº›é™åˆ¶ï¼‰ã€‚</li></ul><ul id="1f8694d5-ea46-80c9-8656-c92f8c228c25" class="bulleted-list"><li style="list-style-type:disc">ä½œä¸º PaaSï¼ŒHeroku ä¸ºæˆ‘ä»¬æä¾›äº†å¤§é‡çš„ Web åŸºç¡€æ¶æ„ã€‚è¿™ä½¿å¾—å…¥é—¨æ›´åŠ å®¹æ˜“ï¼Œå› ä¸ºä½ ä¸å¿…æ‹…å¿ƒæœåŠ¡å™¨ï¼Œè´Ÿè½½å¹³è¡¡å™¨ï¼Œåå‘ä»£ç†ï¼Œå´©æºƒæ—¶é‡æ–°å¯åŠ¨ç½‘ç«™ï¼Œæˆ–è€… Heroku ä¸ºæˆ‘ä»¬æä¾›çš„ä»»ä½•å…¶ä»– Web åŸºç¡€ç»“æ„ã€‚</li></ul><ul id="1f8694d5-ea46-8070-96ce-faa6ca6a333a" class="bulleted-list"><li style="list-style-type:disc">è™½ç„¶å®ƒç¡®å®æœ‰ä¸€äº›é™åˆ¶ï¼Œä½†è¿™äº›ä¸ä¼šå½±å“è¿™ä¸ªç‰¹å®šçš„åº”ç”¨ç¨‹åºã€‚ä¾‹å¦‚ï¼š<ul id="1f8694d5-ea46-805a-ab9f-eb1bdd76efa9" class="bulleted-list"><li style="list-style-type:circle">Heroku åªæä¾›çŸ­æœŸå­˜å‚¨ï¼Œå› æ­¤ç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶æ— æ³•å®‰å…¨åœ°å­˜å‚¨åœ¨ Heroku æœ¬èº«ã€‚</li></ul><ul id="1f8694d5-ea46-80cc-8c75-c9755cdf1a4a" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœåŠå°æ—¶å†…æ²¡æœ‰è¯·æ±‚ï¼Œå…è´¹å¥—é¤å°†ä½¿ä¸æ´»åŠ¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºè¿›å…¥ç¡çœ ã€‚ç„¶åï¼Œè¯¥ç½‘ç«™å¯èƒ½éœ€è¦å‡ ç§’é’Ÿæ‰èƒ½è¢«å”¤é†’ã€‚</li></ul><ul id="1f8694d5-ea46-80d2-aa4a-e803272f7855" class="bulleted-list"><li style="list-style-type:circle">å…è´¹å¥—é¤å°†ä½ ç½‘ç«™è¿è¡Œçš„æ—¶é—´ï¼Œé™åˆ¶ä¸ºæ¯æœˆä¸€å®šçš„å°æ—¶æ•°ï¼ˆä¸åŒ…æ‹¬ç½‘ç«™â€œç¡ç€â€çš„æ—¶é—´ï¼‰ã€‚è¿™å¯¹äºä½ä½¿ç”¨/æ¼”ç¤ºç«™ç‚¹æ¥è¯´å¾ˆå¥½ï¼Œä½†å¦‚æœéœ€è¦ 100ï¼…çš„æ­£å¸¸è¿è¡Œæ—¶é—´ï¼Œåˆ™ä¸é€‚ç”¨ã€‚</li></ul><ul id="1f8694d5-ea46-808a-afce-c197f8006c00" class="bulleted-list"><li style="list-style-type:circle"><a href="https://devcenter.heroku.com/articles/limits">Heroku å®˜æ–¹æ–‡æ¡£</a>ä¸­åˆ—å‡ºçš„å…¶ä»–é™åˆ¶ã€‚</li></ul></li></ul><ul id="1f8694d5-ea46-80f5-9e25-f2bb7b6e63aa" class="bulleted-list"><li style="list-style-type:disc">å¤§å¤šæ•°æƒ…å†µä¸‹å®ƒåªæ˜¯å¯ä»¥å·¥ä½œï¼Œå¦‚æœä½ æœ€ç»ˆå–œæ¬¢å®ƒï¼Œå¹¶å¸Œæœ›å‡çº§ï¼Œé‚£ä¹ˆæ‰©å±•ä½ çš„åº”ç”¨ç¨‹åºéå¸¸å®¹æ˜“ã€‚</li></ul><p id="1f8694d5-ea46-80a6-ad32-f00b8614c489" class="">è™½ç„¶ Heroku éå¸¸é€‚åˆä¸¾åŠæ­¤æ¼”ç¤ºï¼Œä½†å®ƒå¯èƒ½å¹¶ä¸é€‚åˆä½ çš„çœŸå®ç½‘ç«™ã€‚Heroku å¯ä»¥è½»æ¾è®¾ç½®å’Œæ‰©å±•ï¼Œä½†ä»£ä»·æ˜¯çµæ´»æ€§è¾ƒä½ï¼Œè€Œä¸”ä¸€æ—¦é€€ å‡ºå…è´¹å¥—é¤ï¼Œå¯èƒ½ä¼šèŠ±è´¹æ›´å¤šã€‚</p><p id="1f8694d5-ea46-8047-8ced-c789694d9b36" class="">ã€Herokuå¦‚ä½•å·¥ä½œã€‘</p><p id="1f8694d5-ea46-80c4-81bf-ff253eaf5c74" class="">Heroku åœ¨ä¸€ä¸ªæˆ–å¤šä¸ªâ€œ<a href="https://devcenter.heroku.com/articles/dynos">Dynos</a>â€ä¸­è¿è¡Œç½‘ç«™ï¼Œè¿™äº›â€œDynosâ€æ˜¯ç‹¬ç«‹çš„è™šæ‹ŸåŒ– Unix å®¹å™¨ï¼Œæä¾›è¿è¡Œåº”ç”¨ç¨‹åºæ‰€éœ€çš„ç¯å¢ƒã€‚Dynos æ˜¯å®Œå…¨éš”ç¦»çš„ï¼Œå¹¶ä¸”æœ‰ä¸€ä¸ªçŸ­æš‚çš„æ–‡ä»¶ç³»ç»Ÿï¼ˆä¸€ä¸ªçŸ­æš‚çš„æ–‡ä»¶ç³»ç»Ÿï¼Œæ¯æ¬¡ dyno é‡æ–°å¯åŠ¨æ—¶éƒ½ä¼šæ¸…ç†/æ¸…ç©ºï¼‰ã€‚dynos é»˜è®¤å…±äº«çš„å”¯ä¸€å†…å®¹ï¼Œæ˜¯åº”ç”¨ç¨‹åº<a href="https://devcenter.heroku.com/articles/config-vars">é…ç½®å˜é‡</a>ã€‚Heroku å†…éƒ¨ä½¿ç”¨è´Ÿè½½å‡è¡¡å™¨ï¼Œå°† Web æµé‡åˆ†é…ç»™æ‰€æœ‰â€œwebâ€dynosã€‚ç”±äºå®ƒä»¬ä¹‹é—´æ²¡æœ‰ä»»ä½•å…±äº«ï¼ŒHeroku å¯ä»¥é€šè¿‡æ·»åŠ æ›´å¤š dynosï¼Œæ¥æ°´å¹³æ‰©å±•åº”ç”¨ç¨‹åºï¼ˆå½“ç„¶ï¼Œä½ å¯èƒ½è¿˜éœ€è¦æ‰©å±•æ•°æ®åº“ï¼Œä»¥æ¥å—å…¶ä»–è¿æ¥ï¼‰ã€‚</p><p id="1f8694d5-ea46-8055-a156-d34bbba52a74" class="">ç”±äºæ–‡ä»¶ç³»ç»Ÿæ˜¯çŸ­æš‚çš„ï¼Œå› æ­¤æ— æ³•ç›´æ¥å®‰è£…åº”ç”¨ç¨‹åºæ‰€éœ€çš„æœåŠ¡ï¼ˆä¾‹å¦‚æ•°æ®åº“ï¼Œé˜Ÿåˆ—ï¼Œç¼“å­˜ç³»ç»Ÿï¼Œå­˜å‚¨ï¼Œç”µå­é‚®ä»¶æœåŠ¡ç­‰ï¼‰ã€‚ç›¸åï¼ŒHeroku Web åº”ç”¨ç¨‹åºä½¿ç”¨ Heroku æˆ–ç¬¬ä¸‰æ–¹ä½œä¸ºç‹¬ç«‹â€œé™„åŠ ç»„ä»¶â€æä¾›çš„æ”¯æŒæœåŠ¡ã€‚è¿æ¥åˆ° Web åº”ç”¨ç¨‹åºåï¼Œå¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡ï¼Œåœ¨ Web åº”ç”¨ç¨‹åºä¸­è®¿é—®é™„åŠ æœåŠ¡ã€‚</p><p id="1f8694d5-ea46-80fc-b5bd-c5c1b9f95b8a" class="">ä¸ºäº†æ‰§è¡Œä½ çš„åº”ç”¨ç¨‹åºï¼ŒHeroku éœ€è¦èƒ½å¤Ÿè®¾ç½®é€‚å½“çš„ç¯å¢ƒå’Œä¾èµ–å…³ç³»ï¼Œå¹¶äº†è§£å®ƒæ˜¯å¦‚ä½•å¯åŠ¨çš„ã€‚å¯¹äº Node åº”ç”¨ç¨‹åºï¼Œå®ƒæ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯éƒ½æ˜¯ä»<strong>package.json</strong>æ–‡ä»¶ä¸­è·å–çš„ã€‚</p><p id="1f8694d5-ea46-8092-a655-e49a33d4f1d2" class="">å¼€å‘äººå‘˜ä½¿ç”¨ç‰¹æ®Šçš„å®¢æˆ·ç«¯åº”ç”¨ç¨‹åº/ç»ˆç«¯ï¼Œä¸ Heroku äº¤äº’ï¼Œè¿™å¾ˆåƒ Unix bash è„šæœ¬ã€‚è¿™å…è®¸ä½ ä¸Šä¼ å­˜å‚¨åœ¨ git å­˜å‚¨åº“ä¸­çš„ä»£ç ï¼Œæ£€æŸ¥æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹ï¼ŒæŸ¥çœ‹æ—¥å¿—ï¼Œè®¾ç½®é…ç½®å˜é‡ç­‰ç­‰ï¼</p><p id="1f8694d5-ea46-80a0-8a32-e59141c1ae5a" class="">ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåœ¨ Heroku ä¸Šå·¥ä½œï¼Œæˆ‘ä»¬éœ€è¦å°†æˆ‘ä»¬çš„ Express Web åº”ç”¨ç¨‹åºæ”¾å…¥ git å­˜å‚¨åº“ï¼Œå¹¶å¯¹ package.json è¿›è¡Œä¸€äº›å°çš„æ›´æ”¹ã€‚å®Œæˆåï¼Œæˆ‘ä»¬å¯ä»¥è®¾ç½® Heroku å¸æˆ·ï¼Œè·å– Heroku å®¢æˆ·ç«¯ï¼Œå¹¶ä½¿ç”¨å®ƒæ¥å®‰è£…æˆ‘ä»¬çš„ç½‘ç«™ã€‚</p><p id="1f8694d5-ea46-802d-a943-d2970049ff10" class="">
</p><p id="1f8694d5-ea46-80b2-92c5-f767e1fd8efc" class="">ã€åœ¨Githubä¸Šåˆ›å»ºåº”ç”¨ä»“åº“ã€‘</p><p id="1f8694d5-ea46-8093-99df-dc075601216e" class="">Heroku ä¸Â <strong>git</strong>Â æºä»£ç ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿç´§å¯†é›†æˆï¼Œä½¿ç”¨å®ƒæ¥ä¸Šä¼ /åŒæ­¥ä½ å¯¹å®æ—¶è¿è¡Œç³»ç»Ÿæ‰€åšçš„ä»»ä½•æ›´æ”¹ã€‚å®ƒé€šè¿‡æ·»åŠ ä¸€ä¸ªåä¸º heroku çš„æ–° Herokuâ€œè¿œç¨‹â€å­˜å‚¨åº“ï¼Œæ¥æŒ‡å‘ä½ åœ¨ Heroku äº‘ä¸Šçš„æºå­˜å‚¨åº“ã€‚åœ¨å¼€å‘æœŸé—´ï¼Œä½ ä½¿ç”¨ git åœ¨â€œä¸»â€å­˜å‚¨åº“ master ä¸­å­˜å‚¨æ›´æ”¹ã€‚å¦‚æœè¦éƒ¨ç½²ç«™ç‚¹ï¼Œè¯·å°†æ›´æ”¹åŒæ­¥åˆ° Heroku å­˜å‚¨åº“ã€‚<br/><br/></p><p id="1f8694d5-ea46-8076-a484-f0c85952233b" class="">æœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥ä½¿ç”¨ gitï¼Œä½†æœ€ç®€å•çš„æ–¹æ³•ä¹‹ä¸€ï¼Œæ˜¯é¦–å…ˆåœ¨<a href="https://github.com/">GitHub</a>ä¸Šå»ºç«‹ä¸€ä¸ªå¸æˆ·ï¼Œåœ¨é‚£é‡Œåˆ›å»ºå­˜å‚¨åº“ï¼Œç„¶ååœ¨æœ¬åœ°åŒæ­¥å®ƒï¼š</p><ol type="1" id="1f8694d5-ea46-801e-bc68-d47836464d25" class="numbered-list" start="1"><li>è®¿é—®Â <a href="https://github.com/">https://github.com/</a>Â å¹¶åˆ›å»ºä¸€ä¸ªå¸æˆ·ã€‚</li></ol><ol type="1" id="1f8694d5-ea46-8026-b541-df6b46eb5a64" class="numbered-list" start="2"><li>ç™»å½•åï¼Œå•å‡»é¡¶éƒ¨å·¥å…·æ ä¸­çš„Â <strong>+</strong>Â å·é“¾æ¥ï¼Œç„¶åé€‰æ‹©æ–°å»ºå­˜å‚¨åº“<strong>New repository</strong>ã€‚</li></ol><ol type="1" id="1f8694d5-ea46-806d-b535-d8fe19a7acf0" class="numbered-list" start="3"><li>å¡«å†™æ­¤è¡¨å•ä¸Šçš„æ‰€æœ‰å­—æ®µã€‚è™½ç„¶è¿™äº›ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä½†å¼ºçƒˆå»ºè®®ä½¿ç”¨å®ƒä»¬ã€‚<ul id="1f8694d5-ea46-80ba-9ba6-dec0cc462d2a" class="bulleted-list"><li style="list-style-type:disc">è¾“å…¥æ–°çš„å­˜å‚¨åº“åç§°ï¼ˆä¾‹å¦‚ï¼Œexpress-locallibrary-tutorialï¼‰å’Œæè¿°ï¼ˆä¾‹å¦‚â€œä»¥ Expressï¼ˆnodeï¼‰ç¼–å†™çš„æœ¬åœ°å›¾ä¹¦é¦†ç½‘ç«™â€ï¼‰ã€‚</li></ul><ul id="1f8694d5-ea46-8097-ade3-d39a5f94fce3" class="bulleted-list"><li style="list-style-type:disc">åœ¨ Add .gitignore é€‰æ‹©åˆ—è¡¨ä¸­é€‰æ‹©Â <strong>Node</strong>ã€‚</li></ul><ul id="1f8694d5-ea46-800d-b98e-cc4509885c77" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ·»åŠ è®¸å¯è¯Â <em>Add license</em>Â é€‰æ‹©åˆ—è¡¨ä¸­ï¼Œé€‰æ‹©ä½ åå¥½çš„è®¸å¯è¯ã€‚</li></ul><ul id="1f8694d5-ea46-8019-a1cd-e1621290e259" class="bulleted-list"><li style="list-style-type:disc">ç‚¹é€‰Â <strong>ä½¿ç”¨è‡ªè¿°æ–‡ä»¶åˆå§‹åŒ–æ­¤å­˜å‚¨åº“</strong>Â â€œ<strong>Initialize this repository with a README</strong>â€</li></ul></li></ol><ol type="1" id="1f8694d5-ea46-8083-a695-efa129bb0955" class="numbered-list" start="4"><li>æŒ‰Â <strong>Create repository</strong>.</li></ol><ol type="1" id="1f8694d5-ea46-80cc-b67e-e90ebda6bb5f" class="numbered-list" start="5"><li>å•å‡»æ–°ä»“åº“é¡µé¢ä¸Šçš„ç»¿è‰²â€œå…‹éš†æˆ–ä¸‹è½½â€æŒ‰é’® &quot;<strong>Clone or download</strong>&quot;ã€‚</li></ol><ol type="1" id="1f8694d5-ea46-8032-8bf9-cea2e032ba58" class="numbered-list" start="6"><li>ä»æ˜¾ç¤ºçš„å¯¹è¯æ¡†çš„æ–‡æœ¬å­—æ®µï¼Œå¤åˆ¶ URL å€¼ï¼ˆå®ƒåº”è¯¥ç±»ä¼¼äºï¼š<code>https://github.com/&lt;your_git_user_id&gt;/express-locallibrary-tutorial.git</code>ï¼‰ã€‚</li></ol><p id="1f8694d5-ea46-8075-aaa6-f319856c69f1" class="">ç°åœ¨åˆ›å»ºäº†å­˜å‚¨åº“ï¼ˆâ€œrepoâ€ï¼‰ï¼Œæˆ‘ä»¬å°†è¦åœ¨æœ¬åœ°è®¡ç®—æœºä¸Šå…‹éš†å®ƒï¼š</p><ol type="1" id="1f8694d5-ea46-8027-bed4-c4875ecf5add" class="numbered-list" start="1"><li>ä¸ºä½ çš„æœ¬åœ°è®¡ç®—æœºå®‰è£… gitï¼ˆä½ å¯ä»¥åœ¨<a href="https://git-scm.com/downloads">æ­¤å¤„</a>æ‰¾åˆ°ä¸åŒå¹³å°çš„ç‰ˆæœ¬ï¼‰ã€‚</li></ol><ol type="1" id="1f8694d5-ea46-8018-b1a2-ed850c27e9e0" class="numbered-list" start="2"><li>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦/ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨ä½ åœ¨ä¸Šé¢å¤åˆ¶çš„ URLï¼Œå…‹éš† clone å­˜å‚¨åº“ï¼š<p id="1f8694d5-ea46-807a-9c40-c6a21cb240e0" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-80cf-8442-c6e5af047d32" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">git clone https://github.com/&lt;your_git_user_id&gt;/express-locallibrary-tutorial.git
</code></pre><p id="1f8694d5-ea46-8095-8c06-d86b7cef04b8" class="">è¿™å°†åœ¨å½“å‰æ—¶é—´ç‚¹ä¹‹åï¼Œåˆ›å»ºå­˜å‚¨åº“ã€‚</p></li></ol><ol type="1" id="1f8694d5-ea46-80e4-93aa-d17af5130399" class="numbered-list" start="3"><li>åˆ°æ–°çš„ä»“åº“ã€‚<p id="1f8694d5-ea46-801d-a95b-eb89ff5c0e33" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8042-8d29-cc5d10c8d612" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">cd express-locallibrary-tutorial
</code></pre></li></ol><p id="1f8694d5-ea46-802d-8e71-d57450c67bb1" class="">æœ€åä¸€æ­¥ï¼Œæ˜¯å¤åˆ¶ä½ çš„åº”ç”¨ç¨‹åºï¼Œç„¶åä½¿ç”¨ gitï¼Œå°†æ–‡ä»¶æ·»åŠ åˆ°ä½ çš„ä»“åº“ï¼š</p><ol type="1" id="1f8694d5-ea46-80a6-a94e-e391410655e7" class="numbered-list" start="1"><li>å°† Express åº”ç”¨ç¨‹åºï¼Œå¤åˆ¶åˆ°æ­¤æ–‡ä»¶å¤¹ä¸­ï¼ˆä¸åŒ…æ‹¬**/node_modules**ï¼Œå…¶ä¸­åŒ…å«ä½ åº”æ ¹æ®éœ€è¦ï¼Œä» NPM è·å–çš„ä¾èµ–é¡¹æ–‡ä»¶ï¼‰ã€‚</li></ol><ol type="1" id="1f8694d5-ea46-8055-a1d1-c2cb9102a2e0" class="numbered-list" start="2"><li>æ‰“å¼€å‘½ä»¤æç¤ºç¬¦/ç»ˆç«¯ï¼Œå¹¶ä½¿ç”¨<code>add</code>å‘½ä»¤ï¼Œå°†æ‰€æœ‰æ–‡ä»¶æ·»åŠ åˆ° gitã€‚<p id="1f8694d5-ea46-808b-886e-cc1a5272babd" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-80ee-9336-eb1f638ddfa6" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">git add -A
</code></pre></li></ol><ol type="1" id="1f8694d5-ea46-808f-affc-fb314867e181" class="numbered-list" start="3"><li>ä½¿ç”¨ status å‘½ä»¤ï¼Œæ£€æŸ¥è¦æ·»åŠ çš„æ‰€æœ‰æ–‡ä»¶æ˜¯å¦æ­£ç¡®ï¼ˆä½ å¸Œæœ›åŒ…å«æºæ–‡ä»¶ï¼Œè€Œä¸æ˜¯äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸´æ—¶æ–‡ä»¶ç­‰ï¼‰ã€‚å®ƒåº”è¯¥çœ‹èµ·æ¥æœ‰ç‚¹åƒä¸‹é¢çš„åˆ—è¡¨ã€‚<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8058-ac4d-dffa7cd232bd" class="code"><code class="language-Plain Text" style="white-space:pre-wrap;word-break:break-all">&gt; git status
On branch master
Your branch is up-to-date with &#x27;origin/master&#x27;.
Changes to be committed:
  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)

        new file:   ...
</code></pre></li></ol><ol type="1" id="1f8694d5-ea46-802c-8b4f-fd5aa893d0ed" class="numbered-list" start="4"><li>å¦‚æœä½ æ»¡æ„ï¼Œè¯·å°†æ–‡ä»¶æäº¤åˆ°æœ¬åœ°å­˜å‚¨åº“ï¼š<p id="1f8694d5-ea46-80c1-9882-cb2eee71926b" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8008-a7b9-efa5606ff282" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">git commit -m &quot;First version of application moved into github&quot;
</code></pre></li></ol><ol type="1" id="1f8694d5-ea46-8053-8148-c4af5790849f" class="numbered-list" start="5"><li>ç„¶åä½¿ç”¨ä»¥ä¸‹å†…å®¹ï¼Œå°†æœ¬åœ°å­˜å‚¨åº“åŒæ­¥åˆ° Github ç½‘ç«™ï¼š<p id="1f8694d5-ea46-8098-9ff1-fcf32889df6d" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8056-a32e-cd8322db7a71" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">git push origin master
</code></pre></li></ol><p id="1f8694d5-ea46-80c1-88fc-de07a19fef9d" class="">å®Œæˆæ­¤æ“ä½œåï¼Œä½ åº”è¯¥å¯ä»¥è¿”å›åˆ›å»ºå­˜å‚¨åº“çš„ Github ä¸Šçš„é¡µé¢ï¼Œåˆ·æ–°é¡µé¢ï¼Œå¹¶æŸ¥çœ‹ä½ çš„æ•´ä¸ªåº”ç”¨ç¨‹åºç°å·²ä¸Šä¼ ã€‚ä½¿ç”¨æ­¤æ·»åŠ /æäº¤/æ¨é€å¾ªç¯ï¼Œä½ å¯ä»¥åœ¨æ–‡ä»¶æ›´æ”¹æ—¶ï¼Œç»§ç»­æ›´æ–°å­˜å‚¨åº“ã€‚</p><p id="1f8694d5-ea46-8009-a936-d4b409c2ba98" class="">
</p><p id="1f8694d5-ea46-80aa-babf-c254752934f9" class="">ã€æ›´æ–°Herokuåº”ç”¨ç¨‹åºã€‘</p><ul id="1f8694d5-ea46-801e-9b6a-fcdac995d601" class="bulleted-list"><li style="list-style-type:disc">è®¾ç½®Nodeç‰ˆæœ¬<ul id="1f8694d5-ea46-806a-865e-d2a29aa48830" class="bulleted-list"><li style="list-style-type:circle"><strong>package.json</strong>åŒ…å«è§£å†³åº”ç”¨ç¨‹åºä¾èµ–é¡¹æ‰€éœ€çš„æ‰€æœ‰å†…å®¹ï¼Œä»¥åŠå¯åŠ¨ç«™ç‚¹æ—¶ï¼Œåº”å¯åŠ¨çš„æ–‡ä»¶ã€‚Heroku æ£€æµ‹åˆ°æ­¤æ–‡ä»¶çš„å­˜åœ¨ï¼Œå¹¶å°†ä½¿ç”¨å®ƒæ¥é…ç½®ä½ çš„åº”ç”¨ç¨‹åºç¯å¢ƒã€‚</li></ul><ul id="1f8694d5-ea46-8025-8f3e-dc49569fb9ec" class="bulleted-list"><li style="list-style-type:circle">æˆ‘ä»¬å½“å‰çš„<strong>package.json</strong>ä¸­ï¼Œç¼ºå°‘çš„å”¯ä¸€æœ‰ç”¨ä¿¡æ¯ï¼Œæ˜¯ node çš„ç‰ˆæœ¬ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡è¾“å…¥å‘½ä»¤ï¼Œæ‰¾åˆ°æˆ‘ä»¬ç”¨äºå¼€å‘çš„ node ç‰ˆæœ¬ï¼š<blockquote id="1f8694d5-ea46-80ae-af98-dd04697fbc1d" class="">node --version<br/>v8.9.1<br/></blockquote></li></ul><ul id="1f8694d5-ea46-80b8-a402-f9c89041a8c0" class="bulleted-list"><li style="list-style-type:circle">æ‰“å¼€package.jsonï¼Œå°†æ­¤ä¿¡æ¯æ·»åŠ ä¸ºengines&gt;nodeéƒ¨åˆ†<ul id="1f8694d5-ea46-80d9-af39-cac55db044c8" class="bulleted-list"><li style="list-style-type:square">{<br/>&quot;name&quot;: &quot;express-locallibrary-tutorial&quot;,<br/>&quot;version&quot;: &quot;0.0.0&quot;,<br/>&quot;engines&quot;: {<br/>&quot;node&quot;: &quot;8.9.1&quot;<br/>},<br/>&quot;private&quot;: true,<br/>...<br/></li></ul></li></ul></li></ul><p id="1f8694d5-ea46-800f-8515-d2fcf759b687" class="">ã€æ•°æ®åº“é…ç½®ã€‘</p><ul id="1f8694d5-ea46-80dc-8a47-edf78cb4e686" class="bulleted-list"><li style="list-style-type:disc">åˆ°ç›®å‰ä¸ºæ­¢ï¼Œåœ¨æœ¬æ•™ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†ä¸€ä¸ªç¡¬ç¼–ç åˆ°<strong>app.js</strong>çš„å•ä¸ªæ•°æ®åº“ã€‚é€šå¸¸æˆ‘ä»¬å¸Œæœ›ï¼Œèƒ½å¤Ÿä¸ºç”Ÿäº§å’Œå¼€å‘åˆ›å»ºä¸åŒçš„æ•°æ®åº“ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°†ä¿®æ”¹ LocalLibrary ç½‘ç«™ï¼Œä»¥ä» OS ç¯å¢ƒè·å–æ•°æ®åº“ URIï¼ˆå¦‚æœå·²å®šä¹‰ï¼‰ï¼Œå¦åˆ™ä½¿ç”¨æˆ‘ä»¬çš„å¼€å‘æ•°æ®åº“ã€‚<ul id="1f8694d5-ea46-8015-bc07-db6b053edca7" class="bulleted-list"><li style="list-style-type:circle">æ‰“å¼€app.jsï¼Œæ‰¾åˆ°é“¾æ¥å˜é‡mongoDBçš„è¡Œä»£ç æ›¿æ¢ä¸ºå¦‚ä¸‹<ul id="1f8694d5-ea46-8015-a99a-cc620cfb16f3" class="bulleted-list"><li style="list-style-type:square">var mongoDB =<br/>process.env.MONGODB_URI ||<br/>&quot;mongodb://your_user_id:your_password@ds119748.mlab.com:19748/local_library&quot;;<br/></li></ul></li></ul></li></ul><p id="1f8694d5-ea46-806a-a3c6-ef75fa2047dc" class="">
</p><p id="1f8694d5-ea46-8031-9201-dbbba29d23fd" class="">ã€å®‰è£…ä¾èµ–å¹¶é‡æ–°æµ‹è¯•ã€‘</p><p id="1f8694d5-ea46-809c-adf2-ee2f1720393c" class="">npm install</p><p id="1f8694d5-ea46-807c-9728-d8ffae7612af" class="">ã€æ›´æ”¹ä¿å­˜åˆ°Githubã€‘</p><p id="1f8694d5-ea46-80cd-ad46-c1bbbbfab0ac" class="">git add -A<br/>git commit -m &quot;Added files and changes required for deployment to heroku&quot;<br/>git push origin master<br/></p><p id="1f8694d5-ea46-8089-8401-c70949aef0d8" class="">
</p><p id="1f8694d5-ea46-80a1-87e7-f430b1c44646" class=""><strong><span style="border-bottom:0.05em solid">å¼€å§‹éƒ¨ç½²Heroku</span></strong></p><p id="1f8694d5-ea46-80a5-9168-fedad860c9f3" class="">ã€è·å–Herokuè´¦æˆ·ã€‘</p><p id="1f8694d5-ea46-80a9-a355-fffdc84301e2" class="">è¦å¼€å§‹ä½¿ç”¨ Herokuï¼Œä½ é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªå¸æˆ·ï¼ˆå¦‚æœä½ å·²ç»æ‹¥æœ‰ä¸€ä¸ªå¸æˆ·ï¼Œå¹¶å®‰è£…äº† Heroku å®¢æˆ·ç«¯ï¼Œè¯·è·³è¿‡åˆ›å»ºå¹¶ä¸Šä¼ ç½‘ç«™ï¼‰ï¼š</p><ul id="1f8694d5-ea46-8057-9a15-ea427a7a0d5f" class="bulleted-list"><li style="list-style-type:disc">è®¿é—®Â <a href="https://www.heroku.com/">www.heroku.com</a>Â ï¼Œå¹¶å•å‡»å…è´¹æ³¨å†ŒæŒ‰é’®Â <strong>SIGN UP FOR FREE</strong>Â ã€‚</li></ul><ul id="1f8694d5-ea46-80c2-a1d5-f989f820e805" class="bulleted-list"><li style="list-style-type:disc">è¾“å…¥ä½ çš„è¯¦ç»†ä¿¡æ¯ï¼Œç„¶åæŒ‰<strong>CREATE FREE ACCOUNT</strong>ã€‚ç³»ç»Ÿä¼šè¦æ±‚ä½ ï¼Œæ£€æŸ¥å¸æˆ·ä¸­æ˜¯å¦æœ‰æ³¨å†Œç”µå­é‚®ä»¶ã€‚</li></ul><ul id="1f8694d5-ea46-8083-bf2a-f53a2a7cb4e6" class="bulleted-list"><li style="list-style-type:disc">å•å‡»æ³¨å†Œç”µå­é‚®ä»¶ä¸­çš„å¸æˆ·æ¿€æ´»é“¾æ¥ã€‚ä½ å°†åœ¨ç½‘ç»œæµè§ˆå™¨ä¸Šæ”¶å›ä½ çš„å¸æˆ·ã€‚</li></ul><ul id="1f8694d5-ea46-80fe-be64-e094f5e6f1e0" class="bulleted-list"><li style="list-style-type:disc">è¾“å…¥ä½ çš„å¯†ç ï¼Œç„¶åå•å‡»Â <strong>SET PASSWORD AND LOGIN</strong>.</li></ul><ul id="1f8694d5-ea46-8072-898a-c6daff984800" class="bulleted-list"><li style="list-style-type:disc">ç„¶åï¼Œä½ å°†ç™»å½•å¹¶è¿›å…¥ Heroku ä»ªè¡¨æ¿ï¼š<a href="https://dashboard.heroku.com/apps">https://dashboard.heroku.com/apps</a>.</li></ul><p id="1f8694d5-ea46-802e-bbcc-d195d1cba81c" class="">ã€å®‰è£…Herokuå®¢æˆ·ç«¯ã€‘</p><p id="1f8694d5-ea46-8084-893e-d714deb3adf7" class="">heroku helpæŸ¥çœ‹å¸®åŠ©è¯´æ˜</p><p id="1f8694d5-ea46-80f3-8d43-c9e7985420c8" class="">ã€åˆ›å»ºå¹¶ä¸Šä¼ ç½‘ç«™ã€‘</p><p id="1f8694d5-ea46-80fe-8ac4-cdd9e99762f1" class="">è¦åˆ›å»ºåº”ç”¨ç¨‹åºï¼Œæˆ‘ä»¬åœ¨å­˜å‚¨åº“çš„æ ¹ç›®å½•ä¸­ï¼Œè¿è¡Œâ€œcreateâ€å‘½ä»¤ã€‚è¿™å°†åœ¨æˆ‘ä»¬çš„æœ¬åœ° git ç¯å¢ƒä¸­ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º heroku çš„ git remoteï¼ˆâ€œæŒ‡å‘è¿œç¨‹å­˜å‚¨åº“çš„æŒ‡é’ˆâ€ï¼‰ã€‚</p><p id="1f8694d5-ea46-80e9-bb86-e73af6bfefec" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-80b4-904b-d28c4be06cb8" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">heroku create
</code></pre><p id="1f8694d5-ea46-80fc-81eb-c27c29a4e60c" class=""><strong>å¤‡æ³¨ï¼š</strong>Â å¦‚æœä½ æ„¿æ„ï¼Œå¯ä»¥åœ¨â€œåˆ›å»ºâ€create ä¹‹åæŒ‡å®šè¿œç¨‹å­˜å‚¨åº“çš„å‘½åã€‚å¦‚æœä½ ä¸è¿™æ ·åšï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ªéšæœºçš„åå­—ã€‚è¯¥åç§°ç”¨äºé»˜è®¤ URLã€‚</p><p id="1f8694d5-ea46-80c9-b9f0-ec80efb6cde2" class="">ç„¶åï¼Œæˆ‘ä»¬å¯ä»¥å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºï¼Œæ¨é€åˆ° Heroku å­˜å‚¨åº“ï¼Œå¦‚ä¸‹æ‰€ç¤ºã€‚è¿™å°†ä¸Šä¼ åº”ç”¨ç¨‹åºï¼Œè·å–æ‰€æœ‰ä¾èµ–é¡¹ï¼Œå°†å…¶æ‰“åŒ…åˆ° dyno ä¸­ï¼Œç„¶åå¯åŠ¨è¯¥ç«™ç‚¹ã€‚</p><p id="1f8694d5-ea46-80ff-9360-c96ea2fe26c6" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8063-a086-e9e77420f215" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">git push heroku master
</code></pre><p id="1f8694d5-ea46-80e4-aa3d-cd15cf030531" class="">å¦‚æœæˆ‘ä»¬å¾ˆå¹¸è¿ï¼Œè¯¥åº”ç”¨ç¨‹åºç°åœ¨æ­£åœ¨ç½‘ç«™ä¸Šâ€œè¿è¡Œâ€ã€‚è¦æ‰“å¼€æµè§ˆå™¨å¹¶è¿è¡Œæ–°ç½‘ç«™ï¼Œè¯·ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š</p><p id="1f8694d5-ea46-8041-af1a-cf8592af7cac" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-805f-992c-c78bb59b8eba" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">heroku open
</code></pre><p id="1f8694d5-ea46-8020-8e36-ee899c4e82e6" class=""><strong>å¤‡æ³¨ï¼š</strong>Â è¯¥ç«™ç‚¹å°†ä½¿ç”¨æˆ‘ä»¬çš„å¼€å‘æ•°æ®åº“è¿è¡Œã€‚åˆ›å»ºä¸€äº›ä¹¦æœ¬å’Œå…¶ä»–å¯¹è±¡ï¼Œå¹¶æ£€æŸ¥è¯¥ç½‘ç«™æ˜¯å¦æŒ‰é¢„æœŸè¿è¡Œã€‚åœ¨ä¸‹ä¸€èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å…¶è®¾ç½®ä¸ºä½¿ç”¨æˆ‘ä»¬çš„æ–°æ•°æ®åº“ã€‚</p><p id="1f8694d5-ea46-80e8-a0d3-f04d26430832" class="">ã€è®¾å®šé…ç½®å˜é‡ã€‘</p><p id="1f8694d5-ea46-8008-ba95-e87a59c9ff62" class="">æˆ‘ä»¬éœ€è¦å°† NODE_ENV è®¾ç½®ä¸º&#x27;production&#x27;ï¼Œä»¥ä¾¿æé«˜æ€§èƒ½ï¼Œå¹¶ç”Ÿæˆæ›´ç®€æ´çš„é”™è¯¯æ¶ˆæ¯ã€‚æˆ‘ä»¬é€šè¿‡è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼Œæ¥å®Œæˆæ­¤æ“ä½œï¼š</p><p id="1f8694d5-ea46-800f-84b9-e40e5a22f92c" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-800d-9cfb-e9a988541581" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">&gt;heroku config:set NODE_ENV=&#x27;production&#x27;
Setting NODE_ENV and restarting limitless-tor-18923... done, v13
NODE_ENV: production
</code></pre><p id="1f8694d5-ea46-80f6-aeee-f5b1632c3d12" class="">æˆ‘ä»¬è¿˜åº”è¯¥ä½¿ç”¨å•ç‹¬çš„æ•°æ®åº“è¿›è¡Œç”Ÿäº§ï¼Œåœ¨<strong>MONGODB_URI</strong>ç¯å¢ƒå˜é‡ä¸­ï¼Œè®¾ç½®å…¶ URIã€‚ä½ å¯ä»¥å®Œå…¨æŒ‰ç…§<a href="https://developer.mozilla.org/zh-CN/docs/Learn_web_development/Extensions/Server-side/Express_Nodejs/mongoose#setting_up_the_mongodb_database">æˆ‘ä»¬åŸæ¥çš„æ–¹å¼</a>ï¼Œè®¾ç½®æ–°æ•°æ®åº“å’Œæ•°æ®åº“ç”¨æˆ·ï¼Œå¹¶è·å–å…¶ URIã€‚ä½ å¯ä»¥å¦‚ä¸‹å›¾æ‰€ç¤ºè®¾ç½® URIï¼ˆæ˜¾ç„¶ï¼Œè¦ä½¿ç”¨ä½ è‡ªå·±çš„ URIï¼ï¼‰</p><p id="1f8694d5-ea46-807a-8ded-f4f033991748" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-80d1-892f-f51aca181fda" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">&gt;heroku config:set MONGODB_URI=&#x27;mongodb://your_user:your_password@ds139278.mlab.com:39278/local_library_production&#x27;
Setting MONGODB_URI and restarting limitless-tor-18923... done, v13
MONGODB_URI: mongodb://your_user:your_password@ds139278.mlab.com:39278/local_library_production
</code></pre><p id="1f8694d5-ea46-8043-ba95-e3ad3ae49110" class="">ä½ å¯ä»¥ä½¿ç”¨<code>heroku config</code>å‘½ä»¤ï¼Œéšæ—¶æ£€æŸ¥é…ç½®å˜é‡ - ç«‹å³å°è¯•ï¼š</p><p id="1f8694d5-ea46-80c8-a678-f4c31dcb156a" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-8070-930f-c5775111e3f1" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">&gt;heroku config
=== limitless-tor-18923 Config Vars
MONGODB_URI: mongodb://your_user:your_password@ds139278.mlab.com:39278/local_library_production
NODE_ENV:    production
</code></pre><p id="1f8694d5-ea46-80d3-8f22-dc1dea9b8d53" class="">Heroku ä¼šåœ¨æ›´æ–°å˜é‡æ—¶ï¼Œé‡æ–°å¯åŠ¨åº”ç”¨ç¨‹åºã€‚å¦‚æœä½ ç°åœ¨æ£€æŸ¥ä¸»é¡µï¼Œå®ƒåº”è¯¥æ˜¾ç¤ºå¯¹è±¡è®¡æ•°çš„é›¶å€¼ï¼Œå› ä¸ºä¸Šé¢çš„æ›´æ”¹ï¼Œæ„å‘³ç€æˆ‘ä»¬ç°åœ¨æ­£åœ¨ä½¿ç”¨æ–°çš„ï¼ˆç©ºï¼‰æ•°æ®åº“ã€‚</p><p id="1f8694d5-ea46-8036-8935-cc903892b718" class="">ã€æƒ¯ä¾‹é™„åŠ ç»„ä»¶ã€‘</p><p id="1f8694d5-ea46-8089-be5f-ef9d7b9ddd97" class="">Heroku ä½¿ç”¨ç‹¬ç«‹çš„é™„åŠ ç»„ä»¶ï¼Œä¸ºåº”ç”¨ç¨‹åºæä¾›æ”¯æŒæœåŠ¡ - ä¾‹å¦‚ç”µå­é‚®ä»¶æˆ–æ•°æ®åº“æœåŠ¡ã€‚æˆ‘ä»¬ä¸åœ¨æœ¬ç½‘ç«™ä¸­ä½¿ç”¨ä»»ä½•æ’ä»¶ï¼Œä½†å®ƒä»¬æ˜¯ä½¿ç”¨ Heroku çš„é‡è¦éƒ¨åˆ†ï¼Œå› æ­¤ä½ å¯èƒ½éœ€è¦æŸ¥çœ‹ä¸»é¢˜<a href="https://devcenter.heroku.com/articles/managing-add-ons">ç®¡ç†æ’ä»¶</a>ï¼ˆHeroku docsï¼‰<br/>ã€è°ƒè¯•ã€‘<br/></p><p id="1f8694d5-ea46-80d2-a655-e33acee731ce" class="">Heroku å®¢æˆ·ç«¯æä¾›äº†ä¸€äº›è°ƒè¯•å·¥å…·ï¼š</p><p id="1f8694d5-ea46-80c4-bc68-d1770c32d17e" class="">bashCopy to Clipboard</p><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js" integrity="sha512-7Z9J3l1+EYfeaPKcGXu3MS/7T+w19WtKQY/n+xzmw4hZhJ9tyYmcUS+4QqAlzhicE5LAfMQSF3iFTK9bQdTxXg==" crossorigin="anonymous" referrerPolicy="no-referrer"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" integrity="sha512-tN7Ec6zAFaVSG3TpNAKtk4DOHNpSwKHxxrsiw4GHKESGPs5njn/0sMCUMl2svV4wo4BK/rCP7juYz+zx+l6oeQ==" crossorigin="anonymous" referrerPolicy="no-referrer"/><pre id="1f8694d5-ea46-80ee-9272-c973f54f60b0" class="code"><code class="language-Shell" style="white-space:pre-wrap;word-break:break-all">heroku logs  # Show current logs
heroku logs --tail # Show current logs and keep updating with any new results
heroku ps   #Display dyno status</code></pre></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>